-- Copyright (C) 1983, 1986  by Xerox Corporation. All rights reserved. -- ControlModuleFormat.mesa  Edited by-- JGS		10-Jun-83 15:09:47-- RXJ     	10-Jun-83 15:26:47-- MEW		20-Jun-86  9:20:49DIRECTORY  FrameExtras USING [ReadCodebase],  Inline USING [DBITAND],  Mopcodes USING [zSFC],  PrincOps USING [PrefixHandle],  PrincOpsExtras2 USING [ControlLink, ControlLinkTag, GFTHandle];ControlModuleFormat: DEFINITIONS IMPORTS FrameExtras, Inline =  BEGIN  List: TYPE = POINTER TO ListHead;    nullList: List = NIL;    ListHead: TYPE = MACHINE DEPENDENT RECORD [    length(0): CARDINAL,    parent(1): Finger,    items(2): ARRAY [0..0) OF Item];  Item: TYPE = MACHINE DEPENDENT RECORD [    item(0): SELECT indirect(0): BOOLEAN FROM      FALSE => [gfi(1): PrincOpsExtras2.GFTHandle],      TRUE => [finger(1): Finger],      ENDCASE];  Finger: TYPE = POINTER TO List;    Fingers: TYPE = POINTER TO ARRAY [0..0) OF List;    nullFinger: Finger = NIL;  Call: PROCEDURE [PrincOpsExtras2.ControlLink] = MACHINE CODE {Mopcodes.zSFC};    MainBody: PROCEDURE [frame: PrincOpsExtras2.GFTHandle]     RETURNS [PrincOpsExtras2.ControlLink] = INLINE {    cb: PrincOps.PrefixHandle = Inline.DBITAND[      FrameExtras.ReadCodebase[frame].codebase, 3777777776B];    RETURN[[longProc[      gfi: LOOPHOLE[frame + ORD[PrincOpsExtras2.ControlLinkTag[longProc]]],      pc: cb.mainBodyPC]]]};    MinGlobalFrameSize: CARDINAL = SIZE[Finger];  END.