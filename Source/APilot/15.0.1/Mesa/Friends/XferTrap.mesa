-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- XferTrap.mesa  (last edited by: RXJ      on: 30-Jun-83 16:25:11)DIRECTORY  ESCAlpha USING [aRRXTS, aWRXTS],  Mopcodes USING [zLL2, zLLD0, zESC],  PrincOps USING [ControlLink];XferTrap: DEFINITIONS =  BEGIN OPEN Mopcodes, ESCAlpha;  -- At the end of each Xfer (before instruction fetch) the status is  -- shifted right one bit.  If the bit shifted off the right end is a one,  -- an Xfer trap is started with the original destination of the Xfer  -- as the parameter and the new L as the source.  Status: TYPE = MACHINE DEPENDENT{    off(0), on(1), skip1(2), skip2(4), skip3(8), skip4(16), (65535)};    XferType: TYPE = MACHINE DEPENDENT{    ret(0), call, lfc, port, xfer, trap, pswitch, (65535)};  ReadXTP: PROCEDURE RETURNS [PrincOps.ControlLink, XferType] = MACHINE CODE {zLLD0; zLL2};  ReadXTS: PROCEDURE RETURNS [Status] = MACHINE CODE {zESC, aRRXTS};  WriteXTS: PROCEDURE [Status] = MACHINE CODE {zESC, aWRXTS};  END...LOGTime: August 28, 1980  10:17 AM; By: RXJ     ; Action: Created FileTime:  2-Nov-81 11:48:33; By: JGS; Action: Converted to new instruction set