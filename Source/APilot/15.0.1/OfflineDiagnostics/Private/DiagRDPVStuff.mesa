-- File: DiagRDPVStuff.mesa - last edit:-- MXT                 16-Dec-85 11:15:52-- Copyright (C) 1985  by Xerox Corporation. All rights reserved.  --DiagRDPVStuff.mesa DIRECTORY PhysicalVolume	USING	[ID, Handle, PageNumber]; DiagRDPVStuff: DEFINITIONS =BEGIN BadDisk:		PUBLIC BOOLEAN; BadPageCount:		PUBLIC CARDINAL; BadPageSpace:		PUBLIC ARRAY [0..128) OF PhysicalVolume.PageNumber; Cancel:		PUBLIC SIGNAL; GoodVolumeID:		PUBLIC BOOLEAN; VolumeID:		PUBLIC PhysicalVolume.ID; DiagRDPVStuffImpl:	PROGRAM; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to convert pilot page numbers to cylinder/head/sector -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  AddressToPage:  PROCEDURE RETURNS [pageNumber: PhysicalVolume.PageNumber]; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- verifies that the given bad page is in the bad page table -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  BadPageInTable: PROCEDURE [badPage: PhysicalVolume.PageNumber]    RETURNS [inTable: BOOLEAN];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to generate a physical volume and log bad pages -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  GenPhysicalVolume: PROCEDURE [logBadPages: BOOLEAN¬ FALSE];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- loads the bad pages into BadPageSpace from a specified unit -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  GetBadPages: PROCEDURE RETURNS [empty: BOOLEAN];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- is used to get a volume handle -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     GetVolumeHandle: PROCEDURE RETURNS [handle: PhysicalVolume.Handle];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to convert pilot page numbers to cylinder/head/sector -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  PageToAddr:  PROCEDURE [pageNumber: PhysicalVolume.PageNumber] RETURNS 			[cylinder: CARDINAL, head: CARDINAL, sector: CARDINAL]; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to check formatted/unformatte disk. -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  IsDiskFormatted: PROCEDURE RETURNS[yes: BOOLEAN ¬ FALSE];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to verify PV. -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  VerifyPV: PROCEDURE RETURNS[ok: BOOLEAN ¬ FALSE];  END...    Edited:  16-Dec-85 11:15:52	MXT	Added IsDiskFormatted and VerityPV 