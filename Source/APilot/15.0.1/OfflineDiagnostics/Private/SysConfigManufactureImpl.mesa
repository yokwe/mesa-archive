-- File SysConfigManufactureImpl.mesa	-Last edited:-- STC,  2-Oct-88 22:53:23, Labelless-- STC, 17-Sep-87 17:34:48, remove GetYesNo-- edited:	STC, 28-Mar-87  8:20:39, merge 1.3e & 1.5c.-- RDM	 3-Feb-87 12:02:09	Add daisy mem expansion.-- RDM	 2-Feb-87 13:07:17	Change VERSION to Version in ProcessorFaceExtras.-- RDM	29-Jan-87 16:24:14	Check for daisy memory configuration.-- RDM	 9-Jan-87 14:38:00	Change manufacturing default VMMSizeInPages from vm8mega (22 bits) to vm16mega (23 bits).--	RRP 14-May-86 19:11:06-- RRP	 4-Feb-86 10:26:25	changes for 12.2-- 		14-Oct-85  9:05:09	by: AMR-- Created		11-Oct-85  9:04:29	by: AMR<<	Copyright (C) 1985, 1986, 1987, 1988 by Xerox Corporation. All rights reserved.		The following program was created in 1985 but has not been published within the meaning of the	copyright law, is furnished under license, and may not be used, copied and/or disclosed except	in accordance with the terms of said license.	>>DIRECTORY  EEpromDefs	        USING [ EEpromConfig, VersionNumberROM,  			        VersionNumberRAM, VersionNumberBadPages ],  OfflineDiagInterface  USING [ OfflineDiagnosticProc],--  ProcessorFaceExtras	USING [ Version, VersionResult],  ProcessorFaceExtras2	USING [DoveMachineType, DoveMachineTypeInfo],  SysConfigSubDefs,--  SysConfigControlDefs  USING [ msgKey1, statusPtr],  SysConfigChannelDefs  USING [ eePromImage, eePromPointer];    SysConfigManufactureImpl: PROGRAM	IMPORTS --	ProcessorFaceExtras,	ProcessorFaceExtras2,	SysConfigSubDefs,	SysConfigChannelDefs			EXPORTS SysConfigSubDefs =	BEGIN OPEN Odi: OfflineDiagInterface, SysConfigChannelDefs;  -- ODI stands for OfflineDiagInterface.--******************************************************************************-- ConfigureUserStuff:  --******************************************************************************ManufDef: PUBLIC CARDINAL ¬ 0; -- STCConfigureManufactureUser: PUBLIC  Odi.OfflineDiagnosticProc =  BEGIN--  version: ProcessorFaceExtras.VersionResult _ ProcessorFaceExtras.Version[];  machineType: ProcessorFaceExtras2.DoveMachineType ¬ ProcessorFaceExtras2.DoveMachineTypeInfo[];--  IF ~Odi.GetYesNo [prompt: msgKey1[question2WriteEEProm]]--     THEN SIGNAL Odi.AbortCurrentTest;  FOR i: CARDINAL IN [0..64)  	DO	eePromPointer[i] ¬ 0;	ENDLOOP;	  eePromImage.VersionEProm ¬ EEpromDefs.VersionNumberROM;  eePromImage.VersionRAM ¬ EEpromDefs.VersionNumberRAM;  eePromImage.VersionBadPages ¬ EEpromDefs.VersionNumberBadPages;        eePromImage.BootDevice ¬ rigidDisk;  eePromImage.RigidBooting ¬ allowed;  eePromImage.FloppyBooting ¬ allowed;  eePromImage.EthrenetBooting ¬ allowed;  eePromImage.DisplayPresent ¬ present;  eePromImage.DisplayxAlignment ¬ 1;  eePromImage.DisplayyAlignment ¬ 16;--  eePromImage.Keyboard ¬ english;  eePromImage.Keyboard ¬ SELECT machineType FROM    dahlia, duke, diana => japanese,    ENDCASE => english;  eePromImage.VMMSizeInPages ¬ vm16mega;--  eePromImage.ControlStoreSize ¬ cs4k;  eePromImage.ControlStoreSize ¬ SELECT machineType FROM    duke => cs16k,    dahlia, diana => cs8k,    ENDCASE => cs4k;  eePromImage.HardwareVersion ¬ B2;--  eePromImage.FloppyDiskTypeDrive0 ¬ kb360;  eePromImage.FloppyDiskTypeDrive0 ¬ SELECT machineType FROM    dahlia, duke, diana => kb1200,    ENDCASE => kb360;  eePromImage.MainMemory0 ¬ present;  eePromImage.MainMemory1 ¬ present;  IF machineType = daisy THEN {    eePromImage.MainMemory2 _ present;    eePromImage.MainMemory3 _ present;    eePromImage.MainMemory4 _ present;    eePromImage.MainMemory5 _ present;    eePromImage.MainMemory6 _ present;    eePromImage.MainMemory7 _ present;    eePromImage.MainMemory8 _ notPresent;    eePromImage.MainMemory9 _ notPresent;    eePromImage.MainMemory10 _ notPresent;    eePromImage.MainMemory11 _ notPresent;    eePromImage.MainMemory12 _ notPresent;    eePromImage.MainMemory13 _ notPresent;    eePromImage.MainMemory14 _ notPresent;    eePromImage.MainMemory15 _ notPresent;    eePromImage.MainMemoryExpansion ¬ mega1}  ELSE {    IF machineType = duke OR machineType = diana THEN {      eePromImage.MainMemory2 ¬ present;      eePromImage.MainMemory3 ¬ present;      eePromImage.MainMemory4 ¬ present;      eePromImage.MainMemory5 ¬ present;      eePromImage.MainMemory6 ¬ present;      eePromImage.MainMemory7 ¬ present}    ELSE {      eePromImage.MainMemory2 ¬ notPresent;      eePromImage.MainMemory3 ¬ notPresent;      eePromImage.MainMemory4 ¬ notPresent;      eePromImage.MainMemory5 ¬ notPresent;      eePromImage.MainMemory6 ¬ notPresent;      eePromImage.MainMemory7 ¬ notPresent};    eePromImage.MainMemory8 ¬ present;    eePromImage.MainMemory9 ¬ present;    eePromImage.MainMemory10 ¬ present;    eePromImage.MainMemory11 ¬ present;    eePromImage.MainMemory12 ¬ present;    eePromImage.MainMemory13 ¬ present;    eePromImage.MainMemory14 ¬ present;    eePromImage.MainMemory15 ¬ present;--    eePromImage.MainMemoryExpansion ¬ k512};    eePromImage.MainMemoryExpansion ¬      SELECT machineType FROM        dahlia, duke, diana => mega3,	ENDCASE => k512};  ManufDef ¬ 9753;    SysConfigSubDefs.ConfigRDDisk[]; -- added by Chang    END; -- ConfigureBoot  END.logCreated on 11-Oct-85  9:04:29 by Allen Roberts