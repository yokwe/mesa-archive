-- SysConfigHeadDove.mesa-- Created	7-May-85 11:10:52	by: AMR--		6-Aug-85 16:36:11	by: JPM	Opie redesign conversion--		17-Oct-85 10:56:06	by: AMR-- Last edited	14-Nov-86 13:52:35	RDM Modified OPEN statement to add SCIO.-- This head contains the code for configuring the EEPROM.--	<<	Copyright (C) 1985 by Xerox Corporation. All rights reserved.		The following program was created in 1985 but has not been published within the meaning of the	copyright law, is furnished under license, and may not be used, copied and/or disclosed except	in accordance with the terms of said license.	>>DIRECTORY  SysConfigFace USING [DoneCondition, UpStatusCndt],  SysConfigIOFaceDove USING [SysConfigurationFunctionContextBlock],  DoveHandlerIDs USING [configuration],  DoveInputOutput USING [BuildMesaClientCondition, ByteSwappedWord,  			ClientCondition, GetHandlerIORegionPtr, NotifyIOP];  SysConfigHeadDove: PROGRAM  IMPORTS DoveInputOutput  EXPORTS SysConfigFace =  BEGIN OPEN SCIO: SysConfigIOFaceDove; -- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =  configurationFCB: PUBLIC LONG POINTER TO SCIO.SysConfigurationFunctionContextBlock _ 	DoveInputOutput.GetHandlerIORegionPtr[DoveHandlerIDs.configuration];        sysConfigUpConditionPtr: LONG POINTER TO DoveInputOutput.ClientCondition _ LOOPHOLE[@configurationFCB.SysConfigUpCndt];  eePromImage: PUBLIC LONG DESCRIPTOR FOR ARRAY OF DoveInputOutput.ByteSwappedWord _ 			DESCRIPTOR[configurationFCB.EEPromImage];			 sysConfigUpDoneFlag: PUBLIC LONG POINTER TO SysConfigFace.DoneCondition _ 		LOOPHOLE[@configurationFCB.SysConfigUpDoneFlag];		 upStatus: PUBLIC LONG POINTER TO SysConfigFace.UpStatusCndt _ 		LOOPHOLE[@configurationFCB.UpStatus];   -- = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = =  Initialize: PUBLIC PROC [wakeUpMask:WORD] =	--Start-Up initialization code     BEGIN     DoveInputOutput.BuildMesaClientCondition[sysConfigUpConditionPtr,wakeUpMask];     END;       ReadEEprom: PUBLIC PROC=     BEGIN     configurationFCB.DownCommand _ cmdReadAll;     DoveInputOutput.NotifyIOP[configurationFCB.SysConfigDownMask];     END;    WriteEEpromEntry: PUBLIC PROC [index: CARDINAL] =     BEGIN     configurationFCB.DownCommand _ cmdWriteEntry;     configurationFCB.DownEntry _ index;     configurationFCB.SysConfigUpDoneFlag _ notDone;     DoveInputOutput.NotifyIOP[configurationFCB.SysConfigDownMask];     END;  END.