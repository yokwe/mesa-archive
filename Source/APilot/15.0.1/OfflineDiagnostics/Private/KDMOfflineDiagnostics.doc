KDMOfflineDiagnostics.doc: This files contains the documentation for KDMOfflineDiagnosticsDove, the Keyboard, Display, Mouse and Beeper Diagnostics.Last updated on 27-Jan-86  9:49:43 by  KLDocumentation base:    KDMOfflineDiagnosticsDove.mesa    KDMMessagesDove.mesa     KDMMsgesAndKBDsImplDove.mesa 1.0  Introduction     The Keyboard, Display, Beeper and Mouse diagnostic package is an     OfflineDiagKernel client. It can be packaged in the following     configurations:           	1) By itself in a single boot file.	2) Together with other diagnostic packages in the same boot file.	3) Put on a floppy and be loaded by the Floppy Executive.	     In all configurations, the user needs to identify his/her user class.      In configuration 1 above, the diagnostic menu is automatically displayed     for selection after user identification. In configuration 2, all the     diagnostic packages are displayed in a menu for user selection.     Once a user selects "Keyboard, Display, Mouse and Beeper Diagnostics",     the test selection menu will be displayed for user selection.          In configuration 3, the Floppy Executive will prompt the user to insert     the second floppy diskette, which contains all the other diagnostics. Once     loaded into the system, operation is identical to configuration 2.          The program is very tolerant and forgiving when it comes to user inputs.     Erroneous inputs will result in a prompt giving the proper input range      to the user. Online help is also available by entering a lone question mark     or a menu item followed by a question mark; the lone question mark gives     a global help text that applies to the entire menu; the latter gives     help to that specific menu item.2.0  First screen: Login Screen     Diagnostic users are divided into 5 classes as follows:	 Normal Users - No login needed. Selecting 1 will advance to next menu.         System Administrators - Password is "rgmsn"	 Field Service  - Password is "rexifsn"	 Manufacturing - Password is "fle"	 Programmers/Engineers - Password is "do8"	      The tests each class of users can run may be different depending on the     riskiness of the tests. Generally, the test runnable by the Normal Users are     harmless, so no login is required. All the other classes of users must enter     a valid password. The passwords entered determine the contents of the menus     that will be generated and presented to the users for selection. The     specification of who can run each test is done by the diagnostic programmer.     Also, the presentation order of the menu items can be different for      different classes of users.          The passwords are meant to create a sense of caution, not to exclude access;     they are therefore given above.2.1  Screen Lay-Out  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running:					    		              I  I									      I  I   What class of user do you belong to?				      I  I	 								      I  I      1 - Normal User					              I  I	 								      I  I	 2 - System Administrator				     	      I  I	 								      I  I	 3 - Technical Support				      		      I  I									      I  I   Please enter selection:					              I  I   < "Please enter password:" displayed here if 2 or 3 is selected >	      I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear automatically only if needed.		      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I		     							      I	     I	 					     			      I  I	 					 			      I  I            						   		      I  +===========================================================================+2.2  Valid inputs     The valid inputs for this screen are "1", "2", "3", "?" and STOP.     Entering a question mark displays this screen's help text on the screen. This     screen's help text is as follows:     Log In Help        Normal users can only run harmless tests that give qualitative	indications. No login is needed        Other users can run tests that may damage the system. They must login with        a valid password.          "1" identifies the user as a normal user. All menu generated will only     contain items selectable by this class of users. This selection exits the      Login Screen and presents the Subsystem Selection Screen to the user.     "2" identifies the user as a System Administrator. The user will be prompted     to enter a password. If the password entered is incorrect, the user must     reselect a menu item and start over.     "3" identifies the user as a Technical Representative, from Manufacturing or     a programmer. The user will be prompted to enter a password. The password     entered will identify the user's organization. Again, if the password entered     is incorrect, the user must reselect a menu item and start over.     STOP exits this menu and returns to the System Configuration Verification     Screen.3.0  Second Screen: Subsystem Selection Screen     This screen is displayed after a user has successfully logged in. This screen     presents to the user the diagnostic packages bound into this boot file. If     the boot file contains only the Keyboard, Display, Mouse and Beeper     diagnostics, then this screen is automatically exited and the diagnostic     menu presented to the user for selection.     If there are more than one diagnostic packages, the Subsystem Selection Menu     is displayed for selection.3.1  Screen Lay-Out  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running:			    		              		      I  I									      I  I   Available Selections						      I  I	 								      I  I   ( Runtime menu. It varies depending on boot file contents )  	      I  I      ...								      I  I	 								      I  I	 n - Keyboard, Display, Mouse and Beeper Tests			      I  I	 								      I  I      ...								      I  I									      I  I   Please enter selection:					              I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear only if needed.				      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I		     							      I	     I	 					     			      I  I	 					 			      I  I            						   		      I  +===========================================================================+ 3.2  Valid inputs     The valid selecions are the menu selecion numbers, "?" and STOP. Selecting     "n" in the sample Screen Lay-Out selects the Diagnostic Screen for the     Keyboard/Display/Mouse/Beeper diagnostics.     "?" displays the following help text:  Useful information    The blinking cursor points to the applicable prompt. Do as prompted    SPACE and CR are input terminators. BACKSPACE erases the last input character    A question mark alone (?) gives help to the entire menu    <n> followed by ? gives help to the item identified by n    UNDO inverts the screen    STOP aborts the current test, if allowed; or exits the current menu    The current selection is displayed at the top of the screen4.0  Keyboard/Display/Mouse/Beeper Diagnostic Screens     The diagnostic screens for different user classes are different. For this     diagnostic package, there are only 2 menus; one for the Normal User and     System Administration classes of users, and another for the Field      Service, Manufacturing and Programmer classes of users.4.1  Normal User and System Administration Menu Screen  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1984, 1985. All rights reserved.	      I  I   Running Subsystem Selection    Selection:        		      	      I  I									      I  I   Available Selections						      I  I	 								      I  I      1 - Keyboard, Mouse And Beeper Test			  	      I  I      2 - Borders And Data Field					      I  I	 3 - Cross-Hair Pattern						      I  I	 4 - Go To Previous Menu					      I  I									      I  I   Please enter selection:					              I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear only if needed.				      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I		     							      I	     I	 					     			      I  I	 					 			      I  I            						   		      I  +===========================================================================+4.1.1  Valid inputs   The following table summarizes the valid inputs and their consequences.   Inputs 	Consequences   ------------------------------------------------------------------------------   ?	Prints the following help text:       	Special keys for the Display diagnostics	   NEXT displays the next pattern, if any; SPACE inverts the display; 	   STOP exits the test"      1	Selects "Keyboard And Mouse Test"      1?	Prints the following help text: "Tests keyboard and mouse"      2	Selects "Borders And Data Field"      2?	Prints the following help text: "Borders, the Data Field and fine        vertical, horizontal and slanted lines are displayed"	   3	Selects "Cross-Hair Pattern"      3?	Prints the following help text: "Prints a cross-hair pattern on the data   	field"	   4	Selects "Go To Previous Menu"      4?	Prints the following help text: "Exits this menu and returns to parent        menu"	   STOP Exits this menu and returns to Subsystem Selection Menu or Login Menu.         4.2  Field Service, Manufacturing and Programmer Menu Screen  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1984, 1985. All rights reserved.	      I  I   Running:			    		              		      I  I									      I  I   Available Selections						      I  I	 								      I  I      1 - Keyboard, Mouse And Beeper Test			  	      I  I      2 - Borders And Data Field					      I  I	 3 - Vertical And Horizontal Bars				      I  I	 4 - Cross-Hair Pattern						      I  I	 5 - Fill Screen With H, E, @, OR Slanted Lines			      I  I	 6 - Printer Test Pattern					      I  I	 7 - Go To Previous Menu					      I  I									      I  I   Please enter selection:					              I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear only if needed.				      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I		     							      I	     I	 					     			      I  I	 					 			      I  I            						   		      I  +===========================================================================+4.2.1  Valid inputs   The following table summarizes the valid inputs and their consequences.   Inputs 	Consequences   ------------------------------------------------------------------------------   ?	Prints the following help text:    		Special keys for the Display diagnostics	   NEXT displays the next pattern, if any; SPACE inverts the display; 	   STOP exits the test"      1	Selects "Keyboard And Mouse Test"      1?	Prints the following help text: "Tests keyboard and mouse"      2	Selects "Borders And Data Field"      2?	Prints the following help text: "Displays borders and the Data Field.    	Draws vertical, horizontal and slanted lines"      3	Selects "Vertical And Horizontal Bars"      3?	Prints the following help text: "VERTICAL and HORIZONTAL bars of various   	widths are displayed"      4	Selects "Cross-Hair Pattern"      4?	Prints the following help text: "Prints a cross-hair pattern on the data   	field"      5	Selects "Fill Screen With H, E, @, OR Slanted Lines"      5?	Prints the following help text: "NEXT displays the next pattern, if any;   	SPACE inverts the display; STOP exits the test.	   6	Selects "Printer Test Pattern"      6?	Prints the following help text: "Fills the screen with the printable        character set"	   7	Selects "Go To Previous Menu"      7?	Prints the following help text: "Exits this menu and returns to parent        menu"	   STOP Exits this menu and returns to Subsystem Selection Menu or Login Menu.   5.0  Test Descriptions     This section describes each menu selection in detail.5.1  Keyboard And Mouse Test     Selecting this menu item clears the display and results in the following     screen being displayed:       +===========================================================================+  I									      I  I   Useful Information	    		              		      I  I									      I  I     Keys and Mouse Buttons are represented by rectangles		      I  I	Rectangle states: DARK when associated key or button is depressed,    I  I      		  WHITE when up				  	      I  I     To exit test: Depress AND release the STOP key			      I  I	 								      I  I   Beeper Test: LOCK beeps continuously, RETURN beeps once		      I  I	 								      I  I	 								      I  I	 				-----------			      I  I				        | --- --- |	Free roaming	      I  I	 				| | | | | |	mouse		      I  I	 				| --- --- |			      I  I	 				|         |			      I  I	 				-----------			      I  I									      I  I   									      I  I	 	      						    	      I  I	--------------------------------------------------------	      I	   I    |      						       |              I	  I    |       	      					       |    	      I  I    |	Keyboard (Lots of sqares... not drawn)	       |	      I  I    |						       | 	      I  I	--------------------------------------------------------	      I	  I	 					     			      I  I	 					 			      I  I            						   		      I  +===========================================================================+      The rectangle corresponding to the mouse should move around freely as the     mouse is moved around. The rectangle representing the mouse buttons should     turn dark when depressed, white when not depressed.          The keyboard is displayed at the bottom of the screen. each key is      represented by a rectangle. When a key is depressed, it turns dark; when     it is released, it turn white. More than one key can be depressed simultan-     eously.           The STOP key is a special case. When it is depressed, it turns dark.     When the STOP key is released, the test stops and the selection menu is     redislayed.     5.2  Borders And Data Field     This selection presents the following screens cyclically:          	a) A clear screen with dark borders	b) A screenful of one-pixel wide vertical bars separated by 3 pixels	c) A screenful of one-pixel wide horizontal bars separated by 3 pixels	d) A composite of  b and c	e) A screenfull of intersecting and slanted lines      While in this test, the following keys have special significance:          	NEXT key - Displays the next screen pattern.	SPACE bar - Inverts the display.	STOP - Returns to selection menu.	5.3  Vertical And Horizontal Bars     This selection presents the following screens cyclically:          	a) Verical bars separated by 16 pixels. The bars advanes from 1 to 8	   pixels wide automatically each time the NEXT is entered.	b) Horizontal bars separated by 16 pixels. The bars advanes from 1 to 8	   pixels wide automatically each time the NEXT is entered.	c) Composite of a and b.	     While in this test, the following keys have special significance:          	NEXT key - Displays the next screen pattern.	SPACE bar - Inverts the display.	STOP - Returns to selection menu.	5.4  Cross-Hair Pattern     This selection prints a crossed-hair pattern on the screen. While in this     test, the following keys have special significance:          	SPACE bar - Inverts the display.	STOP - Returns to selection menu.	NEXT - Changes the line thickness, which can vary from 1 to 10 pixels.       5.5  Fill Screen With H, E, @, OR Slanted Lines     This selection presents the following screens cyclically:          	a) A screenfull of H's.	b) A screenfull of E's.	c) A screenfull of fine @'s.	d) A screenfull of coarse @'s.	e) A screenfull of Slanted Lines.	     While in this test, the following keys have special significance:          	NEXT key - Displays the next screen pattern.	SPACE bar - Inverts the display.	STOP - Returns to selection menu.	5.6  Adjust Data Field Position     This selection allows one to adjust the data field position on the screen     by roughly 1/4 of an inch in each direction. This works only on systems     using the Daisy chip set and is, therefore, unavailable to pre-Daisy      sysyems.          The following display is presented to the user:       +===========================================================================+  I									      I  I   Proper alignment: Opposite borders should be equal		      I  I	 	      						    	      I  I   Meaningful keys, located on the numeric keypad, for this procedure are: I  I	 	      						    	      I  I	8 - Moves screen up by an increment				      I  I	2 - Moves screen down by an increment				      I  I	4 - Moves screen left by an increment				      I  I   	6 - Moves screen right by an increment		        	      I  I	STOP - Stores new position and returns to parent menu		      I	     I	 					     			      I  I	 					     			      I  I	 					     			      I  I	 					     			      I  I	 					     			      I  I	 					     			      I  I	 			Picture of keys, each with an arrow 	      I  I	 			pointing to the direction of adjustment       I  I	 					     			      I  I	 					     			      I  I	 					     			      I  I            						   		      I  +===========================================================================+5.7  Printer Test Pattern"     This selection fills the screen with lines consisting of the printable      ASCII character set (41C to 176C inclusively). The first line's leading     character in 41C. Each subsequent line begins with a character that     is 1 grater than the previous line's beginning character, thus creating a     sliding pattern.          While in this test, the following keys have special significance:     	SPACE bar - Inverts the display.	STOP - Returns to selection menu.      6.0  International Support     This package supports internation languages ane keyboards. All messages,     prompts and keyboard layouts are collected in a message implementation file,     KDMMsgesAndKBDsImplDove.mesa, which can be modified easily. Once modified,     the boot file can be rebuilt using it. The boot file will the "talk" in the     "tongue" bound in the boot file. This includes Y/N.     The three keyboards suppoeted are:          	 American Keyboard	 European Keyboard	 Japanese Keyboard      All three keyboard representations are built into KDMMsgesAndKBDsImplDove.     By setting one and only one of the following BOOLEANs to TRUE, the correct     keyboard will be generated for the Keyboard And Mouse Test:              AmericanKeyboard: BOOLEAN	 EuropeanKeyboard: BOOLEAN	 JapaneseKeyboard: BOOLEAN	7.0  Subsystem Components   KDMOfflineDiagnosticsDove.mesa - Diagnostic implementations   KDMMsgesAndKBDsDove.mesa - Invariant abstractions for messages and keyboards   KDMMsgesAndKBDsImplDove.mesa - Message and keyboard implementation   KDMOfflineDiagnosticsDove.df - DF file for entire diagnostic component   KDMOfflineDiagsDove.config - Configuration file   KDMOfflineDiagnostics.doc - Documentation for component