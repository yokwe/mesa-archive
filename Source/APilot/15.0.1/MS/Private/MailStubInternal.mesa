-- Copyright (C) 1983, 1984  by Xerox Corporation. All rights reserved. -- MailStubInternal.mesa  -  Internal stuff for MailStub.-- last edited by Wobber,   5-Apr-84 13:13:03-- last edited by Hankins: 12-Jul-83 11:17:54DIRECTORY  Auth USING [ConversationHandle, IdentityHandle],  Courier USING [Handle],  MailCourier USING [ParamPtr, SessionToken],  MailTransport USING [Location],  NSName USING [Name],  System USING [NetworkAddress];    MailStubInternal: DEFINITIONS =  BEGIN    -- TYPES    CallVariant: TYPE = {directed, located, broadcast, addressed};  CallType: TYPE = RECORD [    var: SELECT variant: CallVariant FROM      broadcast => [],      directed => [mbx: NSName.Name],      located => [loc: MailTransport.Location],      addressed => [sPtr: LONG POINTER TO System.NetworkAddress],      ENDCASE];      Session: TYPE = LONG POINTER TO SessionRecord;  SessionRecord: TYPE = RECORD [    cH: Courier.Handle,    conv: Auth.ConversationHandle ¬ NIL,    token: MailCourier.SessionToken ¬ NULL,    streamInUse: BOOLEAN ¬ FALSE,    streamAvailable: CONDITION];      -- PROCS      CallWithSession: PROC [s: Session, params: MailCourier.ParamPtr];	  CallWithoutSession: PROC [ params: MailCourier.ParamPtr,     callType: CallType, identity: Auth.IdentityHandle ¬ NIL] RETURNS [newS: Session];        DeleteSession: PROC [s: Session];  LocalPostingSlot: PROC RETURNS [System.NetworkAddress];    END.       