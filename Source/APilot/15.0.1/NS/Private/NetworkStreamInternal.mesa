-- File: NetworkStreamInternal.mesa - last edit:-- SMA                 22-May-86 11:34:01-- AOF                 10-Dec-85 18:26:04-- Copyright (C) 1984, 1985, 1986 by Xerox Corporation. All rights reserved. DIRECTORY  NSBuffer USING [Buffer, QueueObject, Seal],  Stream USING [Object],  PacketStream USING [Handle],  Socket USING [ChannelHandle];NetworkStreamInternal: DEFINITIONS =  BEGIN  --The internal definitions module for the packet and byte stream.  ControlHandle: TYPE = LONG POINTER TO ControlObject;  ControlObject: TYPE = RECORD [    streamObject: Stream.Object, psH: PacketStream.Handle];  --STATES OF THE PACKET STREAM  State: TYPE = {    unestablished, activeEstablish, waitEstablish, established, open,    terminating, suspended};  --STATES FOR OPTIONAL CLOSE PROTOCOL USING SUBSEQUENCE TYPES  CloseState: TYPE = {    sendClose, waitCloseReply, sendCloseReply, waitCloseReplyReply, closed};    --LISTENER OBJECT  ListenerHandle: TYPE = LONG POINTER TO ListenerObject;  ListenerObject: TYPE = RECORD [    seal: Seal, state: {idle, listening, pending}, queue: NSBuffer.QueueObject,    condition: CONDITION, socket: Socket.ChannelHandle, buffer: NSBuffer.Buffer];    Seal: TYPE = NSBuffer.Seal;  END.LOG23-May-84 14:29:01  AOF  Post Klamath.10-Dec-85 18:25:54  AOF  Listener restructuring.22-May-86 11:26:24  SMA  Remove dependencies on Buffer.