-- File: XMessage.mesa-- last editied by:-- JGS		30-Nov-83 10:00:54 -- Smokey,	21-Oct-83 15:42:24 -- Ayers	29-Sep-83 13:56:35 [mechanically edited in XString for CES] DIRECTORY  XString USING [Reader, ReaderBody, Writer];  XMessage: DEFINITIONS =   BEGIN-- Types  ClientData: TYPE = LONG POINTER;  DestroyMsgsProc: TYPE = PROCEDURE [clientData: ClientData];    Handle: TYPE = LONG POINTER TO Object;   Object: TYPE;    MsgID: TYPE = CARDINAL;  Msgkey: TYPE = CARDINAL;  MsgkeyList: TYPE = LONG DESCRIPTOR FOR ARRAY OF Msgkey;  MsgSeverity: TYPE = {good, bad, awful, whoKnows};  StringArray: TYPE = LONG DESCRIPTOR FOR ARRAY OF XString.ReaderBody;  Messages: TYPE = LONG DESCRIPTOR FOR ARRAY OF MsgEntry;  MsgEntry: TYPE = RECORD [    msgkey: Msgkey,		-- runtime mesage access handle    msg: XString.ReaderBody,		-- message body    owner: LONG STRING _ NIL,		-- module, group, etc.    severity: MsgSeverity _ good,	-- ???    translationNote: LONG STRING _ NIL,  -- special instructions to the translators    translatable: BOOLEAN _ TRUE,	-- IF FALSE do not translate    type: MsgType _ userMsg,		-- assertion as to who the client is    id: MsgID];			-- unique handle for the life time of message    MsgType: TYPE = {userMsg, template, argList, menuItem, pSheetItem};  Error: ERROR [type: ErrorType];  ErrorType: TYPE = {    arrayMismatch, invalidMsgkeyList, invalidStringArray, invalidString,    notEnoughArguments};  --  Operations for obtaining messages  Get: PROCEDURE [h: Handle, msgkey: Msgkey] RETURNS [msg: XString.Reader];	-- Returns message corresponding to the given msgkey.  GetList: PROCEDURE [h: Handle, msgkeys: MsgkeyList, msgs: StringArray];	-- Fills the client-supplied array with the requested messages.	--  Operations for inserting/extracting arguments into a message template  Compose: PROCEDURE [    source: XString.Reader, destination: XString.Writer, args: StringArray];	-- composes a message consisting of the passed message template	-- and inserted arguments.*  Decompose: PROCEDURE [source: XString.Reader] RETURNS [args: StringArray];	-- Returns an array of strings that resulted from parsing the	-- supplied source.*	--  Message initialization operations  AllocateMessages: PROCEDURE [    applicationName: LONG STRING, maxMessages: CARDINAL,    clientData: ClientData, proc: DestroyMsgsProc]    RETURNS [h: Handle];	-- allocates and initializes a data structure for subsequent message	-- registry and access. The DestroyMsgsProc is used when the message	-- data structure is to be destroyed (unloading Tool or application).	  DestroyMessages:PROCEDURE [h: Handle];	-- deletes all the messages in currently registered (by calling the 	-- registered DestroyMsgProc) and then destroys any private data	-- structures.  RegisterMessages: PROCEDURE [    h: Handle, messages: Messages, stringBodiesAreReal: BOOLEAN];	--  Allows a client to initialize a range of messages. If the value	-- of BOOLEAN stringBodiesAreReal is TRUE it indicates to the	-- implementor of RegisterMessages that it is ok to use the pointer       	-- messages[n].msg in your private data structures. If this	-- BOOLEAN = FALSE then the string body must be copied if its value	-- is to be retained after the call.	END.  -- of Message