-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. -- File: RS232C.Mesa-- LastEdited: 21-Jan-85 11:12:35   By: SMA  DIRECTORY  Environment USING [Byte],  RS232CEnvironment USING [    AutoRecognitionOutcome, CharLength, ClockSource, CommParamHandle,    CommParamObject, CompletionHandle, Correspondent,    DialMode, Duplexity, EncodeData, FlowControl, IdleState, LineSpeed, LineType,    NetAccess, nullLineNumber, Parity, PhysicalRecord, PhysicalRecordHandle,    ReserveType, StopBits, SyncChar, SyncCount];RS232C: DEFINITIONS =  BEGIN  -- Interface Definitions  Create: PROCEDURE [    lineNumber: CARDINAL, commParams: CommParamHandle,    preemptOthers, preemptMe: ReserveType] RETURNS [channel: ChannelHandle];  Get: PROCEDURE [channel: ChannelHandle, rec: PhysicalRecordHandle]    RETURNS [CompletionHandle];  Put: PROCEDURE [channel: ChannelHandle, rec: PhysicalRecordHandle]    RETURNS [CompletionHandle];  TransferWait: PROCEDURE [channel: ChannelHandle, event: CompletionHandle]    RETURNS [byteCount: CARDINAL, status: TransferStatus];  Delete: PROCEDURE [channel: ChannelHandle];  Suspend: PROCEDURE [channel: ChannelHandle, class: OperationClass];  Restart: PROCEDURE [channel: ChannelHandle, class: OperationClass];  GetStatus: PROCEDURE [channel: ChannelHandle] RETURNS [stat: DeviceStatus];  StatusWait: PROCEDURE [channel: ChannelHandle, stat: DeviceStatus]    RETURNS [newstat: DeviceStatus];  --  RS232C-specific procedures  --  AutoRecognitionWait: PROCEDURE [channel: ChannelHandle]    RETURNS [outcome: AutoRecognitionOutcome];  GetNextLine: PROCEDURE [lineNumber: CARDINAL] RETURNS [nextLineNumber: CARDINAL];  TransmitNow: PROCEDURE [channel: ChannelHandle, event: CompletionHandle]    RETURNS [byteCount: CARDINAL, status: TransferStatus];  SendBreak: PROCEDURE [channel: ChannelHandle];  SetParameter: PROCEDURE [channel: ChannelHandle, parameter: Parameter];  SetLineType: PROCEDURE [channel: ChannelHandle, lineType: LineType];  -- SIGNALs and ERRORs  ChannelInUse, ChannelSuspended, InvalidLineNumber, InvalidParameter,    NoRS232CHardware, SendBreakIllegal, UnimplementedFeature: ERROR;  -- Interface type definitions  LineType: TYPE = RS232CEnvironment.LineType;  nullLineNumber: CARDINAL = RS232CEnvironment.nullLineNumber;  ClockSource: TYPE = RS232CEnvironment.ClockSource;  CommParamHandle: TYPE = RS232CEnvironment.CommParamHandle;  CommParamObject: TYPE = RS232CEnvironment.CommParamObject;  DialMode: TYPE = RS232CEnvironment.DialMode;  Duplexity: TYPE = RS232CEnvironment.Duplexity;  EncodeData: TYPE = RS232CEnvironment.EncodeData;  IdleState: TYPE = RS232CEnvironment.IdleState;  NetAccess: TYPE = RS232CEnvironment.NetAccess;  ReserveType: TYPE = RS232CEnvironment.ReserveType;  ChannelHandle: TYPE [2];  AutoRecognitionOutcome: TYPE = RS232CEnvironment.AutoRecognitionOutcome;  CompletionHandle: TYPE = RS232CEnvironment.CompletionHandle;  OperationClass: TYPE = {input, output, other, all};  PhysicalRecordHandle: TYPE = RS232CEnvironment.PhysicalRecordHandle;  PhysicalRecord: TYPE = RS232CEnvironment.PhysicalRecord;  TransferStatus: TYPE = {    success, dataLost -- (caused by input buffer overrun -- , deviceError,    frameTimeout, checksumError, parityError, asynchFramingError    -- (i.e. stop bit(s) missing) -- , invalidChar, invalidFrame, aborted,    disaster};  DeviceStatus: TYPE = RECORD [    statusAborted: BOOLEAN,    dataLost: BOOLEAN,    --latched: caused by arrival of data with no input buffer allocated    breakDetected: BOOLEAN,  --latched    clearToSend, dataSetReady, carrierDetect: BOOLEAN,    -- correspond to signals in EIA RS-232-C Spec    ringHeard: BOOLEAN,  --latched version of EIA RS-232-C Ring Indicator    ringIndicator: BOOLEAN,    deviceError: BOOLEAN];  Parameter: TYPE = RECORD [    SELECT type: ParameterType FROM    charLength => [charLength: CharLength],    clockSource => [clockSource: ClockSource],    correspondent => [correspondent: Correspondent],    dataTerminalReady => [dataTerminalReady: BOOLEAN],    echoing => [echoing: BOOLEAN],    encodeData => [encodeData: EncodeData],    flowControl => [flowControl: FlowControl],    frameTimeout => [frameTimeout: CARDINAL],    idleState => [idleState: IdleState],    latchBitClear => [latchBitClearMask: LatchBitClearMask],    lineSpeed => [lineSpeed: LineSpeed],    maxAsyncTimeout => [maxAsyncTimeout: CARDINAL],    parity => [parity: Parity],    requestToSend => [requestToSend: BOOLEAN],    stopBits => [stopBits: StopBits],    syncChar => [syncChar: SyncChar],    syncCount => [syncCount: SyncCount],    ENDCASE];  ParameterType: TYPE = {    charLength, clockSource, correspondent, dataTerminalReady, echoing,    encodeData, flowControl, frameTimeout, idleState, latchBitClear,    lineSpeed, maxAsyncTimeout, parity, requestToSend, stopBits, syncChar,     syncCount};  CharLength: TYPE = RS232CEnvironment.CharLength;  Correspondent: TYPE = RS232CEnvironment.Correspondent;  FlowControl: TYPE = RS232CEnvironment.FlowControl;  LatchBitClearMask: TYPE = DeviceStatus;  LineSpeed: TYPE = RS232CEnvironment.LineSpeed;  Parity: TYPE = RS232CEnvironment.Parity;  StopBits: TYPE = RS232CEnvironment.StopBits;  SyncCount: TYPE = RS232CEnvironment.SyncCount;  SyncChar: TYPE = RS232CEnvironment.SyncChar;  END.  -- RS232CLOGTime: 1978  By: Victor Schwartz  Action: Created fileTime: October 1979  By: Victor Schwartz  Action: Pre-Teak LOG entries removedTime: June 20, 1980  2:51 PM  By: Victor Schwartz  Action: Pre-Amargosa LOG entries removed.Time: June 20, 1980  2:51 PM  By: Victor Schwartz  Action: Remove Abort and ChannelDoesNotExist.  Change semantics of Suspend/Restart.Time: January 20, 1981  12:43 PM   By: Danielson  Action: Add procedure GetLineCount  to allow client to obtain count of total number of RS232C lines.  Added deviceError to deviceStatus to allow reporting of terminal device errors.Time: 16-Jul-81 13:29:25  By: Danielson  Action: Combined RS232C and RS232CManagerTime: 13-Aug-81 15:11:15  By: Danielson  Action: Added flow control, echoing and GetNextLineTime: 28-Jun-82 13:56:34  By: Danielson  Action: Removed ois referencesTime: 21-Jan-85 11:07:13  By: SMA  Action: added encodeData, idleState, maxAsyncTimeout, clockSource.