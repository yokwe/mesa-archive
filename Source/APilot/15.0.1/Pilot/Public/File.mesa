-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. -- File.mesa   24-Nov-82  8:34:20 by AWL      DIRECTORY  System USING [nullID, VolumeID];File: DEFINITIONS =  BEGIN  -- File identifiers and types:  ID: TYPE [2];  File: TYPE = RECORD [fileID: ID, volumeID: System.VolumeID];  nullID: ID = LOOPHOLE[LONG[0]];  Type: TYPE = RECORD [CARDINAL];  nullFile: File = [nullID, [System.nullID]];  -- Addressing within a file:  maxPagesPerFile: LONG CARDINAL = 8388607;  -- = 2**23 - 1  PageNumber: TYPE = LONG CARDINAL;  -- simulate TYPE = [0..maxPagesPerFile);  firstPageNumber: PageNumber = 0;  lastPageNumber: PageNumber = maxPagesPerFile - 1;  PageCount: TYPE = LONG CARDINAL;  -- simulate TYPE = [0..maxPagesPerFile];  firstPageCount: PageCount = 0;  lastPageCount: PageCount = maxPagesPerFile;  -- Creating and deleting files:  Create: PROCEDURE [volume: System.VolumeID, initialSize: PageCount, type: Type]    RETURNS [file: File];  Delete: PROCEDURE [file: File];  -- Attributes of files:  GetSize: PROCEDURE [file: File] RETURNS [size: PageCount];  SetSize: PROCEDURE [file: File, size: PageCount];  GetAttributes: PROCEDURE [file: File] RETURNS [type: Type, temporary: BOOLEAN];  MakePermanent: PROCEDURE [file: File];  -- Signals and errors:  Error: ERROR [type: ErrorType];  ErrorType: TYPE = {invalidParameters, reservedType};    MissingPages: ERROR [file: File, firstMissing: PageNumber, countMissing: PageCount];    Unknown: ERROR [file: File];  END.--LOGMay 5, 1978  9:16 AM		HXL     Created file from Pilot Functional Spec.June 21, 1978  3:17 PM		HXL     Changed value of maxPagesPerFile to correct specification; changed name of "type" parameter to procedure Create.August 3, 1978  12:51 PM	HXL     Added nullID.August 18, 1978  11:54 AM	Horsley   Added reservedType to ErrorType.March 7, 1979  10:42 AM		DXR      Changed PageNumber and PageCount to LONG CARDINAL, as allowed by Mesa 5.0.March 30, 1979  4:48 PM		DXR      Converted ShowCapability and LimitPermissions to inline procedures.April 3, 1979  12:40 PM		DXR      Converted LimitPermissions to use Mopcodes directly to avoid importing InlineDefs.March 31, 1980  4:26 PM		RXG      Added transaction handles.April 15, 1980  3:59 PM		RXG      Added nullTransactionHandle.June 16, 1980  2:17 PM		PXM       Cleanup.4-Aug-81 14:25:50		WDK    /AWL         Added lookOnVolume parameter to GetAttributes.  Capability becomes machine dcpendent.March 2, 1982  1:29 PM		WDK       All operations get a volume parameter. Added ErrorType[invalidParameters]. Deleted Capability, nullCapability, Permissions, ShowCapability, LimitPermissions, MakeImmutable, ReplicateImmutable, DeleteImmutable, Move, IsOnVolume, transaction stuff, ErrorType[nonUniqueID].28-Sep-82 11:13:12		AWL         Added error MissingPages.24-Nov-82  8:34:15		AWL         Added File.File and changed all (file, volume) paris to be a single variable   of type File.  Added file argument to MissingPages.