-- Copyright (C) 1983, 1986  by Xerox Corporation. All rights reserved. -- File: PerfPrivate.mesa, Edited by-- AXD    	18-Aug-83 13:44:48-- MEW		 1-Jul-86 13:19:36DIRECTORY  CPSwapDefs USING [BBArray],  PrincOps USING [BytePC, LocalFrameHandle],  PrincOpsExtras2 USING [GFTHandle, nullGFH, ControlLink],  PSB USING [PsbHandle];PerfPrivate: DEFINITIONS =  BEGIN  Number: TYPE = LONG CARDINAL;  NodeID: TYPE = RECORD [pc: PrincOps.BytePC, gfi: PrincOpsExtras2.GFTHandle];  NullID: NodeID = [[0], PrincOpsExtras2.nullGFH];  CallClass: TYPE = {perf, normal};  LegAddClass: TYPE = {none, successor};  LegTrackClass: TYPE = {none, successor, all};  VersionID: CARDINAL = 08173;  PerfControlRecord: TYPE = MACHINE DEPENDENT RECORD [    measuringNow(0): BOOLEAN,    nodeTable(1): NodeTable,    legTable(3): LegTable,    process(5): PSB.PsbHandle,    lastCall(6): CallClass,    trackLeg(7): LegTrackClass,    addLeg(8): LegAddClass,    totalBreaks(9): LONG CARDINAL,    perfTime(11): LONG CARDINAL,    totalTime(13): LONG CARDINAL,    lastID(15): NodeIndex,    nextLeg(16): CARDINAL,    nextNode(17): CARDINAL,    histFree(18): HistIndex,    histBase(19): HistBase,    self(21): PrincOps.LocalFrameHandle,    newSession(22): BOOLEAN,    version(23): CARDINAL,    pulseConversion(24): LONG CARDINAL ¬ NULL,    breakBlocks(26), saveBreakBlocks(28): LONG POINTER TO CPSwapDefs.BBArray,    saveBreakHandler(30): PrincOpsExtras2.ControlLink];  MaxNodes: CARDINAL = 20;  -- maximum number of nodes tracked  NodeIndex: TYPE = CARDINAL [0..MaxNodes + 1];  NullNode: NodeIndex = MaxNodes;  AllNodes: NodeIndex = MaxNodes + 1;  HighBits: CARDINAL = 77B;  SubNodeIndex: TYPE = NodeIndex [0..MaxNodes);  Node: TYPE = RECORD [    id: NodeID,    hits: LONG CARDINAL,    hist: HistIndex];  NodeTab: TYPE = ARRAY SubNodeIndex OF Node;  NodeTable: TYPE = LONG POINTER TO NodeTab;   MaxLegs: CARDINAL = 40;  -- maximum number of legs tracked  NoLegSlot: LegIndex = MaxLegs + 1;  LegIndex: TYPE = CARDINAL [0..MaxLegs + 1];  SubLegIndex: TYPE = LegIndex [0..MaxLegs);  Leg: TYPE = RECORD [    start: LONG CARDINAL,    lock: BOOLEAN,    from, to: NodeIndex,    sum: LONG CARDINAL,    longest, shortest: LONG CARDINAL,    owner: UNSPECIFIED,    hits: LONG CARDINAL,    hist: HistIndex,    someIgnored: BOOLEAN];  LegTab: TYPE = ARRAY SubLegIndex OF Leg;  LegTable: TYPE = LONG POINTER TO LegTab;  HistClass: TYPE = {linear, log};  HistType: TYPE = {node, leg};  Histogram: TYPE = RECORD [    count, scale: CARDINAL,    sum: Number,    type: HistType,    class: HistClass,    nBuckets: [0..377B],    overflow: CARDINAL,    underflow: CARDINAL,    base: Number,    buckets: ARRAY [0..0) OF CARDINAL];  HistBase: TYPE = LONG BASE POINTER;  HistIndex: TYPE = HistBase RELATIVE ORDERED POINTER [0..HistSpaceSize) TO    Histogram;  NullHist: HistIndex = LAST[HistIndex];  HistSpaceSize: CARDINAL = 256;  PCR: TYPE = LONG POINTER TO PerfControlRecord;  ReadWrite: TYPE = {read, write};  END.