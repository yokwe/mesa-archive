-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- BackingStore.mesa     22-Feb-83 11:22:22 by WDK    -- Data of the types defined below are obtained from some backing storage implementation and passed to VM when mapping virtual memory.-- This is a Friends interface.DIRECTORY  Environment USING [PageCount, PageNumber, PageOffset];BackingStore: DEFINITIONS =  BEGIN  Run: TYPE = RECORD [count: Environment.PageCount, data: Data];  Data: TYPE = RECORD [    data: ARRAY [0..7) OF UNSPECIFIED];  -- Describes backing storage of a run of virtual memory pages.  -- (Multiple coexisting implementations of this interface preclude the use of  --  an opaque type.)  TransferProc: TYPE = PROCEDURE [    transData: LONG POINTER TO --READONLY-- TransferData]  -- (AR 12396)    RETURNS [result: Result];  TransferData: TYPE = RECORD [    operation: Operation,    -- The data to be transferred:    pageBuffer: Environment.PageNumber, countBuffer: Environment.PageCount,    -- The backing storage data associated with the interval being transferred,    -- along with the normal address of the first page corresponding to that data.    pageData: Environment.PageNumber, data: Data,    -- The offset of the normal location of the data to be transferred from     -- pageData (The normal address of the first page of the buffer is    -- pageData+offsetFromData.):    offsetFromData: Environment.PageOffset,    process: PROCESS];  -- on whose behalf transfer is being done.  Operation: TYPE = {read, write};  Result: TYPE = RECORD [    vp: SELECT type: * FROM      done => [],      error => [        pageInError: Environment.PageNumber],	-- where pageInError IN [pageBuffer..pageBuffer+countBuffer).      ENDCASE];    END.LOG11-Jun-82 16:19:18	WDK       Created file. 8-Jul-82  8:49:14	WDK    	TEMP changed Data from 7 to 10 words for testing.16-Jul-82 17:03:55	WDK    	TransferProc now takes pageData + data, not a Run. Eliminated VMTransferData. Result acquires error[pageInError].16-Aug-82 16:12:23	WDK       Twiddles.19-Aug-82 10:06:27	AWL       	Changed Data from 10 to 7 words for real Pilot 9.0.9-Sep-82  8:59:35	WDK        TransferProc arg becomes READONLY.27-Oct-82 16:41:00	WDK        Back out of READONLY until AR 12396 fixed.22-Feb-83 11:22:29	WDK        Add process to TransferData.