-- Copyright (C) 1981, 1986  by Xerox Corporation. All rights reserved. -- DebuggerSwap.mesa      5-Aug-86 17:44:47 by ET    -- This interface describes the location of the debugger-- and its microcode and Germ (if the debugger runs with ones-- different than that of the current boot file).DIRECTORY  Boot USING [Location],  CPSwapDefs USING [ExternalStateVector];DebuggerSwap: DEFINITIONS =  BEGIN  Parameters: TYPE = RECORD [    -- used each swap to debugger:    locDebuggee: Boot.Location,  -- where to outLoad.    pMicrocodeCopy, pGermCopy: LONG POINTER,  -- swap if non nil.    nGerm: CARDINAL,  -- number of words in Germ.    locDebugger: Boot.Location,  -- where to inLoad from.    -- used during initialization:    pLocMicrocode, pLocGerm: POINTER TO Boot.Location,    nMicrocode: CARDINAL];  -- number of words  parameters: Parameters;  canSwap: BOOLEAN;  -- TRUE iff parameters describes the location  -- of an inloadable debugger (i.e. on local disk).    SetDebuggerFielder: PROCEDURE [newDebuggerFielder: POINTER TO AwaitDebuggerRequest]    RETURNS [previousDebuggerFielder: POINTER TO AwaitDebuggerRequest];  -- Pilot goes to the debugger via an XFER to an AwaitDebuggerRequest.  Pilot initializes the default one to actually take you to the debugger.  -- Calling this procedure sets Pilot so that future attempts to reach the the debugger will XFER to newDebuggerFielder.  The previous fielder is returned; thus the client can restore it later, or even filter calls to the debugger.  -- The frame pending on a AwaitDebuggerRequest must not cause any faults.  That is, it may not call any procedures unless they are INLINEs or coroutines, and its code, global frame, entry vector, catch code, and data must be pinned.  In other words, you almost can't do anything!  -- When the frame pending on newDebuggerFielder­ is resumed via the XFER to the PORT, interrupts are disabled.    AwaitDebuggerRequest: TYPE = PORT RETURNS [LONG POINTER TO CPSwapDefs.ExternalStateVector];  -- For the current actual usage of an ExternalStateVector, please contact the Mesa Group.  END.LOGAugust 6, 1979  12:13 PM   PXM       Created file.August 27, 1979  5:40 PM   PXM       Add pSavedMap, dropped altoDebugger.September 18, 1979  5:44 PM   PXM       Move Location from BootChannel to Boot.April 17, 1980  10:43 AM   PXM       Delete definitions for CoPilot 0.4-Dec-81 16:11:30   WDK       Added SetDebuggerFielder. 5-Aug-86 17:44:55  ET        new princops change: AwaitDebuggerRequest RETURNS LONG POINTER vs POINTER.