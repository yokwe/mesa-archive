-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. -- Snapshot.mesa  29-Nov-82 10:27:01 by AWL      DIRECTORY  Environment USING [PageCount],  File USING [File, PageNumber],  System USING [defaultSwitches, Switches];Snapshot: DEFINITIONS =  BEGIN  Switches: TYPE = System.Switches;  defaultSwitches: Switches = System.defaultSwitches;  -- The files passed to OutLoad and InLoad must be bootable (see SpecialFile.MakeBootable)  OutLoad: PROCEDURE [file: File.File, firstPage: File.PageNumber]    RETURNS [inLoaded: BOOLEAN];  -- Saves machine state on file, then returns FALSE; later when machine state is inLoaded from file, returns TRUE.  InLoad: PROCEDURE [    pMicrocode, pGerm: LONG POINTER, countGerm: Environment.PageCount,    file: File.File, firstPage: File.PageNumber,    switches: Switches ¬ defaultSwitches];  -- Loads new microcode and germ (if pMicrocode~=NIL and pGerm~=NIL, respectively), puts switches in communication area, and restores machine state from file.  -- Note: if pMicrocode~=NIL, it must point to resident memory (e.g. use SpecialSpace.MakeResident).  -- Errors (e.g. wrong file type, MakeBootable not performed, or contents wrong) will result in crash and possibly an MP code.  END.  LOGAugust 9, 1979  8:51 AM		PXM       Create fileSeptember 18, 1979  4:30 PM	PXM       Add firstPage to InLoadJanuary 24, 1980  5:33 PM	PXM       Add switches to InLoad12-Aug-81 11:21:06		WDK       Switches now come from System. 8-Nov-81 19:07:37		AWL         Delete "firstPage: File.PageNumber" defaults - clients should think about   this explicitly.29-Nov-82 10:26:58		AWL         File.Capability => File.File