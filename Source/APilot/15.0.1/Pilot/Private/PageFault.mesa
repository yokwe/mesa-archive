-- Copyright (C) 1984  by Xerox Corporation. All rights reserved. -- VirtualMemory>PageFault.mesa    10-Jul-84 15:52:37 by KEK    -- This interface provides facilities for waiting for processes that page fault and restarting them.-- This is a private interface for use only within the VirtualMemory configuration.DIRECTORY  Environment USING [PageNumber],  VM USING [ReturnWait],  VMData USING [ProcessType];PageFault: DEFINITIONS =  BEGIN  ProcessType: TYPE = VMData.ProcessType;  anyHelperProcesses: READONLY BOOLEAN;  -- (Although this is monitor data, references to it are atomic.)  PageFaultProcessStarted: PROCEDURE[];  -- Called by each PageFaultProcess when it gets started.  RestartAndAwaitNext: PROCEDURE [    restart: --GENERIC-- PROCESS, reportRestart: ReportRestart,    returnWait: VM.ReturnWait]    RETURNS [      pageFaulted: Environment.PageNumber, processFaulted: --GENERIC-- PROCESS,      processType: ProcessType, selfDestruct: BOOLEAN];  -- First,  --    IF restart is not NIL and reportRestart = restart, then restarts "restart". restart MUST be page faulted.  --    ELSE IF restart is not NIL and reportRestart = reportAddressFault, then reports "restart" as an address fault for processing by higher level software. restart MUST be page faulted.  --    ELSE NULL.  -- Second,    --    SELECT returnWait FROM  --       return => Returns immediately (return values are garbage).  --       wait =>  --         IF we have too many page fault processes, returns selfDestruct = TRUE (other return values are garbage);  --         ELSE waits for a page fault to be available, then returns a faulting process, page, and proces type (and selfDestruct = FALSE).   ReportRestart: TYPE = {reportAddressFault, restart};  END.LOGMarch 1978               PXM       Created file.June 23, 1978  1:27 PM   PXM       Removed RestartQuantifier.June 24, 1978  3:00 PM   PXM       Interval, PageNumber moved to VM. 1-Sep-82 15:27:49   WDK       RestartAndAwaitNext replaces Await, Restart. Args changed from page to process. Added anyHelperProcesses, PageFaultProcessStarted.10-Jul-84 15:52:01   KEK       Make ProcessType be from VMData 