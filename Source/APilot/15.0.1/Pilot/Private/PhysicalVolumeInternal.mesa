-- Copyright (C) 1986  by Xerox Corporation. All rights reserved. -- PhysicalVolumeInternal.mesa    13-Oct-86 15:10:26 by RSV   DIRECTORY  DiskChannel USING [Drive, Handle, IOStatus],  Environment USING [PageNumber],  PhysicalVolume USING [ID, PageNumber],  PhysicalVolumeFormat USING [DuplicateHandle, Handle, PageNumber];PhysicalVolumeInternal: DEFINITIONS =  BEGIN  -- Private types  PVHandle: TYPE = PhysicalVolumeFormat.Handle;  DuplicatePVHandle: TYPE = PhysicalVolumeFormat.DuplicateHandle;  DriveData: TYPE = MONITORED RECORD [    drive: DiskChannel.Drive, pv: PVHandle, dupPV: DuplicatePVHandle,    duplicateRootPageNumber: PhysicalVolumeFormat.PageNumber,    dupRootPageNumValid: BOOLEAN];  DriveDataHandle: TYPE = LONG POINTER TO DriveData;  -- Private variables  dataTable: PUBLIC LONG POINTER TO ARRAY [0..0) OF DriveData;  numberOfDrives: CARDINAL;  -- Data Lost Table procedures  ClearDataLostPage: PROCEDURE [    pvID: PhysicalVolume.ID, dataLostPage: PhysicalVolume.PageNumber];  -- Private PhysicalVolumeImpl procedures  CompareDuplicateAndMainPVRootPages: PROCEDURE [    dup: DuplicatePVHandle, main: PVHandle] RETURNS [ok: BOOLEAN];  DriveFromIndex: PROCEDURE [index: CARDINAL] RETURNS [drive: DiskChannel.Drive];  GetDriveData: PROCEDURE [drive: DiskChannel.Drive] RETURNS [h: DriveDataHandle];  PhysicalRootPageCheck: PROCEDURE [pv: PVHandle, id: PhysicalVolume.ID]    RETURNS [ok: BOOLEAN];  PVIDFromDrive: PROCEDURE [drive: DiskChannel.Drive]     RETURNS [found: BOOLEAN, pvID: PhysicalVolume.ID];  ValidateDrive: PROCEDURE [drive: DiskChannel.Drive] RETURNS [found: BOOLEAN];  WritePVRootPage: PROCEDURE [    page: Environment.PageNumber, channel: DiskChannel.Handle]    RETURNS [status: DiskChannel.IOStatus];  WriteDuplicatePVRootPage: PROCEDURE [    page: Environment.PageNumber, channel: DiskChannel.Handle,    duplicateRootPage: PhysicalVolumeFormat.PageNumber]    RETURNS [status: DiskChannel.IOStatus];  -- Errors:  ErrorInternal: ERROR [error: ErrorType];  ErrorType: TYPE = {notInTable};  END.--LOG13-Oct-86 15:10:26  RSV  Created file16-Dec-87 12:28:39  RSV  Added things to split PhysicalVolumeImpl.