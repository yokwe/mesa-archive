-- Copyright (C) 1984, 1986  by Xerox Corporation. All rights reserved. -- SOSP83HeapNodePrinter.mesa    26-Jun-86 14:32:11 by RSV    DIRECTORY  DebugUsefulDefs,  Format,  SOSP83HeapInternal;HeapNodePrinter: PROGRAM  IMPORTS DebugUsefulDefs, Format =  BEGIN    PrintNode: PROCEDURE [h: DebugUsefulDefs.Handle] RETURNS [BOOLEAN] =    BEGIN    w: Format.StringProc _ DebugUsefulDefs.Text;    node: SOSP83HeapInternal.NodeHeader;    p: LONG POINTER TO SOSP83HeapInternal.NodePointer;    DebugUsefulDefs.ReadValue[h];    p _ DebugUsefulDefs.GetAddress[h].base;    IF p^ = NIL THEN RETURN[FALSE];    DebugUsefulDefs.LongCopyREAD[      from: p^, to: @node, nwords: SOSP83HeapInternal.NodeHeader.SIZE        ! DebugUsefulDefs.InvalidAddress => GOTO failed];    Format.Char[w, '(];    Format.LongOctal[w, p^];    w[")[length:"L];    Format.Decimal[w, node.length];    w[", left:"L];    IF node.left = NIL THEN w["NIL"L] ELSE {      Format.LongOctal[w, node.left]; Format.Char[w, '^]};    w[", right:"L];    IF node.right = NIL THEN w["NIL"L] ELSE {      Format.LongOctal[w, node.right]; Format.Char[w, '^]};    Format.Char[w, ']];    RETURN[TRUE];    EXITS failed => RETURN[FALSE];    END;    Init: PROCEDURE = {      DebugUsefulDefs.AddPrinter[      type: "LOOPHOLE[200000B,SOSP83HeapInternal$NodePointer]"L,      proc: PrintNode]};    Init[];    END...  LOG31-Jan-84  8:33:06 Johnsson Created file.26-Jun-86 14:35:42 RSV      Added log, changed names to SOSP83*