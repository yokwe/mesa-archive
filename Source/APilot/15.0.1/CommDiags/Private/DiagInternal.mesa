-- Copyright (C) 1983, 1984  by Xerox Corporation. All rights reserved. -- DiagInternal.mesa - last edited by: SMA 14-Mar-85 11:42:42DIRECTORY  Courier USING [Description, Handle, VersionRange],  Dialup USING [DialerType, Number],  CommOnlineDiagnostics USING [EchoDiagHandle, EchoEvent, EchoParams,    EchoResults, EtherStatsInfo, Histogram, ModemSignal, RS232CDiagHandle,     RS232CParams, RS232CTestMessage],  System USING [GreenwichMeanTime, NetworkAddress];DiagInternal: DEFINITIONS =  BEGIN  -- The internal def for remote online diagnostics.    -- TYPES    CourierCallProc: TYPE = PROC [cH: Courier.Handle];          DialupParams: TYPE = MACHINE DEPENDENT RECORD [    line(0): CARDINAL, phoneNum(1): LONG POINTER TO Dialup.Number,    dialerType(3): Dialup.DialerType];         EchoCounterResults: TYPE = MACHINE DEPENDENT RECORD [    pkts, bytes: LONG CARDINAL, time: System.GreenwichMeanTime];    EchoResultsParams: TYPE = MACHINE DEPENDENT RECORD [    stop(0): BOOLEAN, handle(1): CommOnlineDiagnostics.EchoDiagHandle];      EchoResults: TYPE = MACHINE DEPENDENT RECORD [    totals: CommOnlineDiagnostics.EchoResults, hist: CommOnlineDiagnostics.Histogram];      EchoStartParams: TYPE = MACHINE DEPENDENT RECORD [    target(0): System.NetworkAddress, callback(6): BOOLEAN,    parms(7): CommOnlineDiagnostics.EchoParams];     EtherStatsResults: TYPE = MACHINE DEPENDENT RECORD [    stats: CommOnlineDiagnostics.EtherStatsInfo, time: System.GreenwichMeanTime];    RS232CTestParams: TYPE = MACHINE DEPENDENT RECORD [    callSetLine(0), callModemChange(1), callWrite(2): BOOLEAN,    params(3): CommOnlineDiagnostics.RS232CParams];      RS232CResultsParams: TYPE = MACHINE DEPENDENT RECORD [    dH(0): CommOnlineDiagnostics.RS232CDiagHandle, stopIt(2): BOOLEAN];      SetLineParams: TYPE = MACHINE DEPENDENT RECORD [    lineNumber(0): CARDINAL, dH(1): CommOnlineDiagnostics.RS232CDiagHandle];      WriteMsgParams: TYPE = MACHINE DEPENDENT RECORD [    msg(0): CommOnlineDiagnostics.RS232CTestMessage,    dH(1): CommOnlineDiagnostics.RS232CDiagHandle];      ModemChangeParams: TYPE = MACHINE DEPENDENT RECORD [    modemSignal(0): CommOnlineDiagnostics.ModemSignal, state(1): BOOLEAN,    dH(2): CommOnlineDiagnostics.RS232CDiagHandle];      EventRepParams: TYPE = MACHINE DEPENDENT RECORD [    event(0): CommOnlineDiagnostics.EchoEvent,    dH(1): CommOnlineDiagnostics.EchoDiagHandle];          -- CONSTANTS    etherDiagErr: CARDINAL = 1;     -- Error from server - ether stats or echo.  rs232cDiagErr: CARDINAL = 2;    -- Error from server - RS232C  diagPgmNumber:  LONG CARDINAL = 50;  diagCallBackPgm: LONG CARDINAL = 51;  version: CARDINAL = 1;  versions: Courier.VersionRange = [low: version, high: version];    -- Procedure numbers for <CommOnlineDiagnostics> procs.  dialupProc: CARDINAL = 1;             -- DialupTest  etherStatsProc: CARDINAL = 2;         -- GetEthernetStats  echoCountersProc: CARDINAL = 3;       -- GetEchoCounters  startEchoProc: CARDINAL = 4;          -- StartEchoUser  getEchoResultsProc: CARDINAL = 5;     -- GetEchoResults  rs232cLoopbackProc: CARDINAL = 6;     -- StartRS232CTest  getRS232CResultsProc: CARDINAL = 7;   -- GetRS232CResults    -- Procedure numbers for "call back" procs.  eventReporterNum: CARDINAL = 8;       -- used in StartEchoUser.  setDiagLineNum: CARDINAL = 9;         -- used in StartRS232CTest.  writeRS232CMsgNum: CARDINAL = 10;     -- used in StartRS232CTest.  modemChangeNum: CARDINAL = 11;        -- used in StartRS232CTest.         -- Description routines    -- Describe the test parameters.  DescribeDialup: Courier.Description;  DescribeEchoCounters: Courier.Description;  DescribeStartEchoParams: Courier.Description;  DescribeEchoResultsParams: Courier.Description;  DescribeRS232CParams: Courier.Description;  DescribeRS232CResultsParams: Courier.Description;   -- Describe the test results.  DescribeDialupOutcome: Courier.Description;  DescribeEchoResults: Courier.Description;  DescribeEtherStats: Courier.Description;  DescribeEtherStatsResults: Courier.Description;  DescribeCardinal: Courier.Description;  DescribeBoolean: Courier.Description;  DescribeLoopbackHandle: Courier.Description;  DescribeEchoHandle: Courier.Description;  DescribeRS232CResults: Courier.Description;    --Describe parameters for call backs.  DescribeSetLineParams: Courier.Description;  DescribeWriteMsgParams: Courier.Description;  DescribeModemChangeParams: Courier.Description;  DescribeEventRepParams: Courier.Description;    -- PROCEDURES    MakeCall: PROC [callProc: DiagInternal.CourierCallProc, cH: Courier.Handle];          END.  LOG30-Jun-83 16:39:05 SMA  Created file.21-Oct-83  9:02:08 SMA  Use new interfaces.28-Jan-85 10:32:39 SMA  Changes for multiport board & Mesa 12.0.