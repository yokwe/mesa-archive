;MoonPPO.Def	- equates for Parallel Port Option Boot Diagnostics;created by: JMA 14-Jul-86 13:32:31 ;;last edited by:;	JMA	17-Sep-87 10:36:42	:Added SmartLoopback & UnknowOption error;	JMA	15-Sep-86 23:06:11	:;	JMA	 8-Apr-87 17:46:19	:removed Inca scanner softReset Test;	JMA	20-Apr-87 11:56:57	:updated;	AXA	19-Dec-88 10:38:24	:Added XP-11 (Red Fox) Printer Code;---------- DMA1 and  Interrupt Controller addresses and valuesDMA1SrcPtrLo	EQU	0FFD0H		;DMA1SrcPtrHi	EQU	0FFD2H		;DMA1DstPtrLo	EQU	0FFD4H		;DMA1DstPtrHi	EQU	0FFD6H		;DMA1TransferCnt	EQU	0FFD8H		;Transfer Count RegrDMA1CntrlWrdReg EQU	0FFDAH		;Control Word RegrDMAWordXferOut	EQU	017A7HDMAByteXferOut	EQU	017A6HDMAWordXferIn	EQU	0A347HDMAByteXferIn	EQU	0A346HDMAStopBit	EQU	0FFFDH		;stop bit enableDestIsMem	EQU	8000H		;bit15 of the control word is dest bitWordMode	EQU	01H		;RESETCtrlReg	EQU	00C0Hi186DMAMaskReg	EQU	0FF28Hi186EOIReg	EQU	0FF22Hi186InServReg	EQU	0FF2CHUnMaskDMA1	EQU	0035Hi186EOIdma1	EQU	0003HDMAEnable	EQU	0BFFFHEXPIntEnable	EQU	0DFBFHPPOIntrpLine	EQU	02H		;Intrp line assigned to PP OptionPPOIntEnable	EQU	NOT PPOIntrpLine;i8259 value to enable, active lowSetEXPslot	EQU	0400Hi8259Poll	EQU	00CH		;Put option slave in Polling mode;;---------- PPO Register addressesConfigReg	EQU	4000H		;Read-Write Byte RegrCommandReg	EQU	4002H		;Read-Write Byte RegrPortStatReg	EQU	4004H		;Read Only Word RegrPPOStatReg	EQU	4006H		;Read Only Byte RegrIntrpSelReg	EQU	4008H		;Read Only Byte RegrDataReg		EQU	400AH		;Write Only Word RegrMaintReg	EQU	400CH		;Read Only Byte Regr;---------- PPO Register Bit valuesRstPPONClrIntrp	EQU	00H		;reset board and clear intrpFaultBit	EQU	01H		;BusyBit		EQU	04H		;PPOGrndBit	EQU	8000H		;Port1SelectBit	EQU	8000H		;PPOClrIntrpMsk	EQU	0DH		;PPOAlwaysOne	EQU	0800H		;always one on the PPOPPOAlwaysZero	EQU	1000H		;always zero on the PPOPPODeviceReset	EQU	80H		;Device Reset bitDfaultCmdVal	EQU	03H	        ;NoDeviceReset-NotEnforce-OptionOff-					;  NotClrIntrp-NotOptionResetPPOGo		EQU	0BH		;Enable OptionLPOPromErr	EQU	4046H		;NonMaint-IntrpEnable-DirectOut-Scnr causes a PROMErr on LPOPPOPromErr	EQU	0166H		;MaintMode-Prntr-DirectIn causes a PROMErr on PPOLPOMaintenance	EQU	0026H		;6-BusyforEOX-Maintmode-NonInt-NonDMAPPOMaintenance0 EQU     0C026H		;6-BusyforEOX-Maintmode-NonInt-NonDMA-DirectOut-Data-Scan-P1PPOMaintenance	EQU	0C126H		;6-BusyforEOX-Maintmode-NonInt-NonDMA-DirectIn-Data-Scan-P1DfaultCnfgVal	EQU     0046H		;6-BusyforEOX-NonMaintmode-Int-NonDMA 					;   DirectionOut-Data-WordMode-Printer-Port0PPOConfigP0	EQU	00C6H		;6-BusyforEOX-NonMaintmode-Int-DMAPPOConfigP1	EQU	PPOConfigP0 OR Port1SelectBit					;select port 1					P1CntrlInCnfg	EQU	0C7D6H		;P1-ByteMode-Control-In-DMA-Int-NonMaint-6P1CntrlOutCnfg	EQU	0C2D6H		;P1-Control-Out-DMA-Int-NonMaint-6			      ;--------------------- TEST TYPES CODE  --------------------------------------SmartLoopback	EQU	00H		;check-EEPROM-and-run-appropriate-loopbackMaintLoopBack	EQU	01H		;for LPO boards onlyDMAWordsOutP0	EQU	02H		;DMABytesOutP0	EQU	03H		;LPOFaultIntrp	EQU	04H		;DMAWordsOutP1	EQU	05H		;for PPO (SPO) boards onlyDMABytesOutP1	EQU	06H		;HardResetP0	EQU	07H		;DataRLoopback	EQU	08H		;PPOFaultIntrp	EQU	09H		;HardResetP1	EQU	0AH		;InitWSComm	EQU	0BH		;unique to Inca Scanner;--------------------- MAINTENANCE PANEL ERROR CODES -------------------------NoDMAIntrp	EQU	01H		;never received DMA intrpNoExpansionIntrp EQU	02H		;never received Expansion IntrpDeviceFault	EQU	03H		;FAULT signal detectedLoopBackErrMR	EQU	04H		;failed word loopback on Maint Regr LoopBackErrDR	EQU	05H		;failed word loopback on Data Regr DeviceNotReady	EQU	06H		;BUSY signal detectedIncompleteXfer	EQU	07H		;not all data transferredNoSoftResetAck	EQU	08H		;no ack from device after soft resetInitCommFailed	EQU	09H		;communication test with device failedPortEchoFailed	EQU	0AH		;port regr echo bits failedUnknownOption	EQU	0BH		;EEPROM not set for LP or SP optionPPONotInstalled	EQU	0FH		;Parallel Port Option not installed;------------------------  PPO TCB STRUC  ---------------------------------PPOTCBblock	STRUC			;PPO Test Control Block PPOCSControl	DB	00H PPOTestControl DB	00H PPOPageParity	DB	00H		; PPOBankParity	DB	00H		; ErrorLoop	DB	00H		; TESType	DB	00H WORDPattern	DW	04142H		;ASCII of AB NUMBERofPass	DB	00H LASTpass	DB	00H PORTstatus	DW	0000H PPOstatus	DW	0000H PPOFault	DB	00H		;Information on PPO fault PPOSpareByte	DB	00H		 CnfigRegVal	DW	0000HPPOTCBblock	ENDS;------------------------  VALID OPTION TYPE  ---------------------------------LPOption	EQU	08HSPOption	EQU	11H;------------------------ XP-11 (Red Fox) Printer Code ------------------------;CommandSolicitStatus	EQU	20HSolicitRegister	EQU	21HSloicitUpperTray	EQU	22HSolicitLowTray	EQU	23HFeedUpper	EQU	40HFeedLower	EQU	41HGoToSleep	EQU	50HWakeUp		EQU	51H;StatusUpperEmpty	EQU	36HLowerEmpty	EQU	37HManualEmpty	EQU	38HNoCassetteUpper	EQU	39HNoCassetLower	EQU	3AHUpperCassetteIn	EQU	3BHLowerCassetteIn	EQU	3CHManualPaperIn	EQU	3DHWarmUp		EQU	40HStandBy		EQU	41HDrumRunDown	EQU	42HDeveRunDown	EQU	43HPaperAtOutPutTray	EQU	46HGoingOffline	EQU	48HOffline		EQU	49HOnline		EQU	4AHSleeping	EQU	4BHRevisionLevelPrefix	EQU	4FHError		EQU	50HControlerError	EQU	51HIllegalCharacter	EQU	55HIllegalSequence	EQU	57HNoStatus	EQU	58HInterLockOpen	EQU	5AHNoDrumCartridge	EQU	5BHNoDeveCartridghe	EQU	5CHPaperJam	EQU	5DHPaperNotReady	EQU	5EHPaperB5		EQU	60HPaperLetter	EQU	61HPaperA4		EQU	62HPaperLegal	EQU	63HPaperB4		EQU	64HManualTrayPaper	EQU	65H