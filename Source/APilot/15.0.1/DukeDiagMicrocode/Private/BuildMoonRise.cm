-- BuildMoonRise.cm-- created by HEM				17-Dec-87 16:06:15-- Copyright (C)  1987  by Xerox Corporation. All rights reserved. Boot Diagnostic Building Recipe1) Assemble microcode files, if they have changed.  Run @moonrise1 from the XDE exec.2) Run MoonDayBreakftToasm.bcd on all just created .ft files.  This command converts the microcode into assembly code to be bound in with other IOP code.3) Convert Moon*.asm, MoonLink.def, and MoonSys.def to PC format.  Put the converted files on the PCFormat directory.  In this example, sourcefiles are on <>Moon>DayBreak.makepc <>pcformat/d <>moon>DayBreak/s moon*.asm moonlink.def moonsys.def4) Run @MoonToMon on all files in the pcformat directory.  PC worlds can only handle 8 character names, but some boot diagnostics file names have 9 characters (left over from VAX days).5) Get converted Mon*.asm, MoonLink.def, and MoonSys.def onto the PC.  For an IBM-PC, MS-DOS scripts are constructed using the XFILE package.  For PCE, the WS Icon hack is used.IBM-PC:Run XFILE to fetch *.asm and *.def files.  MoonBAasm.bat assembles all files.  RunAsm.bat is useful for assembling if only a few files are to be assembled.  MoonBLoc.bat creates the Bermuda objects.  MoonDgCp.bat builds MoonDvCp.loc.  MoonLoc.bat creates the objects used to build MoonRise.db.PCE:Setup -Get WS Icon from [ALT:OSBU North:Xerox]<BWSHacks>4.2>Tools, copy it into the loader, and run it.  Get the newly-created icon from the desktop icons and copy one to the desktop.  Alter the props to point to the DLion MFileServer and <CoPilot>PCFormat directory.Running -Open the WS Icon, select all applicable .asm and .def files, and copy them to the Emulated Rigid Disk.  If only a few files are being transfered, they can also be copied to a virtual floppy.  Open PCE.  DyTxtAsm.bat converts the .txt extension that ViewPoint stuck on transfered files into a .asm extension.  MnTxtAsm.bat and MnTxtDef.bat are handy batch files for getting rid of the .txt extension when only a few files are being assembled.  Run MoonBAasm.bat, MoonDgCp.bat, MoonBLoc.bat, and MoonLoc.bat as above.6)Transfer results back to the the DLion.¬IBM-PC:Run MoonX.bat to transfer files.  Timestamps are NOT preserved.PCE:Close PCE.  Copy object files from the Emulated Rigid Disk back into a closed icon created by WS Icon.  For just a few files, copy the files into a virtual floppy, move the floppy onto the desktop, and copy object files out of the virtual floppy.  Timestamps are preserved.7) In the XDE exec, use @MonToMoon to convert files back to the original names.8) To build MoonRise.db, run @MoonDB using the .locs created by MoonLoc.bat.