-- ProcessorIOFaceDove.mesa  Last Revised by MXT 29-Oct-87 10:45:26--  this module is the Mesa equivalent of parts of IORmesa.asm and MesaDefs.asmDIRECTORY  DoveInputOutput USING [ByteSwappedLong, ByteSwappedWord, IOPCondition, NotifyMask, sizeTaskContextBlock, TaskContextBlock],  HostNumbers USING [ProcessorID];ProcessorIOFaceDove: DEFINITIONS =  BEGIN  OPEN DoveInputOutput;  -- TYPE definitions  Command: TYPE = MACHINE DEPENDENT {noCommand (0), readGMT (1), writeGMT (2),    readHostID (3), readVMMapDesc (4), readRealMemDesc (5), readDisplayDesc (6), readKeyboardType (7), readPCType (8), bootButton (9), readNumbCSBanks (10), readMachineType(11), (255)};  FCBPtr: TYPE = LONG POINTER TO FCB;  FCB: TYPE = MACHINE DEPENDENT RECORD  [ notifiersLockMask (0): NotifyMask,    upNotifyBits (1): WORD,    downNotifyBits (2): ARRAY [0..wordsForDownNotify) OF WORD,    --scratchForBandBlt(2+wordsForDownNotify): ARRAY [0..wordsForScratch) OF WORD,     mesaClientCondition (2+wordsForDownNotify): IOPCondition,    mesaClientMask (3+wordsForDownNotify): WORD,    timeOfDayIsValid (4+wordsForDownNotify:0..7): BOOLEAN,    command (4+wordsForDownNotify:8..15): Command,    data (5+wordsForDownNotify): MesaProcessorData,    processorTCB (5+wordsForDownNotify+dataSize): TaskContextBlock,    clientTCB (5+wordsForDownNotify+dataSize+tcbSize): TaskContextBlock ];  MesaProcessorData: TYPE = MACHINE DEPENDENT RECORD  [ data (0): SELECT OVERLAID Command FROM      readGMT, writeGMT =>      [ byteSwappedGMT (0): ByteSwappedLong ],      readHostID =>      [ hostID (0): HostNumbers.ProcessorID ],      readVMMapDesc =>      [ firstMapPage (0): ByteSwappedWord,        countMapPages (1): ByteSwappedWord ],      readRealMemDesc =>      [ firstRealPageInVMM (0): ByteSwappedWord,        lastRealPageInVMM (1): ByteSwappedWord,	countRealPagesInVMM (2): ByteSwappedWord ],      readDisplayDesc =>      [ displayType (0): ByteSwappedWord,        firstDisplayBankPage (1): ByteSwappedWord,	countDisplayBankPages (2): ByteSwappedWord ],      readKeyboardType =>      [ byteSwappedKeyboardType (0): ByteSwappedWord ],      readPCType =>      [ byteSwappedPCType (0): ByteSwappedWord ],      readNumbCSBanks =>      [ byteSwappedCSBanks (0): ByteSwappedWord ],      readMachineType =>      [ byteSwappedMachineType (0): ByteSwappedWord],      ENDCASE ];  -- constants  dataSize: CARDINAL = 3;  tcbSize: CARDINAL = sizeTaskContextBlock;  wordsForDownNotify: CARDINAL = 2;  wordsForScratch: CARDINAL = 36;  -- size check  compileCheckMesaProcessorDataSize: BOOLEAN[TRUE..TRUE] =    (SIZE [MesaProcessorData] <= dataSize);  END.  -- of ProcessorIOFaceDove  LOG  17-Oct-84 -- JPM -- Created.  14-Nov-84 -- JPM -- Revised for new eeProm configuration.  18-Feb-85 -- JPM -- Added eePromKeyboard.  29-Jul-85 -- JPM -- Opie redesign conversion (also removed EEProm indexes and added MesaProcessorData).  13-Aug-85 -- JPM -- Added readPCType to Command.  21-Nov-86 -- TxH -- Added scratch pad space for Daisy BandBlt microcode.  13-Jan-87 -- JWF -- Added readNumbCSBanks to Command.  17-Mar-87 -- RDH -- Commented out scratch pad space for Daisy BandBlt microcode.  It is now in IORuCode.asm which needs no mesa version.  29-Oct-87 -- MXT -- Added readMachieType command to distinguish daybreak vs dahlia. 