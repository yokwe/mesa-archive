-- ParallelPort.mesa; last edited:  --       5-Mar-86 16:51:23  By: CharlieLevy-- Copyright (C) Xerox Corporation 1985, 1986. All rights reserved.DIRECTORY  Environment, ParallelPortFace;ParallelPort: DEFINITIONS =  BEGIN    ParallelPortChannel: PROGRAM;    --NOTE: 3 kinds of statuses, ChannelStatus, TransferStatus and DeviceStatus  -- Procedures  Create: PROCEDURE [direction: Direction, format: Format]     RETURNS [channel: ChannelHandle, channelStatus: ChannelStatus];  Delete: PROCEDURE [channel: ChannelHandle];    -- ALL procedures should return upon Delete  --no Quiesce operation    GetStatus: PROCEDURE [channel: ChannelHandle] RETURNS [deviceStatus: DeviceStatus];  StatusWait: PROCEDURE [channel: ChannelHandle, deviceStatus: DeviceStatus]     RETURNS [newDeviceStatus: DeviceStatus];  PutBlock: PROCEDURE [channel: ChannelHandle, block: Environment.Block]     RETURNS [transferStatus: TransferStatus];  GetBlock: PROCEDURE [channel: ChannelHandle, block: Environment.Block]     RETURNS [transferStatus: TransferStatus];       Test: PROCEDURE [channel: ChannelHandle] RETURNS [hardwareReliabilty: HardwareReliability];    -- SIGNALs and ERRORs  -- these are only for client programming errors  -- InvalidChannelHandle, OverlapNotPermitted, NotImplemented: ERROR;  -- Constants  nullChannelHandle: ChannelHandle = NIL;  -- Type Definitions    Format: TYPE = {centronicsWithBusy, centronicsWithAck, greenSheet, dataProducts, other1, other2};  --for Dash1, only centronicsWithBusy implemented  Direction: TYPE = {output, input};  --for Dash1, only output implemented  ChannelHandle: TYPE = PRIVATE LONG POINTER TO UNSPECIFIED;  HardwareReliability: TYPE = {perfect, flaky, broken, other1, other2};    ChannelStatus: TYPE = {ok, channelAlreadyCreated, notRegistered, noParallelHardware, notRegisteredAndNoParallelHardware, noDeviceAttached, other1, other2};  --for Dash1, "notRegisteredAndNoParallelHardware, noDeviceAttached, other1, other2" are not used   TransferStatus: TYPE = {    success, parityError, dataLost, aborted, abortedByDelete};  DeviceStatus: TYPE = ParallelPortFace.DeviceStatusRec;  END.  -- ParallelPort  LOG29-Apr-85   CharlieLevy   Created file 3-Sep-85 CharlieLevy  remioved device specific proc and device specific elements in status  8-Oct-85 Charlie and Jonathan added Test   8-Oct-85 CL got rid of most signals  5-Mar-86 CL added more types to ChannelStatus, added comments