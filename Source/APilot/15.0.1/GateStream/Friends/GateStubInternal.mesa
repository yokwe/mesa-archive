-- Copyright (C) 1984, 1985  by Xerox Corporation. All rights reserved. -- File: GateStubInternal.mesa - last edit:-- Danielson.PA         5-Jan-84 10:40:39DIRECTORY   Auth USING [Credentials, Verifier],  CFDStream USING [Handle, Object],  Courier USING [Handle, SystemElement],  Environment USING [Block],  GateStream USING [CallBackType, CompletionProcedure, ForeignDevice, Resource,     SessionParameterHandle, TransportObject, WaitTime],  Stream USING [CompletionCode, Handle, Object, SubSequenceType],  System USING [NetworkAddress];GateStubInternal: DEFINITIONS =  BEGIN    -- Errors    TryCourier: ERROR;    -- Procedures    RegisterDispatcher: PROCEDURE [handle: ProcedureHandle];  NewStreamInstance: PROCEDURE [cfd: CFDStream.Handle,    device:GateStream.ForeignDevice] RETURNS [instance: StreamInstanceHandle];   -- GreeterCreate is used by the Greeter to create GateStreams.    GreeterCreate: PROCEDURE [systemElement: System.NetworkAddress,    sessionParameterHandle: GateStream.SessionParameterHandle,    transport: LONG DESCRIPTOR FOR ARRAY OF GateStream.TransportObject,    createTimeout: GateStream.WaitTime, credentials:  Auth.Credentials,    verifier:  Auth.Verifier, getStream: GetStreamProcedure]    RETURNS [cfdStream: CFDStream.Handle];    -- Types   ProcedureHandle: TYPE = LONG POINTER TO ProcedureObject;    ProcedureObject: TYPE = RECORD [    create: PROCEDURE [systemElement: Courier.SystemElement,      sessionParameterHandle: GateStream.SessionParameterHandle,      transport: LONG DESCRIPTOR FOR ARRAY OF GateStream.TransportObject,      createTimeout: GateStream.WaitTime,      version: CARDINAL,      credentials:  Auth.Credentials,      verifier:  Auth.Verifier,       getStream: GetStreamProcedure] RETURNS [cfdStream: CFDStream.Handle],    reserve: PROCEDURE [transport: GateStream.TransportObject,      completionProcedure: GateStream.CompletionProcedure,      callBackType: GateStream.CallBackType,      credentials:  Auth.Credentials,      verifier:  Auth.Verifier]      RETURNS [resource: GateStream.Resource],    abortReserve: PROCEDURE [resource: GateStream.Resource],    useMediumForOISCP: PROCEDURE [transport: GateStream.TransportObject],    connectTwoStreams: PROCEDURE [cfd: CFDStream.Handle, sH: Stream.Handle]];  StreamInstanceHandle: TYPE = LONG POINTER TO StreamInstanceObject;  StreamInstanceObject: TYPE = RECORD [    streamObject: Stream.Object,    setWaitTime: PROCEDURE [putTime, getTime: GateStream.WaitTime],    cfdStream: CFDStream.Handle];    RemoteHandle: TYPE = LONG POINTER TO RemoteObject;  RemoteObject: TYPE = RECORD [    cfdObject: CFDStream.Object,    networkStream: Stream.Handle,    service: Courier.Handle,    remoteHandle: CFDStream.Handle,    block: Environment.Block,     why: Stream.CompletionCode,    sst, lastSST: Stream.SubSequenceType,    state: GetState,    process: PROCESS,    cleanup: BOOLEAN,    endOfTransactionOccurred: BOOLEAN];    GetStreamProcedure: TYPE = PROCEDURE RETURNS [sH: Stream.Handle];        GetState: TYPE = {doingGet, getComplete, cleanup, terminating};-- Programs for starting  GateStreamInstance: PROGRAM;   END.LOG 1-Jun-81 18:47:02  BRD  Modifications for GAP. 5-Aug-81 18:26:46  BRD  Remove RS232CManager.12-Oct-81 13:57:50  BRD  Added device status to Resource.12-Oct-81 13:57:50  BRD  Added lastSST to RemoteObject27-Nov-81 15:34:00  BRD  Make RemoteHandle a LONG POINTER17-Dec-81 16:26:54  BRD  Make StreamInstHandle long28-Jan-82 17:01:01  BRD  Save Courier.Handle in RemoteHandle18-Mar-82 18:30:54  BRD  Add timeout field to ResourceObject 6-Oct-82 16:02:16  MZA  Add lineType field to ResourceObject30-Sep-83 17:08:41  BRD  Added authentication and Klamath conversion 9-Dec-83 16:19:42  BRD  New Auth