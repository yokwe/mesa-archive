-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. -- Revised by Jay JXI     July 6, 1981  4:37 PM-- Owner: JXI   -- Description:--	Instrumentation to keep track of nodes' owners, optionally check for the correct caller on deallocation, and provide statistics through a debugger tool.  To be called only by ZoneMgrPack.  HeapCheckDefs: DEFINITIONS =  BEGIN  UnprotectNode: PROCEDURE [node: LONG POINTER, caller: PROGRAM];  -- This operation removes protection from a node.  After it is called, anybody may free 'node'.  However, UnprotectNode may only be called by the program that allocated 'node'.  SetCheckingOnFree: PROCEDURE [z: UNCOUNTED ZONE, signalviolations: BOOLEAN]    RETURNS [previous: BOOLEAN];  -- This procedure sets a zone-wide flag that determines whether or not a node may be freed by a program other than the one that allocated the node.  Individual nodes of a protected zone may have this protection removed by UnprotectNode.  The initial value of zones' CheckingOnFree flag is FALSE for systemZone, FALSE for zones created by the user via Heap.Create, and TRUE for predefined zones.  UnprotectMDSNode: PROCEDURE [node: POINTER, caller: PROGRAM];  -- The MDS counterpart of UnprotectNode.  SetCheckingOnMDSFree: PROCEDURE [z: MDSZone, signalviolations: BOOLEAN]    RETURNS [previous: BOOLEAN];  -- The MDS counterpart of SetCheckingOnFree.  SetOwner: PROC [node: LONG POINTER, owner: PROGRAM];  SetMDSOwner: PROC [node: POINTER, owner: PROGRAM];  GetOwner: PROC [node: LONG POINTER]    RETURNS [owner: PROGRAM, protected: BOOLEAN];  GetMDSOwner: PROC [node: POINTER] RETURNS [owner: PROGRAM, protected: BOOLEAN];  -- These procedures are for the benefit of old-style allocators that may still exist (e.g., NdPack).  Using these procedures, the allocators may hook themselves into the zone mgr owner checking machinery.    HeapCheckPack: PRIVATE PROGRAM;  END. Log   (date, person: action)May 26, 1981, Jay Israel: Created file by splitting off from ZoneMgrDefs.