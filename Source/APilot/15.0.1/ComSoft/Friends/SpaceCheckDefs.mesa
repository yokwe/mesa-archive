-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- SpaceCheckDefs.mesa; edited by:-- LNelson	July 28, 1980  1:49 PM-- FXH    	February 4, 1981  12:56 PM-- RXJ     	 1-Jul-83 15:00:44-- AWL      	 7-Apr-83  9:16:11DIRECTORY  Environment USING [wordsPerPage];SpaceCheckDefs: DEFINITIONS =  BEGIN  -- Handle and other Public Types:  Desc: TYPE = LONG POINTER TO AqDesc;  AqDesc: TYPE = RECORD [    descNext: Desc,    descPrev: Desc,    handle: LONG POINTER,    gfhCaller: PROGRAM,    cvSequence: CARDINAL,    szPages: SpaceSize,    bvScratch: BOOLEAN,    spaceType: SpaceType];  SpaceType: TYPE = MACHINE DEPENDENT{mds(0), vm(1), child(2)};  SpaceSize: TYPE = [0..8192);  PageRec: TYPE = LONG POINTER TO AqPageRec;  AqPageRec: TYPE = RECORD [    aqPageHeader: AqPageHeader, descArray: ARRAY [0..ctDescPerPage) OF AqDesc];  AqPageHeader: TYPE = RECORD [pageRecNext: PageRec];  --we don't use backward links cause we never destroy  ctDescPerPage: CARDINAL =    (Environment.wordsPerPage - SIZE[AqPageHeader])/SIZE[AqDesc];  -- GLOBAL DATA  GlobalRec: TYPE = RECORD [    cvSequenceGlobal: CARDINAL,  --like a time stamp    descFreeFirst: Desc,  --describing the Free chain of descriptors    pageRecFirst: PageRec,  --our own data pages    ctDescFree: CARDINAL,    descUsedFirst: Desc,  --describing the Used chain of descriptors    descUsedLast: Desc,    ctDescUsed: CARDINAL,    ctPage: ARRAY SpaceType OF CARDINAL,  --counts of various allocations    bvRecordChildren: BOOLEAN,    ctPageForChecker: CARDINAL];  -- Public Constants:  -- Operations:  UpdateSpaceOwner: PROC [sp: LONG POINTER, newGF: PROGRAM];  -- update SpaceCheckPack's notion of who owns the space.  Nop if space is not found.  Usful to Packs that cache spaces.  -- Signals and Errors:  ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----  ----  -- Private Structures and Interfaces  ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ---- ----  ----  -- Actual Object:  -- Private Types and Constants:  -- Private Interfaces:  END.  -- of SpaceCheckDefsLOG	(date - person - action)March 1, 1980 - CharlieLevy - CreatedJuly 28, 1980 - LNelson - Move descriptors to VM for Star 14.2February 4, 1981 - FXH     - add UpdateSpaceOwner, add USING clauses, exlplicit fields in machine dependent records 5-Apr-83 21:51:09 - RXJ      - Klamath: Space.Handle => LONG POINTER 1-Jul-83 14:58:58 - RXJ      - took out Machine Dependent.