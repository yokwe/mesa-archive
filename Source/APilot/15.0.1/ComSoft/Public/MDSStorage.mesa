-- MDSStorage.mesa  Last Edited by:-- AWL       on 21-Nov-82 16:18:17-- AWL       on  3-Nov-81 14:54:36-- BXM   on  9-Jul-81 16:15:26-- JGS     on June 30, 1980  5:05 PM-- PXK     on July 16, 1980  6:02 PM-- Copyright  Xerox Corporation 1979, 1980, 1981-- Copyright (C) Xerox Corporation 1982. All rights reserved.DIRECTORY  Environment USING [wordsPerPage];MDSStorage: DEFINITIONS =  BEGIN  ZoneTooSmall: ERROR [p: POINTER];  InvalidNode: ERROR [p: POINTER];  Node: PROCEDURE [nwords: CARDINAL] RETURNS [p: POINTER];  String: PROCEDURE [nchars: CARDINAL] RETURNS [s: STRING];  Pages: PROCEDURE [npages: CARDINAL] RETURNS [base: POINTER];  Words: PROCEDURE [nwords: CARDINAL] RETURNS [base: POINTER];  Free: PROCEDURE [p: POINTER];  FreeString: PROCEDURE [s: STRING];  FreePages, FreeWords: PROCEDURE [base: POINTER];  FreeNodeNil: PROCEDURE [p: POINTER] RETURNS [nil: POINTER] = INLINE    BEGIN Free[p]; RETURN[NIL] END;  FreeStringNil: PROCEDURE [s: STRING] RETURNS [nil: STRING] = INLINE    BEGIN Free[s]; RETURN[NIL] END;  FreePagesNil: PROCEDURE [base: POINTER] RETURNS [nil: POINTER] = INLINE    BEGIN FreePages[base]; RETURN[NIL] END;  Expand: PROCEDURE [pages: CARDINAL];  Prune: PROCEDURE RETURNS [BOOLEAN];  PagesForWords: PROCEDURE [nWords: CARDINAL] RETURNS [CARDINAL] = INLINE    BEGIN    RETURN[(nWords + Environment.wordsPerPage - 1)/Environment.wordsPerPage]    END;  CopyString: PROCEDURE [s: LONG STRING, longer: CARDINAL ¬ 0] RETURNS [newS: STRING];  ExpandString: PROCEDURE [s: POINTER TO STRING, longer: CARDINAL];  EmptyString: PROCEDURE [s: LONG STRING] RETURNS [BOOLEAN] = INLINE    BEGIN RETURN[s = NIL OR s.length = 0] END;  StringLength: PROCEDURE [s: LONG STRING] RETURNS [CARDINAL] = INLINE    BEGIN RETURN[IF s = NIL THEN 0 ELSE s.length] END;  AppendChar: PROCEDURE [p: POINTER TO STRING, c: CHARACTER];  AppendExtensionIfNeeded: PROCEDURE [to: POINTER TO STRING, extension: LONG STRING]    RETURNS [BOOLEAN];  AppendString: PROCEDURE [to: POINTER TO STRING, from: LONG STRING, extra: CARDINAL ¬ 0];  Replace: PROCEDURE [to: POINTER TO STRING, from: LONG STRING];  END.