-- Storage.mesa  Last Edited by-- AWL       on  3-Nov-81 14:52:58-- BXM   on  9-Jul-81 16:23:59-- JGS     on June 30, 1980  5:05 PM-- PXK     on July 16, 1980  6:02 PM-- RXJ      on  5-Dec-80  8:50:26-- LXR     on 10-Jul-81 12:07:38-- Copyright (C) Xerox Corporation 1982. All rights reserved.DIRECTORY  Environment USING [wordsPerPage];Storage: DEFINITIONS =  BEGIN  ZoneTooSmall: ERROR [p: LONG POINTER];  InvalidNode: ERROR [p: LONG POINTER];  Node: PROCEDURE [nwords: CARDINAL] RETURNS [p: LONG POINTER];  String: PROCEDURE [nchars: CARDINAL] RETURNS [s: LONG STRING];  Pages: PROCEDURE [npages: CARDINAL] RETURNS [base: LONG POINTER];  Words: PROCEDURE [nwords: CARDINAL] RETURNS [base: LONG POINTER];  Free: PROCEDURE [p: LONG POINTER];  FreeString: PROCEDURE [s: LONG STRING];  FreePages, FreeWords: PROCEDURE [base: LONG POINTER];  FreeNodeNil: PROCEDURE [p: LONG POINTER] RETURNS [LONG POINTER] = INLINE    BEGIN Free[p]; RETURN[NIL] END;  FreeStringNil: PROCEDURE [s: LONG STRING] RETURNS [LONG STRING] = INLINE    BEGIN Free[s]; RETURN[NIL] END;  FreePagesNil: PROCEDURE [base: LONG POINTER] RETURNS [LONG POINTER] = INLINE    BEGIN FreePages[base]; RETURN[NIL] END;  Expand: PROCEDURE [pages: CARDINAL];  Prune: PROCEDURE RETURNS [BOOLEAN];  CopyString: PROCEDURE [s: LONG STRING, longer: CARDINAL ¬ 0]    RETURNS [newS: LONG STRING];  ExpandString: PROCEDURE [s: LONG POINTER TO LONG STRING, longer: CARDINAL];  EmptyString: PROCEDURE [s: LONG STRING] RETURNS [BOOLEAN] = INLINE    BEGIN RETURN[s = NIL OR s.length = 0] END;  PagesForWords: PROCEDURE [nWords: CARDINAL] RETURNS [CARDINAL] = INLINE    BEGIN    RETURN[(nWords + Environment.wordsPerPage - 1)/Environment.wordsPerPage]    END;  StringLength: PROCEDURE [s: LONG STRING] RETURNS [CARDINAL] = INLINE    BEGIN RETURN[IF s = NIL THEN 0 ELSE s.length] END;  AppendChar: PROC [p: LONG POINTER TO LONG STRING, c: CHARACTER];  AppendExtensionIfNeeded: PROC [    to: LONG POINTER TO LONG STRING, extension: LONG STRING] RETURNS [BOOLEAN];  AppendString: PROC [    to: LONG POINTER TO LONG STRING, from: LONG STRING, extra: CARDINAL ¬ 0];  Replace: PROC [to: LONG POINTER TO LONG STRING, from: LONG STRING];  END.