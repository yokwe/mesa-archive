*start*05908 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate:  3 Oct 88 20:11:38 +0900 (Monday)Subject: Pilot 15.0a availableFrom: TokunagaTo: DukeImplementorscc: TokunagaReply-to: DukeImplementorsThe following sections are included in this mail message:		SUMMARY	CONTENTS	SOFTWARE LOCATION	INSTALLATION	RESTRICTIONS	KNOWN BUG	BOOTSERVER INFORMATIONSUMMARYThe 1st version of software to support the Duke project is available for client use.  The 15.0 release has the name "Oze" which is the one of the most famous name of National Park in Japan. Why "Oze"?  We inherit the former Pilot naming convention; "Rivers/National Parks in California", and change it a little bit; "Rivers/National Parks in Japan".This code is available from the integration directory [Pine:IWA:Fuji Xerox]<IPilot>, but will be archived to [Man:IWA:Fuji Xerox]<APilot> by October 3.This is the first officail update of 15.0, and we are naming this update as Pilot 15.0a. This update is based on Labelless Pilot.There is no AR database available for it.  It's comming soon. If you have any problems, please send message to "DukeImplementors:IWA:Fuji Xerox" with following form.Version: 15.0aSubject:  ???Name:  ?:Osbu north:Xerox| ?:IWA:Fuji XeroxCONTENTSThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.1.  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  2.  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.3. New rigid disk is supported.Toshiba MK 134FA (54MB) is now supported.4. New Machine type is added.Now, Duke is a new machine type.5. Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.6. larger WCS16K WCS is now supported.7. Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.8. RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too.9. Labelless Pilot and BasicHeads is available for Duke.SOFTWARE LOCATIONThe archive directory contains all sources and other software contributing to Hesperus with the exception of Mesa pieces.  Like formar release,  there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this directory is always the file for the latest update to Hesperus system test. This directory is not flat, but has a structure convenient for hte Pilot implementors (the same general structure as for the Pilot 14.0 release).  The archive directory is:	[Man:IWA:Fuji Xerox]<Apilot>14.0>			    <Apilot>14.0>DF>Bootfiles for Othello, Tajo on based on Pilot 15.0a will be comming out in [Banana:IWA:Fuji Xerox]<Hesperus>BootFiles>. Bootfile for BWS based on Pilot 15.0a will be coming out in  [TBD].Note:[Banana:IWA:Fuji Xerox]<Hesperus>BootFiles> is temporary location.       INSTALLATIONThe bootable stuffs of this update can run on Duke/Dahlia/DayBreak, because the trackbuffer function is not included.  If you want to run these stuffs on Dahlia/Daybreak, read the followings carefully.The first of all, cautions for SDD (Self Describing Disk)Current new othello doesn't have the function for storing "Disk-Type" to SDD page and new SCU isn't included in this update. The information in EEPROM is the only one for Disk-Type.  You should set the correct disk type in EEPROM, otherwise there is a possibility for occuring the unexpected errors.The SCU in Pilot 14.0 doesn't store the Disk-Type in EEPROM, but the one in Pilot 12.0 OR 12.2 will do.The second of all, the installation procedure for Duke/Dahlia/DayBreak.For Duke  (1) Set the Disk-Type in EEPROM by SCU of Pilot12.0|12.2(2) You have to re-format by new Othello based on Labelless-Pilot or convert to labelless-disk. Note: The current converter is at the level of Engineering-Hacks. We don't do severe test for it.  The converter is also in [ManTaro:IWA:Fuji Xerox]<AlphaPilot>15.0>(3) Fetch Initial microcode/Pilot microcode/Germ/BootFile from the location.    DiskInitialDove.db    MesaDuke12K.db    Duke.germ    OthelloDuke.boot    TajoDuke.bootNote: Pilot miocrocode includes all stuffs.For Daybreak/Dahlia,(1), (2) same as above.(3) Fetch initial microcode/Pilot microcode/Germ/BootFile from the location.    DiskInitialDove.db    MesaDuke8K.db    Duke.germ    OthelloDuke.boot    TajoDuke.bootNote: Pilot microcode does not include floating-point, trapezoid, and image-processing stuffs.  RESTRICTIONS(1) New Pilot requires the assist microcode included in this update.(2) MOP Code 277B is used for PilotKernel assist microcode(VMFind.mc).(3) The 2 variables, vmDatabaseFullSearches and vmDatabaseFastSearches, which are exported through ResMemPerf.mesa no longer have meaningful value.(4) RDC ROM code, however, includes the function of track-buffer, you can use it with the software of Pilot 14.0. (5) This update does not include all Offline Diagnostics and System Configuration Utility stuffs.  We have a plan to have them in the next update.(6) Othello will be replaced with the comming Installer based on Labelless-PilotKNOWN BUG(1) RDC ROM Code will return the bogus version number in DOB.BOOTSERVER INFORMATIONFor F3-5|F7-5 boot in IWA, the boot server prifile would look as so (thanks to Matsumoto-san, Tsutsumi-san and Ando-san)Key: Dove Microcode 25200004005 EtherInitialDove.dbKey: Dove Microcode 25200004015 MoonDuke.dbKey: Dove Microcode 25200004025 MesaDuke8K.dbKey: Dove Germ 25200004035 Duke.germKey: Dove Boot 25200004045 OthelloDuke.boot  *start*12967 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 10 Nov 88 09:40:14 +0900 (Thursday)Subject: Pilot 15.0b Update to Oze System TestFrom: TokunagaTo: DukeImplementorscc: TokunagaReply-to: Tokunagaeply-To: Tokunaga  Pilot 15.0, known as Oze, has been updated. This update, Pilot 15.0b, support the Duke/Dahlia/DayBreak hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.The bootfiles and cross reference file are not yet available but will be announced to Oze shortly.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0b as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0a, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0a of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0b differs from 15.0a. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE0. The Volume size is restriced up to 65503 disk pages. Otherwise you can't boot from, can't fetch the bootfiles into the volume.(If you use the Othello boot file based on Pilot 15.0a, your can fetch bootfiles into the volume bigger than 65503 disk pages, but you can't boot from the volume)1. New to this update is Track-Buffering, including  RDC ROM code, BasicHeadsDuke, and DiskChannelResident. OthelloDuke and TajoDuke is built with the BasicHeadsDuke. 2. The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance. 3. File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". See No.44. PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for testing track caching, and are subject to  -- change.  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;  trackCachingSwitch3: PilotSwitches.PilotDomainC = '\342;  trackCachingSwitch4: PilotSwitches.PilotDomainC = '\343;  trackCachingSwitch5: PilotSwitches.PilotDomainC = '\344;  -- These  switches mean the following:  -- \344  \343  \342  \341  \340      result  --                                   system defined number of track buffers  --                          X        1 track buffer  --                    X              2 track buffers  --                    X     X        3 track buffers  --              X                    4 track buffers  --              X           X        5 track buffers  --              X     X              6 track buffers  --              X     X     X        7 track buffers  --         X                         8 track buffers  --         X                X        9 track buffers  --         X          X              10 track buffers  --         X          X     X        11 track buffers  --         X    X                    12 track buffers  --         X    X           X        13 track buffers  --         X    X     X              14 track buffers  --         X    X     X     X        15 track buffers  --   X                               16 track buffers  --   X                      X        17 track buffers  --   X                X              18 track buffers  --   X                X     X        19 track buffers  --   X          X                    20 track buffers  --   X          X           X        21 track buffers  --   X          X     X              22 track buffers  --   X          X     X     X        23 track buffers  --   X     X                         24 track buffers  -- where "X" means that the switch is down or on.  If the number of buffers  -- specified is larger than the maximum number of buffers supported on that  -- machine, then the maximum supported number of buffers will be used.  If  -- either switch \346 is set, or the machine does not support track caching,  -- then these switches will be ignored, and track caching will not occur.5. LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.6. Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.7. FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.8. Formatting Command in OfflineDiagnosticsDuke should be run after the correct disk type is set by SCU and boot OfflineDiagnosticsDuke again. Otherwise,  there is a possibility that it will crash.  See OzeRestriction.docCONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.1.  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  2.  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.3. New rigid disk is supported.Toshiba MK 134FA (54MB) is now supported.4. New Machine type is added.Now, Duke is a new machine type.5. Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.6. larger WCS16K WCS is now supported.7. Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.8. RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too.9. Labelless Pilot and BasicHeads is available for Duke.ARs FIXED?????		RDC ROM code returns bogus version number.SS 13214	Recalibration in FloppyHeadDoveA.mesa by NopWHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, buyt has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0b on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0b (including those from earlier releases, for completeness)BOOTSERVER INFORMATIONInstallerTapeDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and installe thhe other bootfiles on the disk. the Installer is not part of the Pilot release. so we have provided an OthelloDuke.boot, untill the Installer bootfile is available.. In IWA area(Net No = 093), F3-X, F7-X will be updated. (I will send a message)For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM. Of course, New RDC ROM)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerTapeDuke.boot  (Note: Based on Pilot 15.0a)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, New BootPROM, New RDC ROM)F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerTapeDuke.boot  (Note: Based on Pilot 15.0a)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootFor Pseudo-Duke Version 2 (Dahlia/DayBreak PWBA, 8KW WCS, Dove-BootPROM, New RDC ROM)F3-4 (F7-4 : MoonDuke)Key: 25200004004 EtherInitialDove.dbKey: 25200004014 MoonDuke.dbKey: 25200004024 MesaDuke8K.dbKey: 25200004034 Duke.germKey: 25200004044 InstallerTapeDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004005 EtherInitialDove.dbKey: 25200004015 MoonDuke.dbKey: 25200004025 MesaDuke8K.dbKey: 25200004035 Duke.germKey: 25200004045 OthelloDuke.bootF3-6 (F7-6 : MoonDuke)Key: 25200004006 EtherInitialDove.dbKey: 25200004016 MoonDuke.dbKey: 25200004026 MesaDuke8K.dbKey: 25200004036 Duke.germKey: 25200004046 OfflineDiagnosticsDuke.bootPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System, specifying the version as 15.0b and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.Note: Regarding Adobe database system  names . System: "Faces/Heads" is an obsolete system in the AR database. Please submit ARs that previously were destinated for "Faces/Heads" to the IO Software" system. Further, System: "Microcode" refers to only Emulator microcode. IO related microcode action requests should be submitted to "IO Software".The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors*start*14846 00071 US @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 24 Nov 88 10:11:36 +0900 (Thursday)Subject: Pilot 15.0c Update to Oze System TestFrom: TokunagaTo: DukeImplementorscc: TokunagaReply-to: Tokunaga  Pilot 15.0, known as Oze, has been updated. This update, Pilot 15.0c, support the Duke/Dahlia/DayBreak hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0c as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0c differs from prior-15.0c. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE1. The restriction of the volume size up to 65503 disk page is relieved.2.  New RDC ROM Code based on F2 version is released, dated on 3-Nov-88 16:2X:XX JST. 3. When you are going to format the disk with OfflineDiagnostics 3.0, special-care is required. See DukeInstallation.doc.4. A lot of changes have been done for LabellessDiskConverter.  (1) A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.    (2) The converter now protects against losing the volume if the LV root page is lost during conversion.    (3) The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.    (4) The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.    (5) Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)    (6) Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".    (7) The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.    (8) A list of all new bad pages is displayed upon completion or abort.    (9) There is an additional warning: Physical volume will need scavenging in labelless world.    (10) The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".    (11) Nothing is imported from Othello DF files.    CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB) is now supported.++ New Machine type is added.Now, Duke is a new machine type.++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too.++ Labelless Pilot and BasicHeads is available for Duke.++ New to this update is Track-Buffering, including BasicHeadsDuke and DiskChannelResident. OthelloDuke and TajoDuke is built with the BasicHeadsDuke. ++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance. ++ File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for testing track caching, and are subject to  -- change.  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;  trackCachingSwitch3: PilotSwitches.PilotDomainC = '\342;  trackCachingSwitch4: PilotSwitches.PilotDomainC = '\343;  trackCachingSwitch5: PilotSwitches.PilotDomainC = '\344;  -- These  switches mean the following:  -- \344  \343  \342  \341  \340      result  --                                   system defined number of track buffers  --                          X        1 track buffer  --                    X              2 track buffers  --                    X     X        3 track buffers  --              X                    4 track buffers  --              X           X        5 track buffers  --              X     X              6 track buffers  --              X     X     X        7 track buffers  --         X                         8 track buffers  --         X                X        9 track buffers  --         X          X              10 track buffers  --         X          X     X        11 track buffers  --         X    X                    12 track buffers  --         X    X           X        13 track buffers  --         X    X     X              14 track buffers  --         X    X     X     X        15 track buffers  --   X                               16 track buffers  --   X                      X        17 track buffers  --   X                X              18 track buffers  --   X                X     X        19 track buffers  --   X          X                    20 track buffers  --   X          X           X        21 track buffers  --   X          X     X              22 track buffers  --   X          X     X     X        23 track buffers  --   X     X                         24 track buffers  -- where "X" means that the switch is down or on.  If the number of buffers  -- specified is larger than the maximum number of buffers supported on that  -- machine, then the maximum supported number of buffers will be used.  If  -- either switch \346 is set, or the machine does not support track caching,  -- then these switches will be ignored, and track caching will not occur.++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.ARs FIXED*12890	Online diagnostics - In  keyboard test, ShiftKeys show wrong position*13492	Normal-User mode does not update disk type in SDD page*13508	Display incorrect old rigid disk type in Normal-User mode*13509	Fail  to Write SDD page warning message is lost13524	Duke Diagnostics SCU Problem*13531	Incorrect  DiskType in SDD page13558	ObjallocImpl Bug: Can't handle volumes larger than 65504  pagesNote: * ==> Come from Pilot 14.0.WHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, buyt has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0c on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0c (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerTapeDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and installe thhe other bootfiles on the disk. the Installer is not part of the Pilot release. so we have provided an OthelloDuke.boot, untill the Installer bootfile is available.. In IWA area(Net No = 093), F3-X, F7-X will be updated. (I will send a message)For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM. Of course, New RDC ROM)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerTapeDuke.boot  (Note: Based on Pilot 15.0a)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, New BootPROM, New RDC ROM)F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerTapeDuke.boot  (Note: Based on Pilot 15.0a)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootF3-6 (F7-6)/F3-7 (F7-7)Reserved for testing.For Pseudo-Duke Version 2 (Dahlia/DayBreak PWBA, 8KW WCS, Dove-BootPROM, New RDC ROM)F3-4 (F7-4 : MoonDuke)Key: 25200004004 EtherInitialDove.dbKey: 25200004014 MoonDuke.dbKey: 25200004024 MesaDuke8K.dbKey: 25200004034 Duke.germKey: 25200004044 InstallerTapeDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004005 EtherInitialDove.dbKey: 25200004015 MoonDuke.dbKey: 25200004025 MesaDuke8K.dbKey: 25200004035 Duke.germKey: 25200004045 OthelloDuke.bootF3-6 (F7-6 : MoonDuke)Key: 25200004006 EtherInitialDove.dbKey: 25200004016 MoonDuke.dbKey: 25200004026 MesaDuke8K.dbKey: 25200004036 Duke.germKey: 25200004046 OfflineDiagnosticsDuke.bootPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System, specifying the version as 15.0b and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.Note: Regarding Adobe database system  names . System: "Faces/Heads" is an obsolete system in the AR database. Please submit ARs that previously were destinated for "Faces/Heads" to the IO Software" system. Further, System: "Microcode" refers to only Emulator microcode. IO related microcode action requests should be submitted to "IO Software".The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors----------------------------------------------------------------*start*19763 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Ron S. Vogel:OSBU North:XeroxDate:  7 Dec 88 13:32:44 +0900 (Wednesday)Subject: resending with more information - Some performance analysis of 15.0From: VogelTo: DukeImplementors:IWA:Fuji Xeroxcc: VogelReply-to: Vogeleply-To: VogelThis is a long message.  The results, procedures, etc. have been summarized in the first part of the message.  The raw data is in the second part.  I am resending this after filling in a couple of the XXXX's from the first message.  Also, I've changed the names of my test cases, and reordered them.  And finally, I've added some more paragraphs in the analysis portion, including talking about 13.0 experiences with performance, track caching impact, etc... plus added my recommendation (I did not move a summary of the results to the beginning of the message because I just couldn't cut the length down).The following tests where performed on a Duke machine with 4096 bytes of real memory, a Micropolis 1325, 80MB disk drive, E4-based version PROM, three logical volumes (Othello 4000 pages, Tajo 59246 pages, and CoPilot 59247 pages).  All tests were actually performed on the CoPilot volume.The two sets of tests performed were  13.0 Allocation method: Modified Othello and Tajo 15.0c bootfiles (different            VolAllocMapImpl, released 13.0 version, so files allocated from	    beginning of volume).  15.0 Allocation method: Standard Othello and Tajo 15.0c bootfiles (so files            allocated from middle of volume).NOTE THAT BY SAYING 13.0 ALLOCATION METHOD, I DO NOT MEAN 13.0 BOOTFILES.  I ONLY MEAN THE ALLOCATION METHOD (from the beginning of the disk rather than from the middle of the disk).PROCEDURE:The following procedure was performed;  1. Install either 13.0 or 15.0 allocation method Othello bootfile onto Othello       volume  2. Boot Othello volume  3. Erase CoPilot volume  4. Fetch either 13.0 or 15.0 allocation method Tajo bootfile onto CoPilot       volume.  5. Boot Tajo volume with boot switches 568\347\377 (thus go to ethernet for       debug, do heap checking and heap owner checking, do NOT do mapped file       locking, do not write zeroes on delete of files)  6. Login and clearinghouse set  7. Bring up filetool  8. Fetch TestTool.bcd from my personal machine (TestTool.bcd explained below)  9. Fetch RuntimePerf.bcd from [Gemini:IWA:Fuji Xerox]<IPilot>Pilot>Public>  10. Run RuntimePerf  11. Run TestTool  12. Swat the machine  12a. For 15.0 allocation method test only (standard 15.0c only), set         debug ¬ FALSE in VolAllocMapImpl.  13. From a debugging machine (across the net), break on entry to        FileImpl.Delete  14. Break on exit to FileImpl.Delete.  15. SetDUD from Sword  16. Run Perf.bcd on debugger  17. Condition breaks, collect nodes, and add leg from break 1 to break 2        in Perf Tool  18. Set Module Context to TestTool  19. Do a Run[60] into Sword window (thus letting the Duke machine run for        a while.  20. When procedure finished, print out global variables in TestTool, and         print out table in Perf Tool  21. Zero table in Perf Tool  22. Go to step 19 (repeat a total of three times) without rebooting  TestTool does the following:  1. When running TestTool.bcd, it simply loads some code.  2. The procedure Run is now callable from a debugger.  Run takes one       parameter, a file size in pages, for it do do all it's operations on.  3. Run[60] thus does the following:       a. initializes all variables       b. creates n files of size 60 (n happens to be 60 also, but this is NOT            related to value passed to Run)       c. makes the n files permanent.       d. maps the n files (Space.Map)       e. unmaps the n files (Space.Unmap)       f. allocates n intervals of virtual memory (Space.Allocate) of size 60.       g. maps the n files to the n intervals of virtual memory (Space.MapAt)       h. unmaps the n files from the n intervals of virtual memory             (Space.UnmapAt)       i. deallocates the n intervals of virtual memory (Space.Deallocate)       j. scratch maps n intervals of backed virtual memory (Space.ScratchMap)       k. copies in the n files into the n backed virtual memory intervals            (Space.CopyIn)       l. copies out the n backed virtual memory intervals into the n files            (Space.CopyOut)       m. makes the n files temporary       n. deletes the n files.       o. while each operation is going on, a count of ticks is kept.  The ticks            are finally converted into microseconds at the end, and the average	    number of microseconds for each operation is put into a global	    variableSUMMARY OF RESULTSDelete results from PerfTool:                   13.0 allocation       15.0 allocation		   (modified 15.0c)     (standard 15.0c)  Run 1             128.818 msec          128.439 msec  Run 2             129.892 msec          128.244 msec  Run 3             128.562 msec          128.474 msecNote that in the test above, there were actually 115 deletes in each run, this is because of the calls of TestTool to File.Delete plus it's calls to Space.ScratchMap which when doing an Unmap also call File.Delete if they had to allocate their own backing file (not out of the Pilot system volume backing file).Times given by TestTool (modified 15.0c kernel, therefore 13.0 allocation method):                    Run 1           Run 2           Run 3  Create            175273 usec     177059 usec     173531 usec  Delete            128952 usec     130337 usec     129782 usec  Map                17938 usec      17268 usec      18239 usec  Unmap              12105 usec      12054 usec      11172 usec  Allocate            3542 usec       3245 usec       3271 usec  Deallocate          1404 usec       1431 usec       1281 usec  MapAt              13851 usec      14694 usec      14954 usec  UnmapAt             7957 usec       9941 usec       8147 usec  ScratchMap        182131 usec     183641 usec     180713 usec  CopyIn            201358 usec     202375 usec     202305 usec  CopyOut           110472 usec     139689 usec     112055 usec  MakePermanent      58723 usec      55947 usec      57054 usec  MakeTemporary      56424 usec      57541 usec      56980 usecTimes given by TestTool (standard 15.0c kernel, therefore 15.0 allocation method):                    Run 1           Run 2           Run 3  Create            186946 usec     186421 usec     185550 usec  Delete            127910 usec     128496 usec     128744 usec  Map                17378 usec      16487 usec      16499 usec  Unmap              11050 usec      11104 usec      11171 usec  Allocate            3881 usec       4057 usec       4101 usec  Deallocate          1266 usec       1405 usec       1264 usec  MapAt              13411 usec      13312 usec      13521 usec  UnmapAt             7797 usec       8549 usec       7881 usec  ScratchMap        186606 usec     186174 usec     186956 usec  CopyIn            197600 usec     200589 usec     199124 usec  CopyOut           116286 usec     118720 usec     116435 usec  MakePermanent      57072 usec      54841 usec      57617 usec  MakeTemporary      56883 usec      55541 usec      55763 usecANALYSIS:Most times were nearly the same between standard 15.0c and modified 15.  A few like Map, MapAt, CopyIn were a bit faster (some a few percentage points) with the 15.0 allocation method.  A couple of operations were noticeably slower with the 15.0 allocation method.  Mainly Create, CopyOut, and ScratchMap.  Create is expected to be slightly slower because it is the only operation left which goes out and reads/writes with the root page (changing flag).  ScratchMap is also expected to be slightly slower since it also must create files, and thus write the root page's changing flag.  CopyOut is NOT expected to be slower (especially since CopyIn was slightly faster...about 1%).  However, there is a variance in a couple of the CopyOut times that seem peculiar (especially Run 2 with the modified kernel).Just because something is slightly slower in these tests, doesn't mean that it will be slower than 14.0.  That was outside the scope of my testing and performance analysis.  Also, it was pointed out that it is a little surprising to not notice much difference either way between the two systems analyzed.  Part of the reason for that is because I'm comparing two nearly identical systems.  The allocation doesn't play that big of a part in a single operation, but rather in how a system behaves.  I believe that is becaue these tests do NOT accurately reflect what clients do (clients tend to do the wrong thing, like create files of only two pages and then grow them instead of making them the correct size in the first place, swap strangely, etc...). Therefore, all in all, I think things are about where we expect them with moving the files to the middle of the disk.  The operations done the most (Map, Unmap, MapAt, and UnmapAt) are a bit faster.  Furthermore, if we would actually use the data on the disk (if the files actually contained data which we were reading), then going and reading those files in would be faster since they would be centralized around the middle of the disk.  Notice that all of my tests don't actually use data in a file or write data in a file.  Clients eventually do this.Also, track cachings inpact on my tests is not understood.  Since I do not usually go out and touch the files themselves in the tests I ran, then track caching may be masking any difference that I would have noticed. Also note that all of the PARC research that I've seen talks about doing file allocation from the middle of the disk.  This leads me to believe that we SHOULD use the new 15.0 allocation method, unless testing in Viewpoint shows some problems with performance..I mention testing in Viewpoint because while we were doing performance analysis of 13.0 for the Horizon projet, we often found things in Pilot which were slightly faster at our level to NOT make any difference at the client level.  Furthermore, a couple of things which were slightly slower in Pilot caused a lot of slowdown at the client level.  Therefore, I believe that we (FX and XC) need to do EXTENSIVE and realistic testing and comparisons between 14.0 and 15.0 based systems.  By realistic I mean that the operations done are REALLY what an end user would do.  If this testing is NOT done, then I do NOT recommend using the new volume allocation method.BELOW IS THE RAW DATA:LATEST VERSION VOLALLOCMAPIMPL (standard 15.0c):1st run:Total Elapsed Time of Measurements =          19.080:704Elapsed Time less PerfMonitor Overhead =      19.026:547Total Overhead of PerfMonitor Breaks =            54:156Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    235% of Total Time spent in PerfMonitor =               .28 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     5731        115  Tajo             FileImpl                  1     600     5707        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.770:598        164:672         114:073        128:439  77.63  usecCreate = 186946  usecDelete = 127910  usecMap = 17378  usecUnmap = 11050  usecAllocate = 3881  usecDeallocate = 1266  usecMapAt = 13411  usecUnmapAt = 7797  usecScratchMap = 186606  usecCopyIn = 197600  usecCopyOut = 116286  usecPermanent = 57072  usecTemp = 568832nd run:  Total Elapsed Time of Measurements =          18.997:222Elapsed Time less PerfMonitor Overhead =      18.943:219Total Overhead of PerfMonitor Breaks =            54:003Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    234% of Total Time spent in PerfMonitor =               .28 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     5731        115  Tajo             FileImpl                  1     600     5707        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.748:083        159:552         106:457        128:244  77.85    usecCreate = 186421  usecDelete = 128496  usecMap = 16487  usecUnmap = 11104  usecAllocate = 4057  usecDeallocate = 1405  usecMapAt = 13312  usecUnmapAt = 8549  usecScratchMap = 186174  usecCopyIn = 200589  usecCopyOut = 118720  usecPermanent = 54841  usecTemp = 555413rd run:  Total Elapsed Time of Measurements =          19.054:681Elapsed Time less PerfMonitor Overhead =      19.000:716Total Overhead of PerfMonitor Breaks =            53:964Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    234% of Total Time spent in PerfMonitor =               .28 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     5731        115  Tajo             FileImpl                  1     600     5707        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.774:566        164:032         112:435        128:474  77.75  usecCreate = 185550  usecDelete = 128744  usecMap = 16499  usecUnmap = 11171  usecAllocate = 4101  usecDeallocate = 1264  usecMapAt = 13521  usecUnmapAt = 7881  usecScratchMap = 186956  usecCopyIn = 199124  usecCopyOut = 116435  usecPermanent = 57617  usecTemp = 55763MODIFIED 15.0c kernel (VolAllocMapImpl July 30 version)1st run:Total Elapsed Time of Measurements =          19.157:312Elapsed Time less PerfMonitor Overhead =      19.103:308Total Overhead of PerfMonitor Breaks =            54:003Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    234% of Total Time spent in PerfMonitor =               .28 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     6015        115  Tajo             FileImpl                  1     600     5773        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.814:144        166:643         108:800        128:818  77.54  usecCreate = 175273  usecDelete = 128952  usecMap = 17938  usecUnmap = 12105  usecAllocate = 3542  usecDeallocate = 1404  usecMapAt = 13851  usecUnmapAt = 7957  usecScratchMap = 182131  usecCopyIn = 201358  usecCopyOut = 110472  usecPermanent = 58723  usecTemp = 564242nd run  Total Elapsed Time of Measurements =          19.305:676Elapsed Time less PerfMonitor Overhead =      19.251:648Total Overhead of PerfMonitor Breaks =            54:028Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    234% of Total Time spent in PerfMonitor =               .27 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     6015        115  Tajo             FileImpl                  1     600     5773        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.937:587        169:804         112:908        129:892  77.59  usecCreate = 177059  usecDelete = 130337  usecMap = 17268  usecUnmap = 12054  usecAllocate = 3245  usecDeallocate = 1431  usecMapAt = 14694  usecUnmapAt = 9941  usecScratchMap = 183641  usecCopyIn = 202375  usecCopyOut = 139689  usecPermanent = 55947  usecTemp = 575413rd run:  Total Elapsed Time of Measurements =          19.107:648Elapsed Time less PerfMonitor Overhead =      19.053:516Total Overhead of PerfMonitor Breaks =            54:131Total number of Perf Breaks handled =                230Average Overhead per Perf Break =                    235% of Total Time spent in PerfMonitor =               .28 - - - - - - N O D E   T A B L E   C O N T E N T S - - - - - - - - - -Node Global  Program  Number of  Config           Module Id  Frame   Counter  References Name             Name---- ------  -------  ---------- ---------------- ------------------------  2     600     6015        115  Tajo             FileImpl                  1     600     5773        115  Tajo             FileImpl                 - - - - - - - L E G    T A B L E    C O N T E N T S - - - - - - - - -Leg  From  To    # of Times  Total Time     Longest Time    Shortest Time  Average Time    % of Id  Node  Node  Referenced  sec.msec:usec  sec.msec:usec   sec.msec:usec  sec.msec:usec   Time---  ----  ----  ----------  -------------  -------------   -------------  -------------   ----  1    1 ->  2          115     14.784:716        168:614         112:204        128:562  77.59  usecCreate = 173531  usecDelete = 129782  usecMap = 18239  usecUnmap = 11172  usecAllocate = 3271  usecDeallocate = 1281  usecMapAt = 14954  usecUnmapAt = 8147  usecScratchMap = 180713  usecCopyIn = 202305  usecCopyOut = 112055  usecPermanent = 57054  usecTemp = 56980*start*18140 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 26 Dec 88 15:46:40 +0900 (Monday)Subject: Pilot15.0d Update to Oze System TestFrom: TokunagaTo: DukeImplementorscc: TokunagaReply-to: TokunagaPilot 15.0, known as Oze, has been updated. This update, Pilot 15.0d, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0d as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0d differs from prior-15.0d. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1)  New RDC PROM is issued again to fix AR 13595: The wait time of track read for gap is too short.(2) New public interface, DeviceTypesExtras6.mesa, is added in order to support new Mitsubishi Disks;     mr335: 3.5inch, 50MB    mr548: 5inch, 80MB(3) New interface, ProcessorFacesExtras2.mesa, is added in order to support the new machine-type; dune.(4) As for OfflineDiagnostics, the fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)(5) The new restriction for OfflineDiagnostics.If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit. (6) The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;(7) For Labelless Disk Converter    A lot of changes and improvements are done.       1. Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)  2. The Make Page Bad and List Bad Pages commands now work for the offline case.  3. Trying to Online Rd0 after converting now gets an appropriate error message.  4. Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.  5. Conversion checks over all logical volumes before aborting with an "LV needs repair" case  6. A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.  7. In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.  8. The missing startup advice (Type DEL to abort, etc.) was added.  9. Assorted bugs, space leaks, missed signals, and message format problems were fixed.(8) Now, support XP-11 local printing.   1. BiparallelPortChannelDriver, Head, and Handler are changed.     Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa.      2. Boot Diagnostic's code is changed.   XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was. (9) MesaDuke12K.db and MesaDuke8K.db is updated.    It includes the new handler code of Biparallel Port.CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB) is now supported.++ New Machine type is added.Now, Duke is a new machine type.++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too.++ Labelless Pilot and BasicHeads is available for Duke.++ New to this update is Track-Buffering, including BasicHeadsDuke and DiskChannelResident. OthelloDuke and TajoDuke is built with the BasicHeadsDuke. ++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance. ++ File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for testing track caching, and are subject to  -- change.  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;  trackCachingSwitch3: PilotSwitches.PilotDomainC = '\342;  trackCachingSwitch4: PilotSwitches.PilotDomainC = '\343;  trackCachingSwitch5: PilotSwitches.PilotDomainC = '\344;  -- These  switches mean the following:  -- \344  \343  \342  \341  \340      result  --                                   system defined number of track buffers  --                          X        1 track buffer  --                    X              2 track buffers  --                    X     X        3 track buffers  --              X                    4 track buffers  --              X           X        5 track buffers  --              X     X              6 track buffers  --              X     X     X        7 track buffers  --         X                         8 track buffers  --         X                X        9 track buffers  --         X          X              10 track buffers  --         X          X     X        11 track buffers  --         X    X                    12 track buffers  --         X    X           X        13 track buffers  --         X    X     X              14 track buffers  --         X    X     X     X        15 track buffers  --   X                               16 track buffers  --   X                      X        17 track buffers  --   X                X              18 track buffers  --   X                X     X        19 track buffers  --   X          X                    20 track buffers  --   X          X           X        21 track buffers  --   X          X     X              22 track buffers  --   X          X     X     X        23 track buffers  --   X     X                         24 track buffers  -- where "X" means that the switch is down or on.  If the number of buffers  -- specified is larger than the maximum number of buffers supported on that  -- machine, then the maximum supported number of buffers will be used.  If  -- either switch \346 is set, or the machine does not support track caching,  -- then these switches will be ignored, and track caching will not occur.++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++ The restriction of the volume size up to 65503 disk page is relieved.++  A lot of changes have been done for LabellessDiskConverter.  + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.    + The converter now protects against losing the volume if the LV root page is lost during conversion.    + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.    + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.    + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)    + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".    + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.    + A list of all new bad pages is displayed upon completion or abort.    + There is an additional warning: Physical volume will need scavenging in labelless world.    + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".    + Nothing is imported from Othello DF files.ARs FIXED13521	Fixed	FrameExtras.LongGFTHandle in Pilotcounter cause problem13555	Fixed	Formatter on Duke crashed with new drive or incorrect formatted disk13581	Fixed	AddressFault in DiskConversionETableImpl.mesa13583	Fixed	Bug in ETableImplB.ShrinkLastPageGroup13595	Fixed 	Wait time of track read command for gaps are too shortWHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0c on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0c (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available. In IWA area(Net No = 093), F3-X, F7-X will be updated. (I will send a message)For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM. Of course, New RDC ROM)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, New BootPROM, New RDC ROM)F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootF3-6 (F7-6)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System, specifying the version as 15.0b and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.Note: Regarding Adobe database system  names. System: "Faces/Heads" is an obsolete system in the AR database. Please submit ARs that previously were destinated for "Faces/Heads" to the IO Software" system. Further, System: "Microcode" refers to only Emulator microcode. IO related microcode action requests should be submitted to "IO Software".The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors*start*20186 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 30 Jan 89 09:41:16 +0900 (Monday)Subject: Pilot15.0e Update to Oze System Test (FX-Product Test)From: TokunagaTo: DukeImplementorscc: TokunagaReply-to: Tokunagaeply-To: TokunagaPilot 15.0, known as Oze, has been updated. This update, Pilot 15.0e, support the Duke/Dahlia hardware. The intended client of this release is the FX WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 2 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0e as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0d differs from prior-15.0e. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1) Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyIOFaceDove and FloppyHeadDove are modified.      Note: Booting from such floppy isn't supported.(2) SpacePerf.mesa goes back to Pilot 14.0 and SpacePerfExtras.mesa is newly introduced.    The former one which come from Pilot 13.0 release had new perf. variables for FileLock-mechanism and etc in comparison with the one in Pilot 14.0 release.The one in this update is exactly same as in Pilot 14.0 release, and new perf. variables are defined in SpacePerfExtras.mesa. (3) Debug boolean in VMDataUtilities, VMImpl, and VolAllocMapImpl are disabled.(4) BasicHeadsDuke.bcd, Duke.germ are rebuilt due to the modification of FloppyHeadDove.(5) Boot Switches for Tack-buffering is refined.    The former version has 6 switches, 346, 340, 341, 342, 343, 344. In this update, only 3 switches are provided, 346, 340, 341.   As a result of our performance testing using VP standard operations, the default size of track-buffering is determined, 12 tracks.     disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)    -- The following switches are for track cachingg.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;(6) OnlineDiagnostics14.df is renamed to OnlineDiagnostics15.dfThe one in former release is exactly same as in Pilot 14.0 release, so we didn't change its name even in Pilot 15.0 release. Now, in this update, we've changed its name because a module(VerifyReadImpl.mesa) owned by the df file imports "FloppyIOFaceDove" that is modified/recompiled for supporting floppy-1024bytes-sector.  CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on F2 version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for testing track caching, and are subject to  -- change.  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;  trackCachingSwitch3: PilotSwitches.PilotDomainC = '\342;  trackCachingSwitch4: PilotSwitches.PilotDomainC = '\343;  trackCachingSwitch5: PilotSwitches.PilotDomainC = '\344;  -- These  switches mean the following:  -- \344  \343  \342  \341  \340      result  --                                   system defined number of track buffers  --                          X        1 track buffer  --                    X              2 track buffers  --                    X     X        3 track buffers  --              X                    4 track buffers  --              X           X        5 track buffers  --              X     X              6 track buffers  --              X     X     X        7 track buffers  --         X                         8 track buffers  --         X                X        9 track buffers  --         X          X              10 track buffers  --         X          X     X        11 track buffers  --         X    X                    12 track buffers  --         X    X           X        13 track buffers  --         X    X     X              14 track buffers  --         X    X     X     X        15 track buffers  --   X                               16 track buffers  --   X                      X        17 track buffers  --   X                X              18 track buffers  --   X                X     X        19 track buffers  --   X          X                    20 track buffers  --   X          X           X        21 track buffers  --   X          X     X              22 track buffers  --   X          X     X     X        23 track buffers  --   X     X                         24 track buffers  -- where "X" means that the switch is down or on.  If the number of buffers  -- specified is larger than the maximum number of buffers supported on that  -- machine, then the maximum supported number of buffers will be used.  If  -- either switch \346 is set, or the machine does not support track caching,  -- then these switches will be ignored, and track caching will not occur.++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ARs FIXED13638	Fixed	SpacePerf should be devided to SpacePerf in Pilot14.0 and SpacePerfExtras.13644	Fixed	PilotSwitches final version of track buffering switches13646	Fixed	Turn off debugging booleans   (Note: vMDataUtilities, VMImpl, VolAllocMapImpl)13655	Fixed	Converter must be rebuilt with final version#13699	Fixed	Floppy Format 1024bytes/sectorWHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0c on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0c (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available. In IWA area(Net No = 093), F3-X, F7-X will be updated. (I will send a message)For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM. Of course, New RDC ROM)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, New BootPROM, New RDC ROM)F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootF3-6 (F7-6)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System, specifying the version as 15.0b and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.Note: Regarding Adobe database system  names. System: "Faces/Heads" is an obsolete system in the AR database. Please submit ARs that previously were destinated for "Faces/Heads" to the IO Software" system. Further, System: "Microcode" refers to only Emulator microcode. IO related microcode action requests should be submitted to "IO Software".The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.  //DukeImplementors.*start*16507 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 20 Feb 89 18:06:42 +0900 (Monday)Subject: Pilot15.0f Update to Oze System Test (FX-Product Test)From: TokunagaTo: DukeImplementorscc: TokunagaReply-to: TokunagaPilot 15.0, known as Oze, has been updated. This update, Pilot 15.0f, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0f as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0f differs from prior-15.0f. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1) New timer software is provided.  -- This is not for Duke, but for future Diana-StandAlone.  This requires rebuilting Pilot microcode, and BasicHeadsDuke.bcd.(2) The device parameter, PreCompensationCylinder, of Mitsubishi MR548 (86MB) has been changed from 32767 to 300.New OfflineDiagnosticsDuke.boot is rebuilt.(3) New BiparallelPortHeadDove/Handler. (could not be interested for our client)In the farmer one,  the processor-type(e.g., DayBreak, Dahlia, etc) would be passed from the Hanlder-Software to the BiparallelPortHeadDove. In the new one, BiparallelPortHeadDove asks the processor-type through ProcessorFaceExtras2 directly.  CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on F2 version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for track caching.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ++ Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyHeadDove is modified.      Note: Booting from such floppy isn't supported.   ARs FIXED No Open-ARsWHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0f on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0f (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available. In IWA area(Net No = 093), F3-X, F7-X will be updated. (I will send a message)For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM. Of course, New RDC ROM)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, New BootPROM, New RDC ROM)F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot  (Note: Based on Pilot 15.0c)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootF3-6 (F7-6)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0f and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors*start*19675 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 17 Mar 89 15:00:18 +0900 (Friday)Subject: Pilot15.0f Update to FX-Product TestFrom: TokunagaTo: DukeImplementorscc: TokunagaPilot 15.0, known as Oze, has been updated. This update, Pilot 15.0g, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0g as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0g differs from prior-15.0g. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1) New Ethernet low-level stuffs.In order to fix the SS AR 13772 for Duke, a lot of changes are done.     * New queue-locking mechanism are introduced.     In order to support this, the size of Ethernet IORegion is grown and the rom code for ethernet is grown.    In the mesa microdode, a new MOP-code is introduced implemented in MiscDaybreak.mc.    The new mesa difinition; aLOCKQUEUE(206B) is introduced for the new MOP-Code in ESCAlphaExtras3.mesa in MesaFriends.df.      The bigger IORegion for Ethernet and the bigger rom-code requires a lot of changes. see below(find SIDE EFFECTS).    * EthernetHeadDove is modified to use the new queue-locking mechanism.    SIDE EFFECTS: The side-ffects of the bigger IORegion and bigger rom code are scattered.     ** RAM code is rebuilt (Ethernet IORegion).    ** Initialmicrocode for ethernet is rebuilt and its name is changed to EtherInitialDove.db to EtherInitialDuke.db(Ethernet IORegion).    ** The bigger ROM Chip is introduced, from 64Kbit to 128Kbit chip(bigger ROM Code).    ** CmosDiskplay hander is moved into ROM, because we couldn't find the way for calcurating the new address of the handler in RAM(bigger ROM Code).       The old one:  (4000'x + OFFSET) + CodeSegment(FC000'x). In this case, the first addition (4000'x + OFFSET) never have the carry.  The result is the correct address of the handler (OFFSET).       In the new one, we have to change the CodeSegment; from FC000'x to F8000'x, and used the same algorithm as before, like (8000'x + OFFSET) + CodeSegment(F8000'x). In this case, the first addition(8000'x + OFFSET) have the carry and the result isn't the correct address of the handler. So, the handler is moved into ROM because we no longer have to calcurate its address by the above algorithm.    ** As for Bermuda, the start address where the rom code is in is changed from C000'x to BE00'x(from the view of Opie address). (2) Initial microcode for Ethernet is rebuilt for bigger IORegion, and change the name from EtherInitialDove.db to EtherInitialDuke.db.    (See BOOTSERVER INFORMATION)  -- already appeared in (1)(3) The code in BootPROM is modified, and use bigger one without any hardware change. (64Kbit chip to 128Kbit chip)    (See BOOTSERVER INFORMATION)  -- already appeared in (1)(4) BasicHeadsDuke.bcd is rebuilt because EthernetHeadDove is modified.(5) Duke.germ is rebuilt because EthernetHeadDove is modified.(6) Offline Diagnostics/System Configuration Utility are released.    *Because 1. BasiceHeadsDuke is rebuilt.             2. The vcmDisk parameter for Fujitsu M2243T(80MB) is changed to TRUE.    * DiagEtherDove14.df and DiagEtherDoveCommon.df are changed to DiagEtherDuke15.df and EiagEtherDukeCommon.df respectively.CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on F2 version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ File Locking mechanism is changed.  You can avoid the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for track caching.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa. In this case, the processor-type is investigated in BiparallelPortHeadDove through ProcessorFaceExtras2.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ++ Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyHeadDove is modified.      Note: Booting from such floppy isn't supported.++ New timer software is provided.  -- This is not for Duke, but for future Diana-StandAlone.   ARs FIXEDSS AR13772	Address fault in EthernetHeadDove.EnQueue        	This AR is same as SS AR12903 for Dove. Also seems to be related to SS AR 12543 and WS AR16928 for Dove.WHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0g on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0g (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available.In this update, new Boot PROM is introduced. If you use the new one, only F3-6 and F7-6 is availabe for net-booting. This is because there are no BWS bootfile/Installer based on this update yet and the former bootable stuff(bootfile, germ, etc) requires the former Boot PROM, the new bootable stuff requires the new Boot PROM. When they are available, we will change the bootservice slot and send a message.  In IWA area(Net No = 093), F3-X, F7-X will be updated.For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, former BootPROM(64kBit-chip).)F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDove.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.bootF3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDove.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDove.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, former BootPROM(64Kbit chip))F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDove.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDove.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDove.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootFor Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, New BootPROM(128KBit-chip).)F3-6 (F7-6 : MoonDuke)(Note: The name of pilot microcode, germ, and othello are changed only for bootservice because of the coexistence of old and new bootable stuff.)Key: 25200004406	EtherInitialDuke.dbKey: 25200004416	MoonDuke.dbKey: 25200004426	MesaDuke12KTest.dbkey: 25200004436	DukeTest.germKey: 25200004446	OthelloDukeTest.boot/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0g and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors*start*00329 00071 US @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 18 Mar 89 09:37:24 +0900 (Saturday)Subject: Correction: Pilot15.0f Update to FX-Product TestFrom: TokunagaTo: DukeImplementorscc: Tokunaga  Sorry,  this update is verion Pilot15.0g, not Pilot15.0f.//Toru.*start*20851 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 21 Apr 89 08:55:30 +0900 (Friday)Subject: Final Pilot15.0h update for release and manufacturingFrom: TokunagaTo: DukeImplementorscc: wsd-3g, Tokunaga  Pilot 15.0, known as Oze, has been updated. This update, Pilot 15.0h, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0h as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0h differs from prior-15.0h. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1) Space.Error[stillmapped]; SS-FX#6, #26 are fixed.    In this update, Labelless-Pilot gets to have a new function for VM management.    The former labelless-pilot raises the Space.Error[stillmapped] when clients try to shrink a file which has been still mapped to Mesa virtual memory. On the other hand, new labelless-pilot takes care of such case with a exception mentioned below.     exceptions:       : If the file pages which are going to shrinked are mapped to more than 1 map-unit,            Space.Error[stillmapped] is still raised.      The page number of bogus mesa virtual memory are cached in VM-layer and when client do Space.Unmap[], they will be cleared.        Many DF files are smodeled and pilotkenel is rebuilt.(2) On the way of (1), a bug was found in VMImpl.ProcessBatches.     When the parameter "options" is [unmappedProcessing: don't care, intervalOrSwapnits: exactInterval, checkInOption: leaveCheckedOut], and the interval for batch-processing is across two swapunits, the system hang because the whole last swapunit has been "checked-out" when the system tries to process the next interval for batch-processing.    New one expands the interval for batch-processing in order not that the intervale never be accross two swapunits.      (3) OfflineDiagnostics    * Change the disk label data from diagnostics' original to the one that pilot assumes when formatting the disk including track-formatting.       * Change PreCompensationCylinder for Mitsubishi MR548, and HeadLandingZone for Fujitsu M2227D    * Change the copyright    * Change beginDST and endDST lowLimit to 0.    * Rebuilt with new Pilotkernel.(4) Internal Timer (for Diana only)    Now, Diana can boot up without time server.      OthelloOpsImpl is modified and several files in PilotMisc.df are rebuilt. CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on Rev.F (RDCE3F) version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ File Locking mechanism is changed.  You can surpress the Space.Error[stillMapped] by setting "boot switch : \347". (See next item)++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for track caching.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.   + The vcmDisk parameter for Fujitsu M2243T(80MB) is changed to TRUE   + DiagEtherDove14.df and DiagEtherDoveCommon.df are changed to DiagEtherDuke15.df and EiagEtherDukeCommon.df respectively.++ New Ethernet low-level stuff.In order to fix the SS AR 13772 for Duke, a lot of changes are done.     + New queue-locking mechanism are introduced.     In order to support this,  the size of Ethernet IORegion is grown and the rom code for ethernet is grown.    In the mesa microdode, a new MOP-code is introduced implemented in MiscDaybreak.mc.    The new mesa difinition; aLOCKQUEUE(206B) is introduced for the new MOP-Code in ESCAlphaExtras3.mesa in MesaFriends.df.      The bigger IORegion for Ethernet and the bigger rom-code requires a lot of changes. see below(find SIDE EFFECTS).    + EthernetHeadDove is modified to use the new queue-locking mechanism.    SIDE EFFECTS: The side-ffects of the bigger IORegion and bigger rom code are scattered.     ** RAM code is rebuilt (Ethernet IORegion).    ** Initialmicrode for ethernet is rebuilt and its name is changed to EtherInitialDove.db to EtherInitialDuke.db(Ethernet IORegion).    ** The bigger ROM Chip is introduced, from 64Kbit to 128Kbit chip(bigger ROM Code).    ** CmosDiskplay hander is moved into ROM, because we couldn't find the way for calcurating the new address of the handler in RAM(bigger ROM Code).       The old one:  (4000'x + OFFSET) + CodeSegment(FC000'x). In this case, the first addition (4000'x + OFFSET) never have the carry.  The result is the correct address of the handler (OFFSET).       In the new one, we have to change the CodeSegment; from FC000'x to F8000'x, and used the same algorithm as before, like (8000'x + OFFSET) + CodeSegment(F8000'x). In this case, the first addition(8000'x + OFFSET) have the carry and the result isn't the correct address of the handler. So, the handler is moved into ROM because we no longer have to calcurate its address by the above algorithm.    ** As for Bermuda, the start address where the rom code is in is changed from C000'x to BE00'x(from the view of Opie address).    ++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa. In this case, the processor-type is investigated in BiparallelPortHeadDove through ProcessorFaceExtras2.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ++ Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyHeadDove is modified.      Note: Booting from such floppy isn't supported.++ New timer software is provided.  -- This is not for Duke, but for future Diana-StandAlone.       ARs FIXEDSS-FX#AR24(SS-XC#AR13786)		Fixed	SystemLockProblems on FreeHandDrawing TestSS-FX#AR6,26	Fixed	Space.Error[stillMapped]--- VP Gaiji Test and BitMapFrameTest and others.SS-FX#AR31	Fixed	OFLDiag65536BadPageTrouble when use "ScanForNewBadPage"SS-FX#AR32	Fixed	Compatibility of 5inchOFLDiagFloppy(Duke/Diana)		WHERE TO GET SOFTWAREAll Public Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0g on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0g (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available.In this update, New Boot PROM is introduced. If you use the new one, only F3-6 and F7-6 is availabe for net-booting. This is because there are no BWS bootfile/Installer based on this update yet. When they are available, we will change the bootservice slot and send a message.  In IWA area(Net No = 093), F3-X, F7-X will be updated.For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, large BootPROM(128kBit-chip).F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDuke.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (based on Pilot 15.0g)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDuke.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDuke.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, large BootPROM(128Kbit chip))F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDuke.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot (based on pilot 15.0g)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDuke.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDuke.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootFor Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, former BootPROM(64KBit-chip).)F3-6 (F7-6 : MoonDuke)Key: 25200004406	EtherInitialDove.dbKey: 25200004416	MoonDuke.dbKey: 25200004426	MesaDuke12K.dbkey: 25200004436	DukeTest.germKey: 25200004446	InstallerNSDuke.boot  (based on Pilot 15.0f)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0h and hardware as Duke. It helps speed attentionto the problem if the subject line begins with the name of the subsystem involved in the problem reported.The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Shou:OSBU north:Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors//Toru.*start*22590 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 25 May 89 15:37:20 +0900 (Thursday)Subject: Pilot15.0i update for release and manufacturing,  AgainFrom: TokunagaTo: DukeImplementorscc: Tokunaga  Pilot 15.0, known as Oze, has been updated. This update, Pilot 15.0i, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0i as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATION	PROBLEMS AND ARsCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0i differs from prior-15.0i. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATE(1) Fixing the bug on shrinking  mapped file   * Taking care of MapLog when freeing the mesa virtual memory corresponding to the     shirinked file page.   * We've noticed that the type of swap unit of VM-Runs in a map unit isn't always same     on this release, because of speeding the vm operaiotn up.      So, cheking the swap unit type of all VM-Run entres in a map unit and maintaining Swap Unit Data      Table as well as VM Run Table in this update.   * In the former scheme of shrinking mapped file (pilot 15.0h's), the new file     size should be in the backing file region of a map unit.      In this update, you can set the size beyond it, in other words,      the new file size can be less than the start page of the backing file region of the map     unit, unless the new size is in another backing file region of another map unit.   * SpaceImplC.mesa (MONITOR module) is created.     To manage the bogus Mesa virtual memory by shrinking a file efficiently and precisely,  the variable"mapUnitIndex" which     is incremented by each creating map unit is introduced.  This incrementing operation     should be done exclusively.   * In order to find map unit from file lock handle efficiently, we maintain a pointer to      a entry of VM Run Table which partially unmapping have been done.       (2) Deleting mapped file    You can delete a file which is mapped to Mesa virtual memory.     On this case, All of Mesa virtual memories which are on the file are always freed and     MapLog is also maintained.                NOTE :       Both shrinking and deleting mapped file aren't recommended from the perfomance point of view.        If you are going to write new code, be careful not to doing that.	   	   	   (3) Offline Diagnostics    Rebuilt with new pilot kernel.    CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on Rev.F (RDCE3F) version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ Pilot VM Management   + File Locking mechanism is changed.       You can surpress the Space.Error[stillMapped] by setting "boot switch : \347". (See PilotSwitchesExtra9.mesa )   + VMImpl.ProcessBatches        When the parameter "options" is [unmappedProcessing: don't care, intervalOrSwapnits: exactInterval, checkInOption: leaveCheckedOut], and the interval for batch-processing is across two swapunits, the system hang because the whole last swapunit has been "checked-out" when the system tries to process the next interval for batch-processing.    New one expands the interval for batch-processing in order not that the intervale never be accross two swapunits.   + shrink mapped file     The former labelless-pilot raises the Space.Error[stillmapped] when clients try to shrink a file which has been still mapped to Mesa virtual memory. New labelless-pilot (pilot 15.0h or after) takes care of such case with a exception mentioned below.      exceptions:        If the file pages which are going to shrinked are mapped to more than 1 map-unit,            Space.Error[stillmapped] is still raised.         The page number of bogus mesa virtual memory are cached in VM-layer and        when client do Space.Unmap[], they will be cleared.       ++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for track caching.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.   + The vcmDisk parameter for Fujitsu M2243T(80MB) is changed to TRUE   + DiagEtherDove14.df and DiagEtherDoveCommon.df are changed to DiagEtherDuke15.df and EiagEtherDukeCommon.df respectively.   + Change the disk label data from diagnostics' original to the one that pilot assumes when formatting the disk including track-formatting.   + Change PreCompensationCylinder for Mitsubishi MR548, and HeadLandingZone for Fujitsu M2227D   + Change the copyright   + Change beginDST and endDST lowLimit to 0++ New Ethernet low-level stuff.In order to fix the SS AR 13772 for Duke, a lot of changes are done.     + New queue-locking mechanism are introduced.     In order to support this,  the size of Ethernet IORegion is grown and the rom code for ethernet is grown.    In the mesa microdode, a new MOP-code is introduced implemented in MiscDaybreak.mc.    The new mesa difinition; aLOCKQUEUE(206B) is introduced for the new MOP-Code in ESCAlphaExtras3.mesa in MesaFriends.df.      The bigger IORegion for Ethernet and the bigger rom-code requires a lot of changes. see below(find SIDE EFFECTS).    + EthernetHeadDove is modified to use the new queue-locking mechanism.    SIDE EFFECTS: The side-ffects of the bigger IORegion and bigger rom code are scattered.     ** RAM code is rebuilt (Ethernet IORegion).    ** Initialmicrode for ethernet is rebuilt and its name is changed to EtherInitialDove.db to EtherInitialDuke.db(Ethernet IORegion).    ** The bigger ROM Chip is introduced, from 64Kbit to 128Kbit chip(bigger ROM Code).    ** CmosDiskplay hander is moved into ROM, because we couldn't find the way for calcurating the new address of the handler in RAM(bigger ROM Code).       The old one:  (4000'x + OFFSET) + CodeSegment(FC000'x). In this case, the first addition (4000'x + OFFSET) never have the carry.  The result is the correct address of the handler (OFFSET).       In the new one, we have to change the CodeSegment; from FC000'x to F8000'x, and used the same algorithm as before, like (8000'x + OFFSET) + CodeSegment(F8000'x). In this case, the first addition(8000'x + OFFSET) have the carry and the result isn't the correct address of the handler. So, the handler is moved into ROM because we no longer have to calcurate its address by the above algorithm.    ** As for Bermuda, the start address where the rom code is in is changed from C000'x to BE00'x(from the view of Opie address).    ++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa. In this case, the processor-type is investigated in BiparallelPortHeadDove through ProcessorFaceExtras2.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ++ Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyHeadDove is modified.      Note: Booting from such floppy isn't supported.++ Timer software (not for Duke but for Diana)  + Now, Diana can boot up without time server.      OthelloOpsImpl is modified and several files in PilotMisc.df are rebuilt.   ARs FIXEDSS-FX#25: uncaughtError[type: stillMapped] in Module SpaceImplA(TS#37 6060VPConversion)SS-FX#33: Internal cached data of RDD parameter(MR548) chnaged in OFLDiagSS-Fx#43: Crash on Error[stillmapped] by editing and then deleting Gaiji-Icon.          (Gaiji-Icon de bitmap wo copy sareta ku-ten' wo henshuu/sakojo de Crash)SS-FX#52: Crash on ContainerList          (ContainerList no sakusei de SystemErorr)SS-FX#53: Crash on Making Gaiji-floppy          (GaijiFloppy sakusei de SystemError)SS-FX#56: Press StopKey during TimeSet then return to EnetTest SystemCrash (Offline Diagnostics)SS-FX#57: TimeSet Uset Interface Change  (Offline Diagnostics)WHERE TO GET SOFTWAREAll Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<APilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	Converter(Holder)	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0i on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0i (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.The several documentation in Converter show how to use converter software that is for changing the disk formatted by labelled pilot(pilot14.0) to this world(pilot 15.0, labelless world).  BOOTSERVER INFORMATIONInstallerNSDuke.boot or OthelloDuke.boot must be installed on the boot server in the appropriate slot number, along with the microcode and etherinitial from the update directory. Boot this Installer, and install the other bootfiles on the disk. the Installer is not part of the Pilot release. So we have provided an OthelloDuke.boot, untill the Installer bootfile is available. In IWA area(Net No = 093), F3-X, F7-X will be updated.For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, large BootPROM(128kBit-chip).F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDuke.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (based on Pilot 15.0h)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDuke.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDuke.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, large BootPROM(128Kbit chip))F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDuke.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot (based on pilot 15.0h)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDuke.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDuke.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootFor Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, former BootPROM(64KBit-chip).)F3-6 (F7-6 : MoonDuke)Key: 25200004406	EtherInitialDove.dbKey: 25200004416	MoonDuke.dbKey: 25200004426	MesaDuke12KTest.dbkey: 25200004436	DukeTest.germKey: 25200004446	InstallerNSDukeTest.boot  (based on Pilot 15.0f)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0i and hardware as Duke. It helps speed attention to the problem if the subject line begins with the name of the subsystem involved in the problem reported.The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.//Toru.*start*22417 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 20 Jun 89 16:53:32 +0900 (Tuesday)Subject: Pilot15.0j update for LAUNCHFrom: TokunagaTo: DukeImplementorscc: TokunagaPilot 15.0, known as Oze, has been updated. This update, Pilot 15.0i, support the Duke/Dahlia/DayBreak(8K WCS required) hardware. The intended client of this release is the WorkStation organization, not Services. This update contains Labelless and MDS Relieved software for above 3 hardwares.To eliminate as many delays as possible in bringing up software on the Duke/Dahlia/DayBreak hardware, it is very important that we fully test the software as soon as possbile. It is important that ALL Oze System Testers upgrade to 15.0i as soon as possbile, including new RDC ROM, microcode, germs and bootfiles. If you have not upgraded 15.0, then you will first have to convert or re-format your Duke/Dahlia/DayBreak, since 15.0 of Pilot are incompatible with 14.0x versions. See DukeInstallation.doc for details on upgrading Duke/Dahlia/DayBreak to Labelless Pilot.This message contains these parts.	CONTENT AND CHANGES FOR THIS UPDATE	CONTENT AND CHANGES FOR OZE	ARs FIXED	WHERE TO GET SOFTWARE	WHERE TO GET DOCUMENTATION	BOOTSERVER INFORMATIONCONTENT AND CHANGES FOR THIS UPDATE describes how 15.0j differs from prior-15.0i. CONTENT AND CHANGES FOR OZE describes how Oze (15.0) in general differs from Sisquoc (Pilot 14.*). ARs FIXED lists ARs fixed in this update. WHERE TO GET SOFTWARE and WHERE TO GET DOCUMENTATION identify the locations of the software and documentation, respectively, for this release. BOOTSERVER INFORMATION details the boot server profile entries for supporting Duke/Dahlia/DayBreak. PROBLEMS AND ARs describes how to submit trouble reports against the Pilot 15.0 software and documentation.CONTENT AND CHANGES FOR THIS UPDATEAs for this update(Pilot 15.0j), Pilotkernel isn't rebinded.  You don't have to remake your bootfiles. (1) BiparallelPort  To keep commonality with Pilot 14.0,  use the same interface modules (e.g., BiParallelPortChannel, etc) as in Pilot14.0.  The required modifications are moved to extras interface modules (e.g., BiParallelPortChannelExtras, etc).  SS-FX#: 59  (2) Offline Diagnostics  "PhysicalVolume.Offline" now is called when finishing "PageScavenger" Command.  Change the way of getting "alignment of DISK IOCB": In this update,  the alignment is got from DiskChannel.    The both modifications are in DiskUtilityMiscImplDove.mesa, and rebuilt diagnostics bootfile.  SS-FX#: 64, 65    CONTENT AND CHANGES FOR OZEThis update is based on Pilot 13.0 and 14.0; PilotKernel and related stuffs are brought from Pilot 13.0, the low-level software for Dove/Dahlia are from Pilot 14.0. It is intended to support the Duke hardware; mentioned below are many changes and enhancements.++  Faster Hardware Clock.System clock is changed from 125ns to 100ns.  ++  Support larger main memory than Daybreak/DahliaFull 4MBytes main memory is supported.++ New rigid disk is supported.Toshiba MK 134FA (54MB), Mitsubishi MR335(50MB), and Mitsubishi MR548(80MB) are now supported.++ New Machine type is added.Now, Duke, Diana, and Dune are new machine-types.  (Note: ProcessorFaceExtras, ProcessorFaceExtras2)++ Enhanced microcode.ByteBlt.mc, Block.mc, Xfer.mc, and Stack.mc are tuned.++ larger WCS16K WCS is now supported.++ MesaDuke12K.db and MesaDuke8K.db is updated.   It includes the new handler code of Biparallel Port.   ++ Pilot EnhancementSwap unit optimization is done. This requires new microcode stuff; VMFind.mc.The algorithm for determining the default-swapunit-size is changed. The former version didn't do any calculation for it. It was always 16 page. The current one determines it depending on the real-memory-size, up to 32 page.      ratioRealMemorySizeToDefaultSwapUnitSize: CARDINAL = 256;   optimizedSwapUnitSize: Space.SwapUnitSize = 32;   optimizedThreshold: Environment.PageCount = 7168;     -- 7168'd = 2000'h(real memory size)      		  - 300'h(no memory in case of DayBreak/Dahlia)		  - 100'h(map table  for 24bit virtual memory)     --        = 7424 - 256   defaultSwapUnitSize ¬      IF SpecialSpace.realMemorysize < optimizedThreshold     THEN       Space.SwapUnitSize[SpecialSpace.realMemorySize/ratioRealMemorySizeToDefaultSwapUnitSize)     ELSE        optimizedSwapUnitSize;++ RDC(Rigid Disk Controller) ROM CodeNew RDC ROM Code includes Track-Read function. It will work on Dahlia/Daybreak with Pilot 14.0 software, too. It is based on Rev.F (RDCE3F) version of DayBreak RDC ROM.++ Labelless Pilot and BasicHeads is available for Duke including Track-Buffering.   NOTE: Since Labelless Pilot has "file locking mechanism" for vm management, it requires about 430 disk-page as a tFileLockFile.++ The scheme of the Pilot file allocation is changed. The pilot files will be allocated not from the beginnig of the Volume, but from the center of the Volume for improving the performance.    + The restriction of the volume size up to 65503 disk page is relieved.++ Pilot VM Management   + File Locking mechanism is changed.       You can surpress the Space.Error[stillMapped] by setting "boot switch : \347". (See PilotSwitchesExtra9.mesa )   + VMImpl.ProcessBatches        When the parameter "options" is [unmappedProcessing: don't care, intervalOrSwapnits: exactInterval, checkInOption: leaveCheckedOut], and the interval for batch-processing is across two swapunits, the system hang because the whole last swapunit has been "checked-out" when the system tries to process the next interval for batch-processing.    New one expands the interval for batch-processing in order not that the intervale never be accross two swapunits.   + Shrink mapped file     *The former labelless-pilot raises the Space.Error[stillmapped] when clients try to shrink a file which has been still       mapped to Mesa virtual memory. New labelless-pilot (pilot 15.0h or after) takes care of such case with a exception       mentioned below.      exceptions:        If the file pages which are going to shrinked are mapped to more than 1 map-unit,            Space.Error[stillmapped] is still raised.         The page number of bogus mesa virtual memory are cached in VM-layer and        when client do Space.Unmap[], they will be cleared.     *Taking care of MapLog when freeing the mesa virtual memory corresponding to the       shirinked file page.        *We've noticed that the type of swap unit of VM-Runs in a map unit isn't always same      on this release, because of speeding the vm operaiotn up.       So, cheking the swap unit type of all VM-Run entres in a map unit and maintaining Swap Unit Data       Table as well as VM Run Table in this update.     *In the former scheme of shrinking mapped file (pilot 15.0h's), the new file      size should be in the backing file region of a map unit.       In this update, you can set the size beyond it, in other words,       the new file size can be less than the start page of the backing file region of the map      unit, unless the new size is in another backing file region of another map unit.     *SpaceImplC.mesa (MONITOR module) is created.      To manage the bogus Mesa virtual memory by shrinking a file efficiently and precisely,  the variable"mapUnitIndex" which      is incremented by each creating map unit is introduced.  This incrementing operation      should be done exclusively.     *In order to find map unit from file lock handle efficiently, we maintain a pointer to       a entry of VM Run Table which partially unmapping have been done.   + Deleting mapped file    You can delete a file which is mapped to Mesa virtual memory.     On this case, All of Mesa virtual memories which are on the file are always freed and     MapLog is also maintained.          NOTE :       From the perfomance point of view,  both shrinking and deleting mapped file aren't recommended.        If you are going to write new code, never use such bad manner for managing your storage. ++ PilotSwitchesExtra9.mesa is added for testing Track-Buffing and FileLocking.  disableTrackCaching: PilotSwitches.PilotDomainC = '\346;  -- Disable doing track caching, whether machine supports caching or not)  disableMappedFileLocking: PilotSwitches.PilotDomainC = '\347;  -- Disable doing mapped file locking (so don't raise Space.Error[stillMapped]).  -- The following switches are for track caching.  There interpretation is as  -- follows (note that dn = down means that switch is used):  --  \346   \340   \341  --   dn     -      -     disable track caching totally  --   up     up     up    system defined number of track buffers  (12 tracks)  --   up     up     dn    8 track buffers  --   up     dn     up    16 track buffers  --   up     dn     dn    32 track buffers  trackCachingSwitch1: PilotSwitches.PilotDomainC = '\340;  trackCachingSwitch2: PilotSwitches.PilotDomainC = '\341;++ LabellessDiskConverter is available for system test.  It will be used for moving from Pilot 14.0(labelled world) to Pilot 15.0(labelless world) without re-formatting the disk. See DukeInstallation.doc.   + A volume's ETable files are created on separate disk tracks.  This protects against losing the volume if a single track is lost in the future.   + The converter now protects against losing the volume if the LV root page is lost during conversion.   + The newly converted LV root and marker pages are written with new (labelless) labels, out of order.  This shortens the section where a crash will leave the disk impossible to bring online either labelled or labelless.   + The Ether Boot command prompts the Duke etherboot file number instead of the old DLion one.   + Set time uses Japanese time values instead of California time.  The explanation is also slightly modified.  (The time questions and explanations appear if booting finds no time server.)   + Othello's "Type ControlP to muddle on........" mechanism has been replaced by a message, "Command failed. Consider rebooting.".   + The commands "Make page bad" and "List bad pages" now work when the physical volume is offline and after the bad page list has been converted.   + A list of all new bad pages is displayed upon completion or abort.   + There is an additional warning: Physical volume will need scavenging in labelless world.   + The command "Physical volume scavenge" is no longer allowed after conversion progresses past "crossing into new world!".   + Nothing is imported from Othello DF files.   + Fixed AR 13581: Address Fault in DiskConversionETableImpl.  (Track-counting algorithm used in creating the two ETable files on separate tracks was wrong.)   + The Make Page Bad and List Bad Pages commands now work for the offline case.   + Trying to Online Rd0 after converting now gets an appropriate error message.   + Conversion will abort after 50 consecutive bad pages or 100 consecutive label-convert failures.   + Conversion checks over all logical volumes before aborting with an "LV needs repair" case   + A new value, scanProblemAfterConversion, was added to DiskConversion.CompletionStatus.   + In determining whether a volume has enough space for successful conversion, the converter reserves the number of pages used by the bootfiles it just deleted.  That is so there will be enough room to fetch new bootfiles after conversion.   + The missing startup advice (Type DEL to abort, etc.) was added.   + Assorted bugs, space leaks, missed signals, and message format problems were fixed.++ Offline Diagnostics and System Configuration Utility is available for Pilot 15.0.   + The fixed AR13555 version is now available. You can do formatting without the tedious and the extra operations when you change the disk type. (See DukeInstallation.doc)   + The new restriction for OfflineDiagnostics.  If you set a disk as a larger disk, like setting MK134FA(Toshiba 50MB) as  MK56FB(Toshiba 80MB),  OfflineDiagnostics will crash or fail formatting. (See OzeRestriction.doc)     It is due to the difference of number of R/W head between both disks and the returned status from rigid-disk when OfflineDiagnostics try to format the track which doesn't exit.   + The vcmDisk parameter for Fujitsu M2243T(80MB) is changed to TRUE   + DiagEtherDove14.df and DiagEtherDoveCommon.df are changed to DiagEtherDuke15.df and EiagEtherDukeCommon.df respectively.   + Change the disk label data from diagnostics' original to the one that pilot assumes when formatting the disk including track-formatting.   + Change PreCompensationCylinder for Mitsubishi MR548, and HeadLandingZone for Fujitsu M2227D   + Change the copyright   + Change beginDST and endDST lowLimit to 0++ New Ethernet low-level stuff.In order to fix the SS AR 13772 for Duke, a lot of changes are done.     + New queue-locking mechanism are introduced.     In order to support this,  the size of Ethernet IORegion is grown and the rom code for ethernet is grown.    In the mesa microdode, a new MOP-code is introduced implemented in MiscDaybreak.mc.    The new mesa difinition; aLOCKQUEUE(206B) is introduced for the new MOP-Code in ESCAlphaExtras3.mesa in MesaFriends.df.      The bigger IORegion for Ethernet and the bigger rom-code requires a lot of changes. see below(find SIDE EFFECTS).    + EthernetHeadDove is modified to use the new queue-locking mechanism.    SIDE EFFECTS: The side-ffects of the bigger IORegion and bigger rom code are scattered.     ** RAM code is rebuilt (Ethernet IORegion).    ** Initialmicrode for ethernet is rebuilt and its name is changed to EtherInitialDove.db to EtherInitialDuke.db(Ethernet IORegion).    ** The bigger ROM Chip is introduced, from 64Kbit to 128Kbit chip(bigger ROM Code).    ** CmosDiskplay hander is moved into ROM, because we couldn't find the way for calcurating the new address of the handler in RAM(bigger ROM Code).       The old one:  (4000'x + OFFSET) + CodeSegment(FC000'x). In this case, the first addition (4000'x + OFFSET) never have the carry.  The result is the correct address of the handler (OFFSET).       In the new one, we have to change the CodeSegment; from FC000'x to F8000'x, and used the same algorithm as before, like (8000'x + OFFSET) + CodeSegment(F8000'x). In this case, the first addition(8000'x + OFFSET) have the carry and the result isn't the correct address of the handler. So, the handler is moved into ROM because we no longer have to calcurate its address by the above algorithm.    ** As for Bermuda, the start address where the rom code is in is changed from C000'x to BE00'x(from the view of Opie address).    ++ FloppyTape stuffs is brought from the latest 14.0 release to deal with bad sectors on Floppy-Tape on a DayBreak/Dahlia/Duke correctly.Note: This is because of a bug in the Daybreak heads which requires the 14.0 FloppyTape to look at an internal heads structure....The DLight 13.0 heads correctly handle bad pages, and therefore the 13.0 version of FloppyTape does not look at this internal heads structure.++  Now, support XP-11 local printing.    + BiparallelPortChannelDriver, Head, and Handler are changed.        Basically, the modification is to get the performance improvement, but on the case of DayBreak, the old code will run as before in order to avoid a future confusion. The old code transfers a 512byte-block from the buffer which is located at a fixed place to SPO-PWB by using IOP-DMA, vice-versa. The buffer can't be used by application software.  So it is required to move from the buffer to application's buffer, or vice-versa, by ByteBLT.   The new one removes the procedure of calling ByteBLT when it runs on Duke/Dahlia, except DayBreak. IOP-DMA can transfer each  512byte-block from application's buffer directly, vice-versa. In this case, the processor-type is investigated in BiparallelPortHeadDove through ProcessorFaceExtras2.    + Boot Diagnostic's code is changed.      XP-11 doesn't have any ability to build a bitmap pattern of the passed "Character code" from the host machine. The boot diagnostic's code for MP = 1E02 and 1E03, MoonPPO.def and MoonPPO.asm, are changed. The new code can distinguish the machine type, whether DayBreak or Dahlia/Duke, and if it finds Dahlia/Duke, it build a bitmap pattern of cross stripes and send it to the printer.  If it finds Daybreak, the the "Character code" is send as it was.      ++ Floppy 1024bytes/sector format is supported.   Pilot provides a consecutive real-page(2 pages or more) for supporting floppy 1024 bytes/sector.  Its scheme is almost same as  PC emulation's one.     New public/friends/private interfaces are introduced,  FloppyChannelExtras.mesa, VMExtras2.mesa, and MStoreExtras.mesa respectively. Modified implementation modules for above 3 interfaces are FloppyChannelImpl, VMImpl, and MStoreImpl respectively.    Of course, FloppyHeadDove is modified.      Note: Booting from such floppy isn't supported.++ Timer software (not for Duke but for Diana)  + Now, Diana can boot up without time server.      OthelloOpsImpl is modified and several files in PilotMisc.df are rebuilt.   ARs FIXEDSS-FX#59: BiParallelPort interface supportSS-FX#64: System crash with MP=935 after PageScavenger in OfflineDiagnostics          (Page Scavengerÿ$rÿ<Bÿ9Tÿ8eÿ MP=[0935]ÿ$Gÿ%79F`(iÿ!<ÿ )SS-FX#65: System crash after Confidence-Test in OfflineDiagnostics          (ConfidenceTestÿ$rÿ<Bÿ9Tÿ8eÿ$Kÿ%79F`(iÿ!<ÿ )WHERE TO GET SOFTWAREAll Duke software, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat: it has not subdirectories except a Doc> subdirectory, which contains documentation files for Oze.	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>				       >15.0>Doc>				       The archive directory contains all sources and other software contributing to Oze. Like Humboldt, there are not separate subdirectories containing the files for particular updates. Rather, the highest version numbered file on this direcotry is always the file for the latest update to Oze System Test. This direcotry is not float, but has a structure convenient for the Pilot (Duke) implementors (the same general structure as for the Mesa 14.* releases). The archive directory (withh it s DF> aubdirectory) are:	[Man:IWA:Fuji Xerox]<APilot>15.0>				   >15.0>DF>				   The minimum recompiled Mesa-Stuffs for debugging and testing Pilot15.0 are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa> WHERE TO GET DOCUMENTATIONDocumentation describing Oze is on:	[Man:IWA:Fuji Xerox]<AlphaPilot>15.0>Doc>Oze documentation inclcudes:	DukeInstallation.doc	DukeMachineIDChange	DukeMachineIDChange.ip	Oze.nsMail	OzeRestriction.doc	Fixed15.0ARs	(To avoid unnecessary editing, most documentation refers to the public directory, <Pilot> rather than to <AlphaPilot>.)	DukeInstallation.doc describes how to install Pilot 15.0i on to Duke/Dahlia/DayBreak in step by step procedure. And it includes instructions for converting from labelled Pilot to labelless Pilot.DukeMachineIDChange show how to modify the DayBreak Hardware to be Duke from the point of machine-type's view, not inlcluding Boot-PROM.DukeMachineIDChange.ip is the interpress file of DukeMachineIDChange.OzeRestriction.doc lists known restictions (and workarounds) for Pilot 15.0i (including those from earlier releases, for completeness)Fixed15.0ARs lists the numbers, status, and subject of all 15.0 ARs and some of derived from 14.0 ARs which have been fixed, declined, and superceded.BOOTSERVER INFORMATIONAll boot files are the lastest version. In IWA area(Net No = 093), F3-X, F7-X will be updated.For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, large BootPROM(128kBit-chip).F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDuke.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (based on Pilot 15.0i)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDuke.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDuke.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, large BootPROM(128Kbit chip))F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDuke.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot (based on pilot 15.0i)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDuke.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDuke.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootFor Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, former BootPROM(64KBit-chip).)F3-6 (F7-6 : MoonDuke)Key: 25200004406	EtherInitialDove.dbKey: 25200004416	MoonDuke.dbKey: 25200004426	MesaDuke12KTest.dbkey: 25200004436	DukeTest.germKey: 25200004446	InstallerNSDukeTest.boot  (based on Pilot 15.0f)/F3-7 (F7-7)Reserved for testing.No longer boot-service available for Psuedo-Duke version 2, 8KWCS, DayBreak BootPROM, New RDC ROM, so called Labelless-Pilot on Dahlia/DayBreakPROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0i and hardware as Duke. It helps speed attention to the problem if the subject line begins with the name of the subsystem involved in the problem reported.The AR Database is our main tool for tracking the many problem reports that we receive during System Test. We also depend on patterns of problems reported in AR's to develop a global picture of the state of the system and of the progress of System Test.After submitting an AR, plese refer all problems to Yoshie:IWA:Fuji Xerox, Tokunaga:IWA:Fuji Xerox. We can only guarantee attention, however, to problems documented in AR's.The DukeImplementors*start*04123 00071 UU @00045 01536 ftffffffffffffffffffffffffffffff@Sender: Tohru Tokunaga:IWA:Fuji XeroxDate: 20 Oct 89 18:57:58 +0900 (Friday)Subject: Pilot15.0.1 releaseFrom: TokunagaTo: DukeImplementorscc: TokunagaReply-to: TokunagaThis message shows the changes in Pilot 15.0.1 release. The bootservice for new bootable staff and cross reference file are not yet available, but will be announced soon.The contents are:	CONTENT AND CHANGES 	ARs FIXED	WHERE TO GET SOFTWARE	BOOTSERVER INFORMATIONCONTENT AND CHANGES describes the changes from Pilot 15.0. WHERE TO GET SOFTWARE identify the locations of the software for this release. The slots of bootservice are the same as ones in Pilot15.0.CONTENT AND CHANGES(1) Pilot microcode is rebuilt due to the register-confliction between the microcode for image-handling used in Jordash and the microcode for assisting Mesa VM handling.(2) Germs and BasicHeadsDuke are rebuilt becasue ProcessorHeadDove is modified for fixing SS-FX#107.(3) PilotKernel.bcd/UtilityPilotKernel.bcd is rebuilt due to the bugs in FileMgr/FileBasics/ResMemMgr layer in Pilotkernel.(4) OfflineDiagnosticsDuke.boot and OFLFloppyExecDuke.boot is rebulit becasue of fixing few bugs, and remaking the UtilityPilotkernel.bcd, BasicHeadsDuke.bcd.ARs FIXEDSS-FX#106: DukeWSÿ$Gÿ%U!$kA'C/ÿCfÿ$Kÿ%79F`(iÿ!<ÿ SS-FX#107: Process illegal timeoutSS-FX#108: Possiblility :  VMDataUtilities: Bug[transferProcTableTrashed]		(derived from AR13155(SystemSoftware:Osbu North:Xerox))SS-FX#109: ÿ%G3s]ÿ!<ÿ%8s0ÿCfÿ$Kÿ%GCImC/ÿ SS-XC#13538: Incorrect disk displaySS-XC#13889: Rigid Disk Parameters read from EEPROM, not SDD pg., in Normal User modeWHERE TO GET SOFTWAREAll changed software and related ones for this release, including bootfiles and microcode, can be found on the System Test Directory. This directory is flat.	[Edwin:IWA:Fuji Xerox]<AlphaPilot>15.0.1>				       The archive directory contains all sources and other software contributing to this release. 	[Man:IWA:Fuji Xerox]<APilot>15.0.1>				   >15.0.1>DF>The bootfiles, TajoDuke.boot, OthelloDuke.boot for this release are stored in;	[ManSeven:IWA:Fuji Xerox]<IMesa>Tajo>Public>TajoDuke.boot				       >Othello>Public>OthelloDuke.bootBOOTSERVER INFORMATIONAll boot files are the lastest version. In IWA area(Net No = 093), F3-X, F7-X will be updated.For Pure Duke (Faster PWBA, 16KW WCS, Full 4MByte Main Memory, large BootPROM(128kBit-chip).F3-0 (F7-0 : MoonDuke)Key: 25200004400	EtherInitialDuke.dbKey: 25200004410	MoonDuke.dbKey: 25200004420	MesaDuke12K.dbkey: 25200004430	Duke.germKey: 25200004440	InstallerNSDuke.boot  (based on Pilot 15.0.1)F3-1 (F7-1 : MoonDuke)Key: 25200004401	EtherInitialDuke.dbKey: 25200004411	MoonDuke.dbKey: 25200004421	MesaDuke12K.dbkey: 25200004431	Duke.germKey: 25200004441	OfflineDiagnosticsDuke.bootF3-2 (F7-2 : MoonDuke)Key: 25200004402	EtherInitialDuke.dbKey: 25200004412	MoonDuke.dbKey: 25200004422	MesaDuke12K.dbkey: 25200004432	Duke.germKey: 25200004442	OthelloDuke.bootFor Pseudo-Duke Version 1 (Dahlia/DayBreak PWBA, 8KW WCS, large BootPROM(128Kbit chip))F3-3 (F7-3 : MoonDuke)Key: 25200004403	EtherInitialDuke.dbKey: 25200004413	MoonDuke.dbKey: 25200004423	MesaDuke8K.dbkey: 25200004433	Duke.germKey: 25200004443	InstallerNSDuke.boot (based on pilot 15.0.1)F3-4 (F7-4 : MoonDuke)Key: 25200004404	EtherInitialDuke.dbKey: 25200004414	MoonDuke.dbKey: 25200004424	MesaDuke8K.dbkey: 25200004434	Duke.germKey: 25200004444	OfflineDiagnosticsDuke.bootF3-5 (F7-5 : MoonDuke)Key: 25200004405	EtherInitialDuke.dbKey: 25200004415	MoonDuke.dbKey: 25200004425	MesaDuke8K.dbkey: 25200004435	Duke.germKey: 25200004445	OthelloDuke.bootF3-6, 7(F7-6,7)Reserved for testing PROBLEMS AND ARsPlease submit all problem reports via the System Software Adobe (AR) System (System Software-FX:IWA:Fuji Xerox), specifying the version as 15.0.1 and hardware as Duke. It helps speed attention to the problem if the subject line begins with the name of the subsystem involved in the problem reported.The DukeImplementors