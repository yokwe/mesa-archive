-- File: DiagEtherErrorCheck.mesa - last edit:-- MXT                 11-Jun-85 18:02:11-- Copyright (C) 1985 by Xerox Corporation. All rights reserved.DiagEtherErrorCheck: DEFINITIONS =  BEGIN  DiagEtherErrorCheckImpl: PROGRAM;  Error: BOOLEAN;  MPCode: CARDINAL;  PublicErrorCheckArray: LONG DESCRIPTOR FOR PACKED ARRAY OF expectedStatus;  expectedStatus: TYPE = MACHINE DEPENDENT{    -- HardFace.Status    i586CompletionTrue,     i586CompletionFalse,     i586BusyTrue,    i586BusyFalse,    i586OkayTrue,    i586OkayFalse,        -- variant part of HardFace.Status    -- aborted: individualAddr, configure, multicastAddr, transmit    i586CmdAbortedTrue, -- indicates 586's commands are aborted.    i586CmdAbortedFalse,-- indicates 586's commands are not     -- diagnose command.    diagnoseFailedTrue, -- 586's diagnose command are failed.    diagnoseFailedFalse, -- 586's diagnose command are completed.    -- xmit* => transmit status.    xmitNoCRSTrue, --transmit was failed due to the rack of carrier detection.    xmitNoCRSFalse,     xmitLossOfCTSTrue, -- transmit was failed due to the loss of Clear To Send signal.    xmitLossOfCTSFalse,     xmitUnderRunTrue, -- transmit was failed due to the DMA underrun.    xmitUnderRunFalse,     xmitDefferedTrue, --     xmitDefferedFalse,     xmitSqeTestTrue, -- This bit indicates collision detection logic on the transceiver works fine.    xmitSqeTestFalse, -- may be some trouble in collision detection logic on the transceiver.    xmitTooManyCollisionsTrue, -- transmit was teminated.    xmitTooManyCollisionsFalse,         firmwareBusyFalse,  --    firmwareBusyTrue,  --    overrunFalse,  --    overrunTrue,  --    verifyErrorFalse,  --    verifyErrorTrue,  --    -- followings are the expected status for the receiveFrame.    CRCErrorTrue,  --     CRCErrorFalse,  --    ALNErrorTrue,  --    ALNErrorFalse,  --    RSCErrorTrue,  --    RSCErrorFalse,  --    OverRunErrorTrue,  --DMA overrun.    OverRunErrorFalse,  --    FrameTooShortTrue,  --    FrameTooShortFalse,  --    NoEOFFlagTrue,  -- This bit is effective only in the padding mode.    NoEOFFlagFalse,  --    -- IOFace.IOCBStatus    iocbDoneTrue,    iocbDoneFalse,    iocbHandledTrue,    iocbHandledFalse,    iocbOkayTrue,    iocbOkayFalse,    iocbFrameTooLongTrue,    iocbFrameTooLongFalse,    iocbIsDequeuedTrue,    iocbIsDequeuedFalse,        -- HeadFace.TDRTestResults    tdrLinkOKTrue,    tdrLinkOKFalse,    tdrXcvrProblemTrue,    tdrXcvrProblemFalse,    tdrOpenTrue,    tdrOpenFalse,    tdrShortTrue,    tdrShortFalse,        spare1,  --    spare2,  --    cmdTimedOutFalse,  --    cmdTimedOutTrue,  --    invalidChannelFalse,  --    goodCompletionFalse,  --    goodCompletionTrue,  --    spare3,  --    spare4,  --    spare5,  --    spare6,  --    spare7,  --    spare8,  --    last};  -- error masks arrays  ECNull: PACKED ARRAY [0..1] OF expectedStatus;  ECStandard1: PACKED ARRAY [0..8] OF expectedStatus;  CheckStatus: PROCEDURE [    errorMask: LONG DESCRIPTOR FOR PACKED ARRAY OF expectedStatus _      PublicErrorCheckArray, retryOnError: BOOLEAN _ FALSE];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  -- initializes the error checking arrays  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  InitErrorCheck: PROCEDURE [];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  -- does given number of retries plus tries error correction  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  <<  RetryOperation: PROCEDURE [			 retryCount: CARDINAL_ 10]		RETURNS [failureCount: CARDINAL_ 0,			 recovery: Recovery]; >>  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  -- reports the error and sets the proper MP Code  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ErrorReport: PROCEDURE [MPOffset: CARDINAL];  END...  --of DiagEtherErrorCheckLOGTime			By	Action 7-Feb-85 15:35:11	MXT	Created.13-Mar-85  9:39:08	MXT	Changed some items in expectedStatus.