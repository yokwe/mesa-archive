-- File: DiagEtherCmdDrive.mesa - last edit:-- MXT                 12-Jun-85 10:50:40-- Copyright (C) 1985 by Xerox Corporation. All rights reserved.-- DiagEtherCmdDrive.mesa---- Last Edited by MXT on 25-Feb-85 14:53:46---- Copyright (C) Xerox Corporation 1985. All rights reserved.--DIRECTORY  DiagEtherCmdDes  USING[CmdRecord],  EthernetHardFaceDove  USING[multicastIDLimit],  HostNumbers  USING[HostNumber, nullHostNumber],  Inline  USING[LowByte, HighByte];DiagEtherCmdDrive: DEFINITIONS IMPORTS Inline =   BEGIN OPEN HardFace: EthernetHardFaceDove;    DiagEtherCmdDriveImpl: PROGRAM;  -- TYPEs  ParamRecord: TYPE= RECORD [    dataMem: CARDINAL _ 0,    skipCount: CARDINAL _ 0,    tryCountMem: CARDINAL _ 0,    unitChange: CARDINAL _ 0,    unitMem: CARDINAL _ 0,    unitPos: BOOLEAN _ FALSE,    useSameDataBuffMem: CARDINAL _ 0,    item: BOOLEAN _ FALSE,    numberItem: CARDINAL _ 0,    byteCount: CARDINAL _ 0,    xmitData: CARDINAL ¬ 0,    xmitByteLength: CARDINAL ¬ 0,    packetType: WORD ¬ LOOPHOLE[0],    hostNumber: HostNumbers.HostNumber _ HostNumbers.nullHostNumber,    multicastIDs: ARRAY [0..HardFace.multicastIDLimit) OF HostNumbers.HostNumber _ ALL[HostNumbers.nullHostNumber],    configureParams: LONG POINTER TO ConfigureParametersRec _ NIL    ];  cmdDescriptionArray: LONG DESCRIPTOR FOR ARRAY OF DiagEtherCmdDes.CmdRecord;  paramArrayL1:	ARRAY [0..3] OF DiagEtherCmdDrive.ParamRecord;  ConfigureParametersRec: TYPE = MACHINE DEPENDENT RECORD[    unusedA(0:0..3): [0..16) _ 0,    byteCount(0:4..7): [0..15] _ 12, -- maximum bytes.    unusedB(0:8..11): [0..16) _ 0,    fifoLimit(0:12..15): [0..15] _ 8,    saveBadFrames(1:0..0): BOOLEAN _ TRUE,    syncReady(1:1..1): BOOLEAN _ FALSE,    unusedC(1:2..7): [0..64) _ 0,    externalLoopback(1:8..8): BOOLEAN _ FALSE,    internalLoopback(1:9..9): BOOLEAN _ FALSE,    preambleLength(1:10..11): {two(0), four(1), eight(2), sixteen(3)} _ eight,    addrTypeLoc(1:12..12): {desc(0), buffer(1)} _ buffer,    addrLength(1:13..15): [0..7] _ 6,    expBackoffMethod(2:0..0): {ethernet(0), alternate(1)} _ ethernet,    accContRes(2:1..3): [0..7] _ 0,    unusedD(2:4..4): [0..2) _ 0,    linearPriority(2:5..7): [0..7] _ 0,    interframeSpacing(2:8..15): [0..255] _ 96,    slotTimeLow(3:0..7): [0..255] _ Inline.LowByte[512],    retryNumber(3:8..11): [0..15] _ 15,    unusedE(3:12..12): [0..2) _ 0,    slotTimeHigh(3:13..15): [0..7] _ Inline.HighByte[512],    padding(4:0..0): BOOLEAN _ FALSE,    bitstuffing(4:1..1): BOOLEAN _ FALSE,    CRC16(4:2..2): BOOLEAN _ FALSE,    noCRCInsertion(4:3..3): BOOLEAN _ FALSE,    txNoCRS(4:4..4): BOOLEAN _ FALSE,    NRZEncoding(4:5..5): BOOLEAN _ FALSE,    broadcastDisable(4:6..6): BOOLEAN _ FALSE,    promiscuousMode(4:7..7): BOOLEAN _ FALSE,    internalCDT(4:8..8): BOOLEAN _ FALSE,    CDTFilter(4:9..11): [0..7] _ 0,    internalCRS(4:12..12): BOOLEAN _ FALSE,    CRSFilter(4:13..15): [0..7] _ 0,    minFrameLength(5:0..7): [0..255] _ 64,    unusedF(5:8..15): [0..256) _ 0    ];  configParams: LONG POINTER TO ConfigureParametersRec;      command: CARDINAL;  minTryCount: CARDINAL;  maxTryCount: CARDINAL;  minUnit: CARDINAL;  maxUnit: CARDINAL;  paramPtrL1: CARDINAL;  tryCount: CARDINAL;  unit: CARDINAL;  useSameDataBuff: CARDINAL;  ExecuteCmd: PROCEDURE[cmdArray: LONG DESCRIPTOR FOR ARRAY OF CARDINAL _ DESCRIPTOR[NIL,0]];  StartLoop: PROCEDURE;  EndLoop: PROCEDURE;  TimeDelay: PROCEDURE;  SetEndOfFile: PROCEDURE;  Initialize: PROCEDURE;    END...    LOG  Time			By	Action7-Feb-85 19:20:44	MXT	Created25-Feb-85 14:53:46	MXT	Changed DiagEtherCommCmdDes to DiagEtherCmdDes.22-Mar-85 11:32:09	MXT	Added configParams and Initialize.11-Jun-85 14:03:44	MXT	Changed ConfigureParametersRec's default value.