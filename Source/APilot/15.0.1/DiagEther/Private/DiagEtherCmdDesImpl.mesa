-- File: DiagEtherCmdDesImpl.mesa - last edit:-- MXT                  6-Aug-85 19:44:55-- Copyright (C) 1985 by Xerox Corporation. All rights reserved.DIRECTORY  DiagEtherCmdDes ,  DiagEtherCmdDrive,  DiagEtherDisplay,  DiagEtherIOCmdMsgs,  DiagEtherLogAndTrace,  DiagEtherPromptMsgs,  DiagEtherTestCmds;DiagEtherCmdDesImpl: PROGRAM   IMPORTS DiagEtherCmdDrive, DiagEtherDisplay, DiagEtherLogAndTrace,          DiagEtherIOCmdMsgs, DiagEtherPromptMsgs, DiagEtherTestCmds   EXPORTS DiagEtherCmdDes =  BEGIN OPEN DiagEtherCmdDes, DiagEtherIOCmdMsgs, DiagEtherPromptMsgs;    cmds: PUBLIC ARRAY Commands OF CARDINAL;  CmdDescriptArray: PUBLIC LONG DESCRIPTOR FOR ARRAY OF CmdRecord _ DESCRIPTOR[EtherCmdArray];  EtherCmdArray: ARRAY [0..numberOfTests) OF CmdRecord;    numberOfTests: CARDINAL = 27 <<40>>;    -- Initialize CmdArrays.  i: CARDINAL _ 00;  -- «»: clearLog  EtherCmdArray[i].commandName 		_ ioCmdMsgs[clearLog];  EtherCmdArray[i].explanation		_ ioCmdMsgs[clearLogExpl];  EtherCmdArray[i].cmdProc	 	_ DiagEtherLogAndTrace.ClearLogging;  cmds[clearLog] ¬ i;  i _ SUCC[i];    -- «»: startLogging  EtherCmdArray[i].commandName 		_ ioCmdMsgs[startLogging];  EtherCmdArray[i].explanation		_ ioCmdMsgs[startLoggingExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherLogAndTrace.StartLogging;  EtherCmdArray[i].setStartLogging	_ TRUE;  cmds[startLogging] ¬ i;  i _ SUCC[i];    -- «»: endLogging  EtherCmdArray[i].commandName 		_ ioCmdMsgs[stopLogging];  EtherCmdArray[i].explanation		_ ioCmdMsgs[stopLoggingExpl];  EtherCmdArray[i].cmdProc	 	_ DiagEtherLogAndTrace.StopLogging;  EtherCmdArray[i].resetStartLogging	_ TRUE;  cmds[endLogging] ¬ i;  i _ SUCC[i];    -- «»: clearTrace  EtherCmdArray[i].commandName 		_ ioCmdMsgs[clearTrace];  EtherCmdArray[i].explanation		_ ioCmdMsgs[clearTraceExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherLogAndTrace.StartTrace;  cmds[clearTrace] ¬ i;  i _ SUCC[i];  -- «»: startTrace  EtherCmdArray[i].commandName 		_ ioCmdMsgs[startTrace];  EtherCmdArray[i].explanation		_ ioCmdMsgs[startTraceExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherLogAndTrace.StartTrace;  EtherCmdArray[i].setTracing		_ TRUE;  cmds[startTrace] ¬ i;  i _ SUCC[i];    -- «»: stopTrace  EtherCmdArray[i].commandName 		_ ioCmdMsgs[stopTrace];  EtherCmdArray[i].explanation		_ ioCmdMsgs[stopTraceExpl];  EtherCmdArray[i].cmdProc	 	_ DiagEtherLogAndTrace.StopTrace;  EtherCmdArray[i].resetTracing		_ TRUE;  cmds[stopTrace] ¬ i;  i _ SUCC[i];  -- «»: startLoop  EtherCmdArray[i].commandName 		_ ioCmdMsgs[startLoop];  EtherCmdArray[i].explanation		_ ioCmdMsgs[startLoopExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherCmdDrive.StartLoop;  EtherCmdArray[i].setLooping		_ TRUE;  EtherCmdArray[i].needLoopCount	_ TRUE;  cmds[startLoop] ¬ i;  i _ SUCC[i];  -- «»: endLoop  EtherCmdArray[i].commandName 		_ ioCmdMsgs[endLoop];  EtherCmdArray[i].explanation		_ ioCmdMsgs[endLoopExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherCmdDrive.EndLoop;  EtherCmdArray[i].resetLooping		_ TRUE;  cmds[endLoop] ¬ i;  i _ SUCC[i];  -- «»: displayLog  EtherCmdArray[i].commandName 		_ ioCmdMsgs[displayLog];  EtherCmdArray[i].explanation		_ ioCmdMsgs[displayLogExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherDisplay.DisplayLog;  cmds[displayLog] ¬ i;  i _ SUCC[i];    -- «»: displayTrace  EtherCmdArray[i].commandName 		_ ioCmdMsgs[displayTrace];  EtherCmdArray[i].explanation		_ ioCmdMsgs[displayTraceExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherDisplay.DisplayTrace;  cmds[displayTrace] ¬ i;  i _ SUCC[i];  -- «»: startIntLoopBack  EtherCmdArray[i].commandName 		_ ioCmdMsgs[startIntLoopBack];  EtherCmdArray[i].explanation		_ ioCmdMsgs[startIntLoopBackExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.StartIntLoopBack;  EtherCmdArray[i].spare5	_ TRUE;  cmds[startIntLoopBack] ¬ i;  i _ SUCC[i];   -- «»: stopIntLoopBack  EtherCmdArray[i].commandName 		_ ioCmdMsgs[stopIntLoopBack];  EtherCmdArray[i].explanation		_ ioCmdMsgs[stopIntLoopBackExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.StopIntLoopBack;  EtherCmdArray[i].spare5	_ TRUE;  --EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[stopIntLoopBack] ¬ i;  i _ SUCC[i];  -- «»: startExtLoopBack  EtherCmdArray[i].commandName 		_ ioCmdMsgs[startExtLoopBack];  EtherCmdArray[i].explanation		_ ioCmdMsgs[startExtLoopBackExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.StartExtLoopBack;  EtherCmdArray[i].spare6	_ TRUE;  cmds[startExtLoopBack] ¬ i;  i _ SUCC[i];   -- «»: stopExtLoopBack  EtherCmdArray[i].commandName 		_ ioCmdMsgs[stopExtLoopBack];  EtherCmdArray[i].explanation		_ ioCmdMsgs[stopExtLoopBackExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.StopExtLoopBack;  EtherCmdArray[i].spare6	_ TRUE;  --EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[stopExtLoopBack] ¬ i;  i _ SUCC[i];  -- «»: setTransmitData  EtherCmdArray[i].commandName 		_ prompts[setTransmitData];--  EtherCmdArray[i].commandName 		_ ioCmdMsgs[setTransmitData];  EtherCmdArray[i].explanation		_ prompts[setTransmitDataExpl];--  EtherCmdArray[i].explanation		_ ioCmdMsgs[setTransmitDataExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.SetTransmitData;  EtherCmdArray[i].needData		_ TRUE;  EtherCmdArray[i].getParamsCmd		_ TRUE;  cmds[setTransmitData] ¬ i;  i _ SUCC[i];  -- «»: readStatus  EtherCmdArray[i].commandName 		_ ioCmdMsgs[readStatus];  EtherCmdArray[i].explanation		_ ioCmdMsgs[readStatusExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.ReadStatus;  cmds[readStatus] ¬ i;  i _ SUCC[i];  -- «»: setTimeoutCntr  EtherCmdArray[i].commandName 		_ ioCmdMsgs[setTimeoutCntr];  EtherCmdArray[i].explanation		_ ioCmdMsgs[setTimeoutCntrExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.SetTimeoutCntr;  cmds[setTimeoutCntr] ¬ i;  i _ SUCC[i];  -- «»: timeDelay  EtherCmdArray[i].commandName 		_ ioCmdMsgs[timeDelay];  EtherCmdArray[i].explanation		_ ioCmdMsgs[timeDelayExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherCmdDrive.TimeDelay;  EtherCmdArray[i].needDelay		_ TRUE;  cmds[timeDelay] ¬ i;  i _ SUCC[i];  -- «»: nop  EtherCmdArray[i].commandName 		_ ioCmdMsgs[nop];  EtherCmdArray[i].explanation		_ ioCmdMsgs[nopExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.Nop;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[nop] ¬ i;  i _ SUCC[i];  -- «»: individualAddress  EtherCmdArray[i].commandName 		_ ioCmdMsgs[individualAddress];  EtherCmdArray[i].explanation		_ ioCmdMsgs[individualAddressExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.IndividualAddress;  EtherCmdArray[i].needDestinationID		_ TRUE;  EtherCmdArray[i].getParamsCmd		_ TRUE;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[individualAddress] ¬ i;  i _ SUCC[i];  -- «»: configure  EtherCmdArray[i].commandName 		_ ioCmdMsgs[configure];  EtherCmdArray[i].explanation		_ ioCmdMsgs[configureExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.Configure;  EtherCmdArray[i].needConfigureParams		_ TRUE;  EtherCmdArray[i].getParamsCmd		_ TRUE;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[configure] ¬ i;  i _ SUCC[i];  -- «»: multiCastAddr  EtherCmdArray[i].commandName 		_ ioCmdMsgs[multiCastAddr];  EtherCmdArray[i].explanation		_ ioCmdMsgs[multiCastAddrExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.MultiCastAddr;  EtherCmdArray[i].needMulticastID	_ TRUE;  EtherCmdArray[i].needByteCount	_ TRUE;  EtherCmdArray[i].getParamsCmd		_ TRUE;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[multiCastAddr] ¬ i;  i _ SUCC[i];  -- «»: transmit  EtherCmdArray[i].commandName 		_ ioCmdMsgs[transmit];  EtherCmdArray[i].explanation		_ ioCmdMsgs[transmitExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.Transmit;  EtherCmdArray[i].needDestinationID	_ TRUE;--  EtherCmdArray[i].needPacketType	_ TRUE;  EtherCmdArray[i].getParamsCmd		_ TRUE;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[transmit] ¬ i;  i _ SUCC[i];  -- «»: timeDomainRefl  EtherCmdArray[i].commandName 		_ ioCmdMsgs[timeDomainRefl];  EtherCmdArray[i].explanation		_ ioCmdMsgs[timeDomainReflExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.TimeDomainRefl;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[timeDomainRefl] ¬ i;  i _ SUCC[i];  -- «»: dumpStatus  EtherCmdArray[i].commandName 		_ ioCmdMsgs[dumpStatus];  EtherCmdArray[i].explanation		_ ioCmdMsgs[dumpStatusExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.DumpStatus;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[dumpStatus] ¬ i;  i _ SUCC[i];  -- «»: diagnose  EtherCmdArray[i].commandName 		_ ioCmdMsgs[diagnose];  EtherCmdArray[i].explanation		_ ioCmdMsgs[diagnoseExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherTestCmds.Diagnose;  EtherCmdArray[i].checkIOStatus ¬ TRUE;  cmds[diagnose] ¬ i;  i _ SUCC[i];  -- «»: endOfFile  EtherCmdArray[i].commandName 		_ ioCmdMsgs[endOfFile];  EtherCmdArray[i].explanation		_ ioCmdMsgs[endOfFileExpl];  EtherCmdArray[i].cmdProc		_ DiagEtherCmdDrive.SetEndOfFile;  EtherCmdArray[i].setEndOfCommandFile	_ TRUE;  cmds[endOfFile] ¬ i;  i _ SUCC[i];  END...LOGTime			By	Action20-Dec-84 15:46:40	MXT	Created.13-Feb-85 12:10:07	MXT	Added BOOLEANs for the 82586 commands.25-Feb-85 15:01:04	MXT	Moved CmdRecord from DiagEtherCommCmdDes.mesa. 7-Mar-85 17:29:22	MXT	Added cmds and Commands.22-Mar-85 12:24:55	MXT	Changed comand order. 8-Jul-85 16:39:49	MXT	Added checkIOStatus