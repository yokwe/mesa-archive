$MOD186$PAGELENGTH (72)$PAGEWIDTH  (136);Copyright (C) 1984 by Xerox Corporation. All rights reserved.;-- stored as [BamBam:Osbu North]<WMicro>Dove>IORPPO.asm;-- created on  3-Jul-86 15:31:03;-- Last edited by:;--	JMA		 10-Dec-86 17:21:36	:;==========================  IORegion  PPO  ================================;IORPPO.asm - contains data declarations residing in the IORegionNAME	IORPPO		;IORegion PPO ;==========================  INCLUDES  DECLARATIONS  ==========================$NOLIST$INCLUDE	(IOPDefs.asm)	;This should always be INCLUDEd first$INCLUDE	(QueDefs.asm)	;Contains QueueBlock STRUC$INCLUDE	(PPOIOFce.asm)	;Contains data structure defs$LIST  ;==========================  DATA  SEGMENT  DECLARATIONS  =======================PPOIOR			SEGMENT		COMMON			Assume DS: PPOIOR			;-------------------------  PUBLIC  DECLARATIONS  -------------------------------;PUBLIC	PPOFCB			;LABELPUBLIC  PPOMainTaskTcbPUBLIC  PPOIntrpTaskTcbPUBLIC	PPOInServiceTaskTcbPUBLIC  PPOClientConditionPUBLIC  PPOWorkFromClientCondPUBLIC  PPOInServiceWorkCondPUBLIC  PPOAttnCondPUBLIC  PPOEndOfScanCondPUBLIC  PPOWorkFromClientMaskPUBLIC	PPOLockMaskPUBLIC  PPOIntrpMaskPUBLIC  PPOInterruptPUBLIC	PPOIntrpSelectRegrValPUBLIC  PPOEEPROMInfoPUBLIC  PPOSpareWordPUBLIC	PPODiagTestPatrnPUBLIC  PPODiagRetrnPatrnPUBLIC	PPODiagRetrnLoBytePUBLIC	PPODiagRetrnHiBytePUBLIC  CurrentDCBPtrPUBLIC  PPODCBPtrPUBLIC  PPOBoardStatusPUBLIC  PPOHandlerStatusPUBLIC  PPOCnfgRegrImagePUBLIC  PPOCmdRegrImagePUBLIC  Port0DCB		;LABELPUBLIC	Port0CommandListPUBLIC	Port0TransferQuePUBLIC	Port0CnfgRegrValPUBLIC	Port0CmdRegrValPUBLIC	Port0StatusPUBLIC  Port0DCBLocationPUBLIC  Port0IntrpCntPUBLIC  Port0RqstQueCleanupPUBLIC  Port0SpareByte0PUBLIC  Port0SpareByte1PUBLIC  Port1DCB		;LABELPUBLIC  Port1CommandListPUBLIC	Port1TransferQuePUBLIC	Port1CnfgRegrValPUBLIC	Port1CmdRegrValPUBLIC	Port1StatusPUBLIC  Port1DCBLocationPUBLIC  Port1IntrpCntPUBLIC  Port1RqstQueCleanupPUBLIC  Port1SpareByte0PUBLIC  Port1SpareByte1PUBLIC	PPODebug		;LABELPUBLIC	badPPOIntrpCntPUBLIC	badPPODMA1IntrpCntPUBLIC  ppoDebugByte0PUBLIC  ppoDebugByte1PUBLIC	ppoDebugWord0;-------------------------  VARIABLE  DECLARATIONS  ----------------------------;-- The following reserved spaces are in the IORegion and are used as shared memory locations;-- for Parallel Port Head and PPO Handler communications.PPOFCB			LABEL	WORD	;PPO Function Context BlockPPOMainTaskTcb		TaskContextBlock <>PPOIntrpTaskTcb		TaskContextBlock <>PPOInServiceTaskTcb	TaskContextBlock <>PPOClientCondition	ClientCondition <>	;Up Nofify ConditionPPOWorkFromClientCond	Condition <>		;Down notify conditionPPOInServiceWorkCond	Condition <>		;Cross notify conditionPPOAttnCond		Condition <>		;Cross notify conditionPPOEndOfScanCond	Condition <>		;Cross notify conditionPPOWorkFromClientMask	DW	?PPOLockMask		DW	?PPOIntrpMask		DW	?	;Interrupt maskPPOInterrupt		DW	?	;Option interrupt vector assigmentPPOIntrpSelectRegrVal	DW	?	;Interrupt Select Regr valuePPOEEPROMInfo		DW 	?	;contains option specific infoPPOSpareWord		DW	?	;spare wordPPODiagTestPatrn	DW	?	;Test pattern for diagnostic loopbackPPODiagRetrnPatrn	LABEL	WORD	;PPODiagRetrnLoByte	DB	?	;Return test pattern from diagnostic loopback(low)PPODiagRetrnHiByte	DB	?	;Return test pattern from diagnostic loopback(high)CurrentDCBPtr		DW	?	;points to the DCB in controlPPODCBPtr		DW	?	;Contains pointer to requesting DCBPPOBoardStatus		DW	?	;PPO board StatusPPOHandlerStatus	DW	?	;Overall handler board StatusPPOCnfgRegrImage	DW	?	;save config register imagePPOCmdRegrImage       	DW	?	;save command register image;-------------------------------------------------------------------;--   DEVICE CONTEXT BLOCK(DCB)   DEFINITION  FOR  PARALLEL PORT  --;-------------------------------------------------------------------Port0DCB		LABEL	PPODCB	;Port0CommandList	DW	?	;must always be firstPort0TransferQue	QueueBlock <>	;contains, head, tail, and next pointerPort0CnfgRegrVal	DW	?	;config regr. val Port0CmdRegrVal		DW	?	;command regr. val used for port0 resetPort0Status		DW	?	;port status of port0Port0DCBLocation	DW	?	;OFFSET Port0DCBPort0IntrpCnt		DB	?	;Port0RqstQueCleanup	DB	?	;boolean, handler-to-head request for cleanupPort0SpareByte0		DB	?	;Port0SpareByte1		DB	?	;Port1DCB		LABEL	PPODCB	;Port1CommandList	DW	?	;must always be firstPort1TransferQue	QueueBlock <>	;contains, head, tail, and next pointerPort1CnfgRegrVal	DW	?	;config regr. val Port1CmdRegrVal		DW	?	;command regr. val used for port1 resetPort1Status		DW	?	;port status of port1Port1DCBLocation	DW	?	;OFFSET Port1DCBPort1IntrpCnt		DB	?	;Port1RqstQueCleanup	DB	?	;boolean, handler-to-head request for que cleanupPort1SpareByte0		DB	?	;Port1SpareByte1		DB	?	;PPODebug		LABEL	WORDbadPPOIntrpCnt		DB	?	;for debuggingbadPPODMA1IntrpCnt	DB	?	;for debuggingppoDebugByte0		DB	?	;reserved byte for debuggingppoDebugByte1		DB	?	;reserved byte for debuggingppoDebugWord0		DW	?	;reserved word for debuggingPPOIOR		ENDS;====================================================================================			END