;Copyright (C) 1985 by Xerox Corporation. All rights reserved.;;-- file PSOHDFce.asm;-- PSO Hard Face;;-- create on  9-Sep-85 15:05:29;;-- Last edited by:;--	JMA		16-Jan-86 11:31:16	:;;;=============================  PSO HARD FACE  =================================;-----------------------------  CONSTANTS  --------------------------------------;PSO RegistersPSOConfigRegr		EQU	4000H	;Configuration RegrPSOCommandRegr		EQU	4002H	;Command RegrPSOPortStatusRegr	EQU	4004H	;Port Status RegrPSOStatusRegr		EQU	4006H	;Status RegrPSOIntrpSelectRegr	EQU	4008H	;Interrupt Select RegrPSODataRegr		EQU	400AH	;Data RegrPSOMaintenanceRegr	EQU	400CH	;Maintenance Regr;Definitions for i186 internal DMA 1	- from HardDefs.asm;i8259Poll		EQU	00CH		;places option 8259 in poll mode;i186DMA1IntCtlAddr	EQU	PCBbase+036h	;DMA 1 Interrupt Control Register;i186DMA1LowSourcePtr	EQU	PCBbase+0D0h	;DMA 1 Low order source pointer;i186DMA1HighSourcePtr	EQU	PCBbase+0D2h	;DMA 1 High order source pointer;i186DMA1LowDestPtr	EQU	PCBbase+0D4h	;DMA 1 Low order destination pointer;i186DMA1HighDestPtr	EQU	PCBbase+0D6h	;DMA 1 High order destination pointer;i186DMA1TransferCount	EQU	PCBbase+0D8h	;DMA 1 transfer count;i186DMA1ControlWord	EQU	PCBbase+0DAh	;DMA 1 control wordResetConfigRegrVal	EQU	0000	;reset command value					; bit0-3 - period (0000)					; bit4   - useAck					; bit5   - maintenance mode (inactive)					; bit6   - interrupt (disabled)						; bit7   - PSO DMA (disabled)					; bit8-13- unused					; bit14  - Print mode					; bit15  - Printer port									ResetCmdRegrVal		EQU	0000	;reset command value					; bit0   - PSOReset (active)					; bit1   - ClearIntr (active)					; bit2   - Enforce20uSecRule (inactive)					; bit3   - PSOGO (inactive)					InitialCmdRegrVal	EQU	0003H	;initial command value 					; bit0   - PSOReset (inactive)					; bit1   - ClearIntr (inactive)					; bit2   - Enforce20uSecRule (inactive)					; bit3   - PSOGO (inactive)InitialConfigRegrVal	EQU	0040H	;initial command value 					; bit0-3 - period (0000)					; bit4   - useBusy					; bit5   - maintenance mode (inactive)					; bit6   - interrupt (enabled)						; bit7   - PSO DMA (disabled)					; bit8-13- unused					; bit14  - Print mode					; bit15  - Printer port				IntrpMaskVal		EQU	0002H	;Interrupt Mask Register ValueClearIntrpBitMask	EQU	0FFFDH	;Clear Interrupt bit maskDiagDelayCount		EQU	0005H	;Loop count for the delayDMA1ResetCntrlWrd	EQU	1A85H	;Reset Value for the DMA1 control word; The negated values are in PSOIOFCE.ASMClrUpdateCmdMask	EQU	NOT PSOUpdateStatCmd			;Mask valueClrResetCmdMask		EQU	NOT (CmdPending OR PSOResetCmd)		;ClrTransferCmdMask	EQU	NOT (CmdPending OR PSOTransferCmd)	;clear cmd bitsClrDiagCmdMask		EQU	NOT (CmdPending OR PSODiagCmd)		;ClrCommandMask		EQU	0					;clears all command bits;-----------------------------  Definitions  ------------------------------------; Bitwise definitions;PSO Configuration RegisterPSOIntrpEnablebit	EQU	40H	;Enable interrupts on PSO boardPSODMAEnablebit		EQU	80H	;Allow PSO to make DMA requests;PSO Status RegisterPSOReadyBit		EQU	1H	;indicates if PSO is ready for the next transferPROMErrorState		EQU	0F0H	;indicates PROM error state