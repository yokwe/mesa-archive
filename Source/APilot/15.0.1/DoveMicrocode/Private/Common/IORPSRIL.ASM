$	DEBUG MOD186$	PAGELENGTH (72)$	PAGEWIDTH  (136);;----------------------;;     IORPSril.asm     ;;----------------------;;Copyright (C) 1986 by Xerox Corporation.  All rights reserved.;-- IORegion locations for the PCE serial port;-- stored as [BamBam]<WMicro>Dove>PCE-B0>IORPSril.asm;-- last edited by:;; AGK	 3-Aug-86 13:36:26	: Creation; FHB	20-Aug-86 17:21:44	: First Edition; FHB	28-Aug-86 17:32:55	: made pceSerialEmuState a WORD value; FHB	10-Sep-86 16:09:27	: added pSerDNflag; FHB	19-Sep-86 14:15:20	: added pRxBufferCount; FHB	 6-Oct-86  9:24:52	: added pPublicLCR; FHB	 7-Oct-86 11:49:30	: added pOldDLLSB, removed pPublicLCR; FHB	10-Oct-86  9:57:22	: added pXmitIntOnEnable and pPrevTxBufferIndex; FHB	13-Oct-86 11:43:36	: redo down notification; FHB	17-Oct-86 14:15:44	: add receive interrupt task; FHB	21-Oct-86 17:12:44	: added configuration variables		NAME	IORPSril;--------------------------------------------------------------------------------; $NOLIST$INCLUDE	(IOPDefs.asm)$INCLUDE	(SrilDefs.asm)$LIST;-------------------------------------------------------------------------; ;;********************************************************************************PCESerialIOR		SEGMENT	COMMON pceSerialFCB		LABEL	WORDPUBLIC		pRBR, pTHR, pIER, pIIR, pLCR, pMCR, pLSR, pMSR, pDLLSB, pDLMSBPUBLIC		pceSerialReceiveTask, pceSerialTransmitTask, pceSerialIOTaskPUBLIC		pceSerialIOCondition, pSerRxBuffEmpty, pSerSendBufferPUBLIC		pDeltaModemStatus, pSerSetBreak, pSerIntsPending, pDivisorStatusPUBLIC		pLineStatusInt, pAsyncIRQ, pJammedRxTxPUBLIC		pTxBuffer, pTxBufferIndex, pRxBuffer, pRxBufferIndexPUBLIC		pRxBufferCountPUBLIC		pceSerialEmuState, pSerDNflagPUBLIC		pSerialTxCondition, pSerialRxConditionPUBLIC		pOldDLLSB, pOldDLMSBPUBLIC		pXmitIntOnEnable, pPrevTxBufferIndexPUBLIC		pceSerialRxIntTask, pSerDoRxIntPUBLIC		pSerBaseAddressHigh		;--- Variables common to the IOP and Mesa worlds:; ACE 8250 registerspRBR		DB	?	; Receiver Buffer RegisterpTHR		DB	?	; Transmitter Holding RegisterpIIR		DB	?	; Interrupt Identification RegisterpIER		DB	?	; Interrupt Enable RegisterpMSR		DB	?	; Modem Status RegisterpMCR		DB	?	; Modem Control RegisterpLSR		DB	?	; Line Status RegisterpLCR		DB	?	; Line Control Register (for Mesa)pDLLSB		DB	?	; Divisor Latch (Least Significant Byte)pDLMSB		DB	?	; Divisor Latch (Most Significant Byte)pOldDLLSB	DB	?	; Previous Divisor Latch LSBpOldDLMSB	DB	?	; Previous Divisor Latch MSB; Down notification data structurepSerialTxCondition		Condition	<>pSerialRxCondition		Condition	<>; Up notification data structurepceSerialEmuState	DW	?	;for distinguishing between up notifiespSerDNflag		DW	?	;for distinguishing between down notifies; Receive and Transmit bufferpTxBuffer		DB pSerBufferSize DUP (?)pRxBuffer		DB pSerBufferSize DUP (?)pPrevTxBufferIndex	DW	?pTxBufferIndex		DW	?pRxBufferIndex		DW	?pRxBufferCount		DW	?;  MiscellaneouspDeltaModemStatus	DB	?pSerSetBreak		DB	?pSerIntsPending       	DB	?pDivisorStatus		DB	?pLineStatusInt		DB	?pJammedRxTx		DB	?pXmitIntOnEnable	DB	?; Configuration StuffpSerBaseAddressHigh	DB	?	;the high byte of the base address 					; 3 for COM1 and 2 for COM2pAsyncIRQ		DW	?	;IOP IO address for PC interrupt;--- Variables local to emulator:; TaskspceSerialReceiveTask		TaskContextBlock	<>pceSerialTransmitTask		TaskContextBlock	<>pceSerialIOTask			TaskContextBlock	<>pceSerialRxIntTask		TaskContextBlock	<>; Condition variablespceSerialIOCondition		Condition	<>pSerRxBuffEmpty			Condition	<>pSerSendBuffer			Condition	<>pSerDoRxInt			Condition	<>PCESerialIOR		ENDS		END