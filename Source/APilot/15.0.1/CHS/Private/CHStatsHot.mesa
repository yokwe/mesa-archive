-- Copyright (C) 1981, 1984  by Xerox Corporation. All rights reserved. -- File: CHStatsHot.mesa,  Last Edit: BLyon  17-Jun-81 13:29:53DIRECTORY  CHStats USING [StatCounterIndex];CHStatsHot: PROGRAM EXPORTS CHStats =  BEGIN OPEN CHStats;  -- It would be nice if this were a MONITOR (locking CHStats.statLock), but that slows things down a lot and complicates binding in the Pilot world.  -- These are the master counters.  They are the only ones that get bumped by StatIncr and StatBump.  The numbers that CHStatSince prints out are obtained by subtracting two copies of statGrand.  statGrand: PUBLIC POINTER TO ARRAY StatCounterIndex OF LONG CARDINAL ¬ NIL;  StatIncr: PUBLIC PROCEDURE [which: StatCounterIndex] =    BEGIN IF statGrand#NIL THEN statGrand[which] ¬ statGrand[which] + 1; END;  StatBump: PUBLIC PROCEDURE [which: StatCounterIndex, howmuch: CARDINAL] =    BEGIN IF statGrand#NIL THEN statGrand[which] ¬ statGrand[which] + howmuch; END;  StatGetCounter: PUBLIC PROCEDURE [which: StatCounterIndex]    RETURNS [LONG CARDINAL] = BEGIN RETURN[IF statGrand#NIL THEN statGrand[which] ELSE 0]; END;  END.