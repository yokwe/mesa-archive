-- Copyright (C) 1981, 1983, 1984  by Xerox Corporation. All rights reserved. -- File: CHStats.mesa,  Last Edit: BLyon  6-Nov-81 13:38:02CHStats: DEFINITIONS =  BEGIN    WindowHandle: TYPE = LONG POINTER;  -- breaks dependency on Window.Handle  -- these routines bump the actual counters  StatIncr: PROCEDURE [StatCounterIndex];  StatBump: PROCEDURE [StatCounterIndex, CARDINAL];  StatGetCounter: PROCEDURE [StatCounterIndex] RETURNS [LONG CARDINAL];  StatNew: PROCEDURE; -- call before MakeImage to remember Date+Time  StatStart: PROCEDURE [WindowHandle, STRING];  -- prints header line, resets counters  StatPrintCurrent: PROCEDURE [WindowHandle]; -- prints totals so far  StatFinish: PROCEDURE [WindowHandle]; -- prints grand totals  -- there is also a second parallel set of counters that can be used  -- for local timings without clobbering the totals for the whole run  StatReady: PROCEDURE; -- resets extra set of counters  StatSince: PROCEDURE [WindowHandle]; -- print, then reset extra set of counters  -- extra hooks for do it yourself types  -- Allocates one of the spares if the STRING is not already known.  -- NB: The STRING is NOT copied over.  Be sure it does not go away.  StatsStringToIndex: PROCEDURE [STRING] RETURNS [StatCounterIndex];  StatsStringsFull: ERROR;  StatUpdate: PROCEDURE;  StatsGetCounters: PROCEDURE    RETURNS [POINTER TO ARRAY StatCounterIndex OF LONG CARDINAL];  StatsGetText: PROCEDURE RETURNS [POINTER TO ARRAY StatCounterIndex OF STRING];  --  ******** keep Text in CHStatsStrings up to date too!!  StatCounterIndex: TYPE = MACHINE DEPENDENT {    -- Time    statTime(0), statSeconds(1), statHours(2),     -- Database    dbQuery(3), cacheHit(4), partialDBQuery(5), possibleDBHit(6), dBHit(7), -- lookups    chdbNodeAllocated(8), chdbNodeFreed(9), entryAdded(10), entryRemoved(11),    keyTableGrow(12),  -- stoage management    domainsAdded(13), domainsRemoved(14), orgsAdded(15), orgsRemoved(16),     -- free space    free(17), unspecified(63)    };    statLock: MONITORLOCK;  statGrand: POINTER TO ARRAY StatCounterIndex OF LONG CARDINAL;  statText: ARRAY StatCounterIndex OF STRING;  StatPrintCounters: PROCEDURE [    WindowHandle, POINTER TO ARRAY StatCounterIndex OF LONG CARDINAL];  CHStatsImpl, CHStatsCold, CHStatsPrint, CHStatsStrings: PROGRAM;  END.