-- Copyright (C) 1983, 1985  by Xerox Corporation. All rights reserved. -- File: GateStreamInternal.mesa - last edit:-- Danielson.PA        14-Dec-83 18:48:00DIRECTORY  Auth USING [Credentials, Verifier],  CFDStream USING [Byte, DeleteProcedure, Handle, WaitAttentionProcedure],  Courier USING [SystemElement],  GateMake USING [AwaitConnectionReady, StatusReporter],  GateStream USING [    CallBackType, CompletionProcedure, Resource, SessionParameterHandle,    Transport, TransportObject, WaitTime],  GateStubInternal USING [GetStreamProcedure],  RS232C USING [ChannelHandle, DeviceStatus, LineType],  Stream USING [Handle],  System USING [NetworkAddress];GateStreamInternal: DEFINITIONS =  BEGIN  -- Procedures    RegisterManager: PROCEDURE [mgr: ProcedureHandle];  DispatcherCreate: PROCEDURE [systemElement: System.NetworkAddress,    sessionParameterHandle: GateStream.SessionParameterHandle,    transport: LONG DESCRIPTOR FOR ARRAY OF GateStream.TransportObject,    createTimeout: GateStream.WaitTime,    version: CARDINAL,    credentials: Auth.Credentials,    verifier: Auth.Verifier,    getStream: GateStubInternal.GetStreamProcedure]  RETURNS [cfdStream: CFDStream.Handle];    CreateMgrInstance: PROCEDURE RETURNS [instance: MgrInstanceHandle];  QuiesceTransmissionMedium: PROCEDURE [resource: ResourceHandle];  DeleteTransmissionMedium: PROCEDURE [resource: ResourceHandle];    ResourceHandle: TYPE = LONG POINTER TO ResourceObject;  ResourceObject: TYPE = RECORD [    timeout: CARDINAL, -- used for timing out GAP resources    variantPart: SELECT transport: GateStream.Transport FROM      rs232c => [        line: CARDINAL,	lineType: RS232C.LineType,	channel: RS232C.ChannelHandle,	currentStatus: RS232C.DeviceStatus,	process: PROCESS],      ENDCASE];      MgrInstanceHandle: TYPE = LONG POINTER TO MgrInstanceObject;  MgrInstanceObject: TYPE = RECORD [    medium: ResourceHandle,    cfdStream: CFDStream.Handle,    delete: CFDStream.DeleteProcedure,    statusReporter: GateMake.StatusReporter,    waitConnection: GateMake.AwaitConnectionReady,    waitAttention: CFDStream.WaitAttentionProcedure,    attentionProcess: PROCEDURE,    notifyAttentionReceived: PROCEDURE [byte: CFDStream.Byte],    --rest of record is used only for remote streams    networkStream: Stream.Handle,    cfdStreamGet, cfdStreamWaitAttention, networkStreamWaitAttention,      networkStreamGet: PROCESS,    fake: BOOLEAN];  -- if TRUE this is a fake stream (ibm3270 controller)    ProcedureHandle: TYPE = LONG POINTER TO ProcedureObject;  ProcedureObject: TYPE = RECORD [    create: PROCEDURE [systemElement: Courier.SystemElement,    sessionParameterHandle: GateStream.SessionParameterHandle,      transport: LONG DESCRIPTOR FOR ARRAY OF GateStream.TransportObject,      createTimeout: GateStream.WaitTime,      version: CARDINAL,      credentials: Auth.Credentials, verifier: Auth.Verifier]      RETURNS [cfdStream: CFDStream.Handle],    reserve: PROCEDURE [transport: GateStream.TransportObject,      completionProcedure: GateStream.CompletionProcedure,      callBackType: GateStream.CallBackType]      RETURNS [resource: GateStream.Resource],    abortReserve: PROCEDURE [resource: GateStream.Resource],    useMediumForOISCP: PROCEDURE [transport: GateStream.TransportObject]];  GateStreamMgr: PROGRAM;  GateStreamService: PROGRAM;   END.LOG 1-Jun-81 18:47:02  BRD  Modifications for GAP. 5-Aug-81 18:26:46  BRD  Remove RS232CManager.12-Oct-81 13:57:50  BRD  Added device status to Resource.12-Oct-81 13:57:50  BRD  Added lastSST to RemoteObject27-Nov-81 15:34:00  BRD  Make RemoteHandle a LONG POINTER17-Dec-81 16:26:54  BRD  Make StreamInstHandle long28-Jan-82 17:01:01  BRD  Save Courier.Handle in RemoteHandle18-Mar-82 18:30:54  BRD  Add timeout field to ResourceObject 6-Oct-82 16:02:16  MZA  Add lineType field to ResourceObject 6-Jul-83 14:29:15  BRD  Remove stub definitions