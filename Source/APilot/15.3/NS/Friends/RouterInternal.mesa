-- File: RouterInternal.mesa - last edit:-- AOF                 18-Aug-86 17:38:27-- SMA                 20-May-86 14:41:39-- Copyright (C) 1984, 1986 by Xerox Corporation. All rights reserved. DIRECTORY  Buffer USING [TransferStatus],  NSBuffer USING [Buffer],  NSTypes USING [ErrorCode],  Router USING [RoutersFunction],  RoutingTable USING [Handle],  Socket USING [ChannelHandle],  System USING [NetworkNumber];RouterInternal: DEFINITIONS =  BEGIN    XmitStatus: TYPE = Buffer.TransferStatus;  checkIt: BOOLEAN; --whether checksums are to be generated.  routersFunction: Router.RoutersFunction;  --of currently registered router  socketRouterLock: MONITORLOCK; --lock shared by SocketImpl and RouterImpl.  defaultRth: RoutingTable.Handle;  --defines system software's vanilla router  --SOCKET TABLE MAINTAINANCE  AddSocket: PROCEDURE [sH: Socket.ChannelHandle];  RemoveSocket: PROCEDURE [Socket.ChannelHandle];  --ROUTING TABLE MAINTAINANCE  FlushCacheEntry: PROCEDURE[net: System.NetworkNumber];  --SEND/RECEIVE PROCEDURES  SendPacket: PROCEDURE [NSBuffer.Buffer];  ReceivePacket: PROCEDURE [NSBuffer.Buffer];  BroadcastThisPacket: PROCEDURE [NSBuffer.Buffer];  SendErrorPacket: PROCEDURE [offendingPkt: NSBuffer.Buffer,    errCode: NSTypes.ErrorCode, errParm: CARDINAL ¬ 0];      --ENABLE/DISABLE ERROR PACKET TRANSMISSION  EnableNSErrorPackets: PROCEDURE;  --transmits in normal fashion  DisableNSErrorPackets: PROCEDURE;  --suppresses all outgoing error packets  --DEBUGGING  SetNSCheckit: PROCEDURE [BOOLEAN];  SetNSStormy: PROCEDURE [BOOLEAN];  SetNSDriverLoopback: PROCEDURE [BOOLEAN];  SetNSShowit: PROCEDURE [BOOLEAN];  END...  LOG14-May-84 13:11:56  AOF  Post Klamath16-May-86 10:00:56  SMA  Moved error packet and debugging stuff from SpecialComm.20-May-86 14:39:57  SMA  Use NSBuffer instead of Buffer.