--TrapezoidBlt.mesa-- Copyright (C) Xerox Corporation 1986, 1988.  All rights reserved.DIRECTORY  ColorBlt USING [Address, ColorMapping, DstFunc, SrcFunc],  ESCAlphaExtras USING [aTRAPZBLT],  FixedPoint USING [Interpolator],  Mopcodes USING [zESC];TrapezoidBlt: DEFINITIONS =  BEGIN    -- Type defs for TrapezoidBltTable      Address: TYPE = ColorBlt.Address;  ColorMapping: TYPE = ColorBlt.ColorMapping;  Interpolator: TYPE = FixedPoint.Interpolator;  DstFunc: TYPE = ColorBlt.DstFunc;  SrcFunc: TYPE = ColorBlt.SrcFunc;  TrapezoidBltMisc: TYPE = MACHINE DEPENDENT RECORD [    srcFunc (0:0..0): SrcFunc ¬ null,	 -- as in ColorBlt.ColorBltFlags    dstFunc (0:1..3): DstFunc ¬ src,    yOffset (0:4..7): [0..15],	 	-- as in ColorBlt.PatternParm    widthMinusOne (0:8..11): [0..15],	-- restricted to 0 for initial    					--   microcode implementations    heightMinusOne (0:12..15): [0..15]];      TBptr, TrapezoidBltTablePtr: TYPE = LONG POINTER TO TBTable;  TBTable, TrapezoidBltTable: TYPE = MACHINE DEPENDENT RECORD [    dst (0): Address,			-- of 1st line of destination bitmap    dstBpl (3): INTEGER,		-- destination width, in bits per line    src (4): Address,			-- 1st gray bit to be copied into 1st scanline    misc (7): TrapezoidBltMisc,		-- gray description    xMin (8): Interpolator,		-- one side of the trapezoid    xMax (12): Interpolator,		-- other side of the trapezoid    height (16): CARDINAL,		-- height of trapezoid in scanlines    mapping (17): ColorMapping];	-- color mapping  TRAPEZOIDBLT: PROCEDURE [ptr: TBptr] =    MACHINE CODE BEGIN Mopcodes.zESC, ESCAlphaExtras.aTRAPZBLT END;  -- alignment issue, TrapezoidBlt argument block must be aligned on a 32-word boundary  TBTableAlignment: CARDINAL = 32;  TBTableSpace: TYPE = ARRAY [1..SIZE[TBTable] + TBTableAlignment) OF UNSPECIFIED;  AlignedTBTable: PROCEDURE [ip: LONG POINTER TO TBTableSpace]    RETURNS [b: TBptr] = INLINE    BEGIN    align: TYPE = MACHINE DEPENDENT RECORD [       s: [0..LAST[WORD]/TBTableAlignment),        z: [0..TBTableAlignment),       w: WORD ];    b ¬ LOOPHOLE[ip + TBTableAlignment - 1];    LOOPHOLE[b, align].z ¬ 0;    END;        SoftwareTrapezoidBlt: PUBLIC PROC[tzbp:TrapezoidBlt.TBptr];  END.	-- TrapezoidBLT.mesa  LOGJPM	 19-Feb-88 14:54:32	:replaced BitBlt by ColorBlt.JPM	 29-Oct-86 14:31:54	:replaced BitOps by FixedPoint.MRR	  2-Jul-86 15:37:33	:modified ESCAlphaExtras references.JMA	  5-Apr-86 17:39:09	:created file from BltGrayTrap and BitBlt