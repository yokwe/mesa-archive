-- Copyright (C) 1988 by Fuji Xerox Co., Ltd, Tokyo, Japan.-- All rights reserved. -- File: BasicHeadsDuke.pack last edited-- 20-Jan-89 15:39:07  MS	; changed FloppyHeadDoveA,FloppyHeadDoveB for Floppy1024 support--  2-Nov-88 23:00:12  MN	; added OldStartB to DiskHeadLabeledDukeB.-- 11-Oct-88 22:07:39  MN	;--	divided DiskHeadLabeledDuke--	  into DiskHeadLabeledDukeA and DiskHeadLabeledDukeB--	added ReadTrackBuffer, InvalidateTrackBuffer, InitializeTrackBuffer--	  and PagesForTrackBuffering to DiskHeadLabeledDukeB--	added InitializeTrackBuffer and PagesForTrackBuffering to DiskHeadDuke-- 26-Sep-88 13:43:03  TXM	; folded in Duke changes - DoveMachineTypeInfo-- 10-Aug-88  8:58:58  KT	; createdBasicHeads: SEGMENT =BEGINBasicHeadsResident: CODE PACK =  BEGIN  EthernetHeadDove [ENTRY VECTOR, AddCleanup];  DiskHeadDuke [ENTRY VECTOR, Initiate, Poll];  -- put here to run fast  DiskHeadLabeledDukeA	[ENTRY VECTOR, OldInitiate, OldPoll];  DiskHeadLabeledDukeB[ENTRY VECTOR, InitializeCleanup];  FloppyHeadDoveA [ENTRY VECTOR<<, InitializeCleanup>>];  FloppyHeadDoveB [ENTRY VECTOR, InitializeCleanup];  TTYPortHeadDove [ENTRY VECTOR, InitializeCleanup];  UserTerminalHeadDove [ENTRY VECTOR, InitializeCleanup];  -- RetryWriteDiskHead; --  END;BasicHeadsSpecialResident: CODE PACK =  BEGIN  EthernetHeadDove [    ByteSwapIOCB, DeQueue, EnQueue, GetNextDevice, GetPacketLength,    GetPacketsMissed, GetRetries, GetStatus, Initiate, QueueInput,    QueueOutput, TurnOn, TurnOff, RemoveCleanup];  DiskHeadDuke [    DetermineDiskShape, GetControllerAttributes, GetDeviceAttributes,    GetDeviceType, GetDriveInfo, GetFormattingUnit, GetNextController,    GetNextDevice, InitializeCleanup, InitializeController,    InitializeTrackBuffer, PagesForTrackBuffering, Recalibrate,    Reset, SuggestedTries];  DiskHeadLabeledDukeA[    AddressOfAdapterData, DetermineDiskShape, EnqueueOperation,    GetControllerAttributes, OldGetDeviceAttributes, GetDeviceType,    GetDiskShape, GetDriveInfo, GetFormattingUnit, GetNextController,    GetNextDevice, InitIOCB, InquireAboutDrive, MapFix, Recalibrate, Reset,    SetDiskShape, SetRecoveryOptions, SuggestedTries, TryEccFix];  DiskHeadLabeledDukeB[    ReadTrackBuffer, InvalidateTrackBuffer, InitializeTrackBuffer,    PagesForTrackBuffering];  UserTerminalHeadDove [    BeepOff, BeepOn, Connect, Disconnect, GetAlignmentsFromBytes,    GetBitBltTable, GetBorderPattern, GetCursorPattern,    GetDisplayAlignmentData, NotifyDisplayAlignment, TurnOn, TurnOff,    SetBackground, SetBorderPattern, SetCursorPattern, SetCursorPosition,    SetPosition];  ProcessorHeadDove [    ENTRY VECTOR, BootButton, CountCSBanks, GetGreenwichMeanTime,    MachineTypeInfo, DoveMachineTypeInfo, SetMP, SDIV, SDDIV, UDDIV, DMUL,    BYTBLT, BYTBLTR, DUDivMod];  RealMemoryImplDove [    ENTRY VECTOR, SpecialResidentCodeHandle <<MUST be in special memory >>];  SetGMTUsingEthernetDuke [    FixupClock, SetClockRate, ENTRY VECTOR];  END;SmoothScrollingScrolling: CODE PACK = {  UserTerminalHeadDove [Scroll]};SmoothScrollingCreateDelete: CODE PACK = {  UserTerminalHeadDove [CreateScrollWindow, DeleteScrollWindow]};SwappableBasicHeads: CODE PACK = {  ProcessorHeadDove [    PowerOff, SetAutomaticPowerOn,    ResetAutomaticPowerOn, -- not needed for swapping.    SetGreenwichMeanTime];  -- used very seldom  FloppyHeadDoveA [    BuildIOCB, ByteSwapIOCB, GetDeviceType, DequeueIOCB,    DiagnosticGetContext, DiagnosticMaxTracksPerFormatOperation,    DiagnosticSuggestedTries, EnqueueIOCB, FloppyIsWriteProtected,    GetContext, GetDeviceAttributes, GetFormatInfo, GetNextDevice,    GetPort80ControlWord, GetStatistics, GetStatusOfNewOperation,    InitializeDCB, InitializeIOCB, Initiate, InternalGetDeviceAttributes,    InternalGetNextDevice, InternalInitiate, InternalPoll,    InternalSetContext, MaxTracksPerFormatOperation, Poll,    ResubmitRetention, SetContext, SetupDMAinfo,SetupFDCPrimitiveOperation,    SubmitHeldIOCBs, SuggestedTries, Touch,    UpdateAttributesInDeviceContextBlock, UpdateOperation,    ValidDataPointer];  FloppyHeadDoveB [    DiagnosticAquireLock, DiagnosticDiskChangeClear,       DiagnosticGetDeviceAttributes, DiagnosticGetNextDevice,     DiagnosticInitialize, DiagnosticInitiate, DiagnosticPoll,      DiagnosticReleaseLock, DiagnosticReset, DiagnosticSetContext,       DiskChangeClear, GetLogStatus, GetStatusOfFailedOperation,      GetTapeParameters, InternalReset, LogicalAddressToPhysicalAddress,    Reset, Retention]      };SwappableTTYHeads: CODE PACK =  BEGIN  TTYPortHeadDove[    GetCommand, GetLineCount, GetStatus, On, Off, PutCommand, SendBreak,    SetParameter];  END;BasicHeadsInitialization: CODE PACK =  BEGIN  ProcessorHeadDove[    BITBLTNotImplementedByMicrocode, GetNextAvailableVM, Start,    UnimplementedTrapHandler, MAIN];  EthernetHeadDove [Start, MAIN];  HeadStartChainPlug [Start, ENTRY VECTOR, MAIN];  DiskHeadDuke [Start, MAIN];  DiskHeadLabeledDukeA [OldStart, MAIN];  DiskHeadLabeledDukeB [OldStartB, InitializeController, MAIN];  FloppyHeadDoveA [Initialize, Start, MAIN];  FloppyHeadDoveB [MAIN];  SetGMTUsingEthernetDuke [MAIN, EthernetExists, GetNetworkGMT, SetGMT];  TTYPortHeadDove [Start, MAIN];  UserTerminalHeadDove [Initialize, Start, MAIN];  RealMemoryImplDove [    Count, DisplayMemoryHeldBackFromPilotByGerm, FreeReservedMemory, Initialize,    MoveIntervalToDisplayMemory, PCBank, SetReservedMemoryUse, MAIN];  END;END;BasicHeadsResidentFrames: FRAME PACK =  BEGIN  EthernetHeadDove;  ProcessorHeadDove;  RealMemoryImplDove;  DiskHeadDuke;  DiskHeadLabeledDukeA;  DiskHeadLabeledDukeB;  FloppyHeadDoveA;  FloppyHeadDoveB;  TTYPortHeadDove;  SetGMTUsingEthernetDuke;  HeadStartChainPlug;  UserTerminalHeadDove;  -- RetryWriteDiskHead; --  END;