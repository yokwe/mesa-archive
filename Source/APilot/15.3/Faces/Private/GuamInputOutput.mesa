-- GuamInputOutput.mesa-- Last Edited by JPM 8-Mar-93  6:02:30«	Copyright (C) 1993 by Xerox Corporation. All rights reserved.	The following program was created in 1993 but has not been published within the meaning of the copyright law, is furnished under license, and may not be used, copied and/or disclosed except in accordance with the terms of said license.»DIRECTORY  Environment USING [PageCount],  ESCAlpha USING [alpha],  Mopcodes USING [zESC];GuamInputOutput: DEFINITIONS =  BEGIN  « constants which should be in ESCAlpha »  aCALLAGENT: ESCAlpha.alpha = 211B;  aMAPDISPLAY: ESCAlpha.alpha = 212B;  aSTOPEMULATOR: ESCAlpha.alpha = 213B;  « TYPEs and constants »  AgentDeviceIndex: TYPE = MACHINE DEPENDENT {    null(0), disk(1), floppy(2), network(3), parallel(4), keyboard(5), beep(6),    mouse(7), processor(8), stream(9), serial(10), tty(11), display(12),    reserved3(13), reserved2(14), reserved1(15)};  InterruptSelectorType: TYPE = WORD;  IOCBPtr: TYPE = LONG POINTER; -- actual structure is head-specific  IORegionType: PRIVATE TYPE = MACHINE DEPENDENT RECORD [    fcbPtrs(0): ARRAY AgentDeviceIndex OF LONG POINTER];  firstRealPage: CARDINAL = 0;	-- lowest hardware-accessible page  ioRegionPage: CARDINAL = firstRealPage; -- real memory reserved for IORegion  noRestart: LONG CARDINAL = 0; -- default parameter to StopEmulator proc  « PUBLIC variables (exported from ProcessorHeadGuam) »  ioRegionPtr: READONLY LONG POINTER TO IORegionType;  ioRegionPageCount: READONLY CARDINAL;	-- size of IORegion reserved memory  numberRealPages: READONLY Environment.PageCount;  -- total of real memory (except display)  numberVirtualPages: READONLY Environment.PageCount;  -- limit of supported VM  « Head initialization of FCB ptr (from IORegion table) »  GetFCBPtr: PROC [devIndex: AgentDeviceIndex] RETURNS [LONG POINTER] = INLINE    {RETURN [ioRegionPtr.fcbPtrs[devIndex]]};  « Agent Notification and other special procedures »  CallAgent: PROC [devIndex: AgentDeviceIndex] = MACHINE CODE    {Mopcodes.zESC, aCALLAGENT};  MapDisplay: PROC    [startingVirtualPage: Environment.PageCount, startingRealAddress: LONG UNSPECIFIED,     totalPageCount: CARDINAL, pageCountInEachBlock: CARDINAL] = MACHINE CODE    {Mopcodes.zESC, aMAPDISPLAY};  StopEmulator: PROC [secondsTillRestart: LONG CARDINAL ¬ noRestart] = MACHINE CODE    {Mopcodes.zESC, aSTOPEMULATOR};  END.LOG27-Jan-93 - JPM - Created from BountyInputOutput.mesa 3-Mar-93 - JPM - Removed QueueType 8-Mar-93 - JPM - Made numberRealPages an Environment.PageCount to match processor FCB