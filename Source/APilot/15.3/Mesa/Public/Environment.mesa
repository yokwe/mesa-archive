-- Environment.mesa (last edited by: RXJ      on: 30-Mar-83 11:29:49)-- Copyright (C) Xerox Corporation 1982. All rights reserved.Environment: DEFINITIONS =  BEGIN  -- Fundamental properties of the Mesa processor  bitsPerWord: CARDINAL = 16;  logBitsPerWord: CARDINAL = 4; -- logarithm of bitsPerWord  bitsPerByte, bitsPerCharacter: CARDINAL = 8;  logBitsPerByte, logBitsPerChar: CARDINAL = 3; -- logarithm of bitsPerByte  bytesPerWord, charsPerWord: CARDINAL = bitsPerWord/bitsPerByte;  logBytesPerWord, logCharsPerWord: CARDINAL = logBitsPerWord - logBitsPerByte;  -- logarithm of bytesPerWord  wordsPerPage: CARDINAL = 256;  bytesPerPage, charsPerPage: CARDINAL = wordsPerPage*bytesPerWord;  logWordsPerPage: CARDINAL = 8; -- logarithm of wordsPerPage  logBytesPerPage, logCharsPerPage: CARDINAL = logWordsPerPage + logBytesPerWord;  -- logarithm of bytesPerPage  -- The following is the base pointer to the first 64K of virtual memory  first64K: Base = LOOPHOLE[LONG[0]];  maxINTEGER: INTEGER = LAST[INTEGER]; -- 32767  minINTEGER: INTEGER = FIRST[INTEGER]; -- -32768  maxCARDINAL: CARDINAL = LAST[CARDINAL]; -- 177777B  maxLONGINTEGER: LONG INTEGER = LAST[LONG INTEGER]; -- 2147483647  minLONGINTEGER: LONG INTEGER = FIRST[LONG INTEGER]; -- -2147483648  maxLONGCARDINAL: LONG CARDINAL = LAST[LONG CARDINAL]; -- 4294967295  Byte: TYPE = [0..255];  Word: TYPE = [0..65535];  Long, LongNumber: TYPE = MACHINE DEPENDENT RECORD [    SELECT OVERLAID * FROM      lc => [lc: LONG CARDINAL],      li => [li: LONG INTEGER],      lp => [lp: LONG POINTER],      lu => [lu: LONG UNSPECIFIED],      num => [lowbits, highbits: CARDINAL],      any => [low, high: UNSPECIFIED],      ENDCASE];  -- Common types used throughout Pilot  Base: TYPE = LONG BASE POINTER;  BitAddress: TYPE = MACHINE DEPENDENT RECORD [    word: LONG POINTER,    reserved: [0..LAST[WORD]/bitsPerWord) ¬ 0,    bit: [0..bitsPerWord)];  Block: TYPE = RECORD [    -- descriptor for arbitrary sequence of bytes    blockPointer: LONG POINTER TO PACKED ARRAY [0..0) OF Byte,    startIndex, stopIndexPlusOne: CARDINAL];  nullBlock: Block = [NIL, 0, 0];  maxPagesInMDS: CARDINAL = 256;  PageNumber: TYPE = LONG CARDINAL --[0..2**24-2]--;    -- Note that 2**24-2 is one less than the highest numbered VM page    --  provided by the hardware; the highest numbered VM page, 2**24-1, is    --  pre-empted for system purposes.    firstPageNumber: PageNumber = 0;    lastPageNumber: PageNumber = 16777214 --2**24-2--;  PageOffset: TYPE = PageNumber;    firstPageOffset: PageOffset = firstPageNumber;    lastPageOffset: PageOffset = lastPageNumber;  PageCount: TYPE = LONG CARDINAL --[0..2**24-1]--;    firstPageCount: PageCount = 0;    lastPageCount: PageCount = lastPageNumber+1;      -- PageNumber/LONG POINTER conversions    LongPointerFromPage: PROCEDURE [page: PageNumber]    RETURNS [LONG POINTER] = INLINE {RETURN[LOOPHOLE[page*wordsPerPage]]};  PageFromLongPointer: PROCEDURE [pointer: LONG POINTER]    RETURNS [PageNumber] = INLINE {    RETURN[LOOPHOLE[pointer, PageNumber]/wordsPerPage]};    -- The following is OBSOLETE and is retained here for compatibility only.    maxPagesInVM: PageCount = lastPageCount;  END.LOGTime: April 26, 1978  4:34 PM	PXM    	Created fileTime: May 3, 1978  1:46 PM	HXL  	Merged contents of AltoDefs into file; changed name of file from "Processor".Time: June 21, 1978  10:03 AM	HXL  	Added maxINTEGER, minINTEGER, maxCARDINAL, maxLONGINTEGER, minLONGINTEGERTime: July 21, 1978  11:31 AM	 HXL  	 Moved type 'Block' from Stream to EnvironmentTime: August 14, 1978  10:26 AM	TXH    	Used FIRST and LAST for number boundsTime: March 7, 1979  10:31 AM	PXM    	Added Long; increased upper bound for PageNumber, PageOffsetTime: July 16, 1979  6:26 PM	WDK    	Added first64K, Base.Time: January 25, 1980  5:46 PM		 FXH    	AR1607: nullBlock added, AR1740: logBitsPerByte, logBitsPerWord added; change any branch of LONG NUMBER to use UNSPECIFIEDs.Time: April 17, 1980  12:08 AM		FXH    	added BitAddress.Time: 13-Aug-81 15:19:31	RXJ     	Block.blockPointer points to array of Byte.Time: 20-Oct-82 12:01:48	AWL      	Made PageCount, PageNumber, PageOffset be (logical) subranges of LONG CARDINALs.  maxPagesInVM is now obsolete and defined in terms of lastPageCount.Time: 30-Mar-83 11:30:03	RXJ     	Added LongPointerFromPage and PageFromLongPointer.