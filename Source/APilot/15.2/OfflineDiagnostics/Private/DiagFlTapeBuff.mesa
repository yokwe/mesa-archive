-- Copyright (C) 1987  by Xerox Corporation. All rights reserved. ---- File: DiagFlTapeBuff.mesa-- Edited by: PJT 11-Mar-87 16:22:52-- DiagFlTapeBuff: DEFINITIONS= BEGIN dataType: TYPE= MACHINE DEPENDENT{ 	constant(1),	incrementing(2),	random(3),	diagnostic(4),	useWrBuff(5),	unknown(6)	}; --read ID error types errorType: TYPE= MACHINE DEPENDENT{ 	track(0),	side,	sector,	sectorLength,	crc	}; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- clears a buffer to all 0's  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ZeroBuffer:	PUBLIC PROCEDURE [	wordCount: CARDINAL,	ptr: LONG POINTER TO ARRAY OF WORD¬ NIL]; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- generate data buffers  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ GenDataBuffer:	PUBLIC PROCEDURE [	data: CARDINAL¬ 0,	kindOfData: dataType¬ constant,	  unit: CARDINAL¬ 0,	  --use when kindOfData= diagnostic	  cylinder: CARDINAL¬ 0,  --use when kindOfData= diagnostic	  head: CARDINAL¬ 0,	  --use when kindOfData= diagnostic	  sector: CARDINAL¬ 0,	  --use when kindOfData= diagnostic	wordCount: CARDINAL,	ptr: LONG POINTER TO ARRAY OF WORD¬ NIL];  -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- compare buffers  of given size -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ CompareData: PUBLIC PROCEDURE [	writtenDataPtr:	LONG POINTER TO ARRAY OF WORD¬ NIL,	kindOfData:	dataType¬ constant,	  data:		CARDINAL¬ 0,	  --use when kindOfData= constant	  unit:		CARDINAL¬ 0,	  --use when kindOfData= diagnostic	  cylinder:	CARDINAL¬ 0,	  --use when kindOfData= diagnostic	  head:		CARDINAL¬ 0,	  --use when kindOfData= diagnostic	  sector:	CARDINAL¬ 0,	  --use when kindOfData= diagnostic	readDataPtr:	LONG POINTER TO ARRAY OF WORD¬ NIL,	wordCount:	CARDINAL¬ 0]    RETURNS [	dataError:	BOOLEAN¬ FALSE,	wordIndex:	CARDINAL¬0,	expected:	CARDINAL¬0,	observed:	CARDINAL¬0];			     -- When writtenDataPtr# NIL then the writtenDataPtr will always be used  --  otherwise the data will be reconstructed by using kindOfData. -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- compare floppy tape ID -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ CompareID: PUBLIC PROCEDURE[	ptrToID: LONG POINTER TO ARRAY OF WORD¬ NIL,	track: CARDINAL¬ 0]    RETURNS[	idError: BOOLEAN¬ FALSE,	byteIndex: CARDINAL¬0]    END... --of DiagFlTapeBuff.mesaLOG