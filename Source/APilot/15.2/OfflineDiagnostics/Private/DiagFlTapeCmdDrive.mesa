-- Copyright (C) 1987  by Xerox Corporation. All rights reserved.---- File: DiagFlTapeCmdDrive.mesa-- Edited by: PJT 11-Mar-87 16:30:15-- DIRECTORY DiagFlTapeCmdDes	USING	[Command];  DiagFlTapeCmdDrive: DEFINITIONS = BEGIN DiagFlTapeCmdDriveImpl: PROGRAM;	 LoopCount:		LONG CARDINAL; remLoopCnt:		LONG CARDINAL; -- this one gets decremented IOCommand:		DiagFlTapeCmdDes.Command; Continue:		BOOLEAN; MaxCmdsInLoop:		CARDINAL;  parameterRecord: TYPE= RECORD [	--smallest size item, sector	item1Freeze:		BOOLEAN¬ FALSE,	item1:			CARDINAL¬ 0,	item1Change:		CARDINAL¬ 0,	item1Incr:		BOOLEAN¬ TRUE,	minItem1:		CARDINAL¬ 0, --minSector	maxItem1:		CARDINAL¬ 0, --maxSector	--head	item2Freeze:		BOOLEAN¬ FALSE,	item2:			CARDINAL¬ 0,	item2Change:		CARDINAL¬ 0,	item2Incr:		BOOLEAN¬ TRUE,	minItem2:		CARDINAL¬ 0, --minHead	maxItem2:		CARDINAL¬ 0, --maxHead	--track	item3Freeze:		BOOLEAN¬ FALSE,	item3:			CARDINAL¬ 0,	item3Change:		CARDINAL¬ 0,	item3Incr:		BOOLEAN¬ TRUE,	minItem3:		CARDINAL¬ 0, --minCylinder	maxItem3:		CARDINAL¬ 0, --maxCylinder			item4Freeze:		BOOLEAN¬ TRUE,	item4:			CARDINAL¬ 0,	item4Change:		CARDINAL¬ 0,	item4Incr:		BOOLEAN¬ TRUE,	minItem4:		CARDINAL¬ 0, --minUnit	maxItem4:		CARDINAL¬ 0, --maxUnit			--what to transfer, how many and how far	xferItem1:		BOOLEAN¬ TRUE,	xferItem2:		BOOLEAN¬ FALSE,	xferItem3:		BOOLEAN¬ FALSE,	xferItem4:		BOOLEAN¬ FALSE,	itemsToXfer:		CARDINAL¬ 1,	xferPassedMaxItem1:	BOOLEAN¬ TRUE,	xferPassedMaxItem2:	BOOLEAN¬ TRUE,	xferPassedMaxItem3:	BOOLEAN¬ FALSE	]; UpdateParameters: PROCEDURE [parmRcPtr: LONG POINTER TO parameterRecord]	RETURNS [newItemsToXfer:		CARDINAL¬ 0,		 newItem1:			CARDINAL¬ 0,		 newItem2:			CARDINAL¬ 0,		 newItem3:			CARDINAL¬ 0,		 newItem4:			CARDINAL¬ 0]; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- Does nothing (required to execute user selected subtests) -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  NoOp: PROCEDURE [];				 -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- Starts a loop going -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  StartLoop: PROCEDURE []; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- loop control -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  EndLoop: PROCEDURE []; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- sets end of command file -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  SetEndOfFile: PROCEDURE []; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- to delay a given amount of time before executing the next command -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  TimeDelay: PROCEDURE []; -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -- executes a command given command file -- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ExecuteCommands: PROCEDURE [commandArray:		LONG DESCRIPTOR FOR ARRAY OF CARDINAL¬ DESCRIPTOR [NIL, 0]]; END...  --of DiagFlTapeCmdDrive  