OfflineDiagKernel.doc: This files contains the documentation forOfflineDiagKernelDove and OfflineDiagKernelDLion.Last updated on   14-Jan-86  8:30:41  by  KLCopyright (C) 1985, 1986 by Xerox Corporation. All rights reserved.Documentation base:	OfflineDiagInterface.mesa	OfflineDiagInterfaceExtra.mesa	OfflineDiagnosticControlModule.mesa	OFLFloppyExecImpl.mesa	OfflineDiagnosticVersionImpl.mesa	OfflineDiagTTYDove.mesa	OfflineDiagTTYImplDove.mesa	CMDiagMsgKeysDove.mesa	CMDiagMsgKeysImplDove.mesa	1.0  Introduction     OfflineDiagKernel (OfflineDiagKernelDove or OfflineDiagKernelDLion) is a     Utility Pilot client. It is a binary configuration file that is bound with     UtilityPilotKernel, either DLion or Dove basic heads and all the components     required to build a bootable system. Offline diagnostics can then run as     clients of OfflineDiagKernel by simply binding with OfflineDiagKernelDove     or OfflineDiagKernelDLion.     The kernel package provides standardized and, hopefully, user-friendly     interfaces between the users of the various offline diagnostic packages and     the diagnostic clients: it provides facilities to the diagnostic programs to     interact with the users of the various diagnostic packages via menus, option     tables and/or interactive prompts; correspondingly, users control the     running of the various diagnostic programs by interacting with the kernel     module by selecting options from an option table or menu items from a menu     or by simply responding to interactive prompts. Various flexible data     presentation facilities are available to the programmers to present both     static and/or dynamic test data to the users. In this manner, an uniform      and consistent user interface is provided to both the users of the      diagnostic packages and the diagnostic programmers.          Functions such as error checking, management of common memmory spaces, menu     generation, screen management, transfer between the kernel and client     worlds and system interfacing are automatically performed by     OfflineDiagKernel. For details, please see OfflineDiagInterface,     OfflineDiagInterfaceExtra, OfflineDiagTTYDove and their implementaion     modules.          OfflineDiagKernel supports single client boot files as well as multiple     client boot files; in concert with OFLFloppyExecDove, clients spanning     multiple floppy disks are supported. These various configurations can be      created by simply binding the various clients in the same config file with     the kernel modules (OfflineDiagKernelDove.bcd or OfflineDiagKernelDLion.bcd).1.1  Definitions     To minimize confusion, a few definitions are in order.             a) OfflineDiagKernel or kernel is the generic term used for	   OfflineDiagKernelDLion and OfflineDiagKernelDove. The two are	   identical except OfflineDiagKernelDLion binds with BasicHeadsDLion	   and OfflineDiagKernelDove binds with BasicHeadsDove.             b) A user is defined as someone who runs a diagnostic ssytem. It can	   be a normal user of a workstation, a system administrator, a	   techical support personnel, a manufacturing personnel or a programmer.	   Whenever a user logs on, a security level is assigned which 	   determines what the user can do.             c) A diagnostic client, or simply a client, refers to a 	   program/programmer combination which wishes to use the facilities	   provided by OfflineDiagKernel to implement an application.	   	d) Menu, to the user, is a list of items from which the user can make	   selections simply by entering the numbers associated with the	   selections. This end-user menu is different for different classes of	   users in terms of contents and ordering of menu items.	   	   To the diagnostic client, a menu is a collection of logically related 	   test items from which OfflineDiagKernel can build an end-user menu	   based on the end-user security level. Normally, an end-user menu is 	   a subset of the diagnostic client menu.	   	   Internally, in reference to the kernel module, a menu is a node in a	   general tree. These menu nodes are built from a data base of test items	   a client has deposited in a heap. Each menu item can be an actual test	   or a pointer to another menu. The depth (???) of the tree is only	   limited by the available real memmory.	   2.0  Dove Diagnostic Screens     OfflineDiagKernel uses the keyboards and bitmapped displays supported by     both DLion and Dove machines as the respective input and output media.     Generally, the bitmapped screen is divided into 3 orthorgonal windows as     follows:  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running: <Diagnostic Package>  Selection: <Test name> 		      I  I									      I  I									      I  I   O  SelectionMenu/TableOfClients/OptionTable/TestParameters     	      I  I	 								      I  I									      I  I   O  Main Prompt Line - Interactive prompts are dispalyed here.           I  I   O  Auxiliary Prompt Line - For additional interactive prompts.          I  I									      I  I===========================================================================I  I									      I  I   Message Window							      I  I									      I  I   This is  a general purpose output area shared by both the kernel and    I  I   diagnostic programmers. The kernel outputs help and error messages      I  I   here. Diagnostic programmers can use this area for displaying           I  I   progress information and/or helpful prompts. Window management is       I  I   performed by the kernel module. Clients writes into this window via     I  I									      I  I			PutMessage or help texts.			      I  I									      I  I									      I  I===========================================================================I  I									      I  I   Data Window 							      I  I									      I  I   This display area is for the exclusive use of the clients. Dynamic      I  I   test data and/or positionally fixed data can be displayed here.         I  I   Window management is  the responsibility of the kernel module. Clients  I  I   output information to this area via the following two facilities:       I  I									      I  I	 PutData						     	      I  I	 DisplayFixedPositionData - At the top of this window. Other  than    I  I			            sharing the same window, has no effect on I  I			            PutData.				      I  I            						   		      I  +===========================================================================+     Window creation and management are automatic functions performed by the     kernel module. The message and data windows are not displayed until they are     needed. If the Message Window is needed and the Data Window is not used,      the Message Window takes up the entire area below the prompts. When the     need arises to create the Data Window, the Message Window will be     automatically trimmed. When both windows are created, the Data Window is     twice the size of the Message Window.          Both the Data and Message windows are created whenever the Data Window     is created.          The sizes of the windows differ from screen to screen. They use the space     left over by the top window.2.1  Floppy Executive Screen     This screen is displayed only if the Floppy Executive is bound in the boot     file. This is the  case when client pacakges are stored on one or more     floppy disks; the Floppy Executive then loads the clients from these      floppy disks.          2.1.2 	Screen Lay-Out  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running:					    		              I  I									      I  I   Please insert second diagnostic floppy disk. Is the floppy disk ready?  I  I	 								      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear automatically only if needed.		      I  I									      I  I   							        	      I  I	 					 			      I  I            						   		      I  +===========================================================================+     When the second floppy disk is      2.2.2  Valid inputs     "Please insert second diagnostic floppy disk. Is the floppy disk ready?"     prompts the user to insert the second floppy diskette containing the     diagnsotic programs.          "Y" loads the program files on the second floppy diskette. While loading,     the following progress message is displayed:        	"Loading diagnostics from the second floppy disk..."	     "N" redisplays the prompt.          Once the programs are loaded, the kernel will check the version numbers     of the clients. If the version numbers of the kernel and the clients do not     match, the following message is displayed:          "Version mismatch!!! First floppy version: <>  Second floppy version: <>".          Along with the above message, the user is promnpted with:          "Should I ignore version mismatch and continue? [Y/N]".          "Y" exits and presents the Login Screen to the user.     "N" reprompts the user to load the second diagnostic diskette.     2.3  Login Screen     This is the first screen presented to the user after a successful boot.     The purpose of this screen is to allow users to log in at the different     security levels.     Diagnostic users are divided into 5 classes as follows:	 Normal Users - No login needed. Selecting 1 will advance to next menu.         System Administrators - "rgmsn"	 Field Service  - "rexifsn"	 Manufacturing - "fle"	 Programmers/Engineers - "do8"	      The tests each class of users can run may be different depending on the     riskiness of the tests. Generally, the test runnable by the Normal Users are     harmless, so no login is required. All the other classes of users must enter     a valid password. The passwords entered determine the contents of the menus     that will be generated and presented to the users for selection. The     specification of who can run each test is done by the diagnostic programmer.     Also, the presentation order of the menu items may be different for      different classes of users.          The passwords are meant to make the user aware of the increased in riskiness     of damaging the system when other than Normal Users is used; they are not     meant to deny access to facilities.2.3.1  Screen Lay-Out  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running Login				    		              I  I									      I  I   What class of user do you belong to?				      I  I	 								      I  I      1 - Normal User					              I  I	 								      I  I	 2 - System Administrator				              I  I	 								      I  I	 3 - Technical Support				     		      I  I									      I  I   Please enter selection:					              I  I   < "Please enter password:" displayed here if 2 or 3 is selected >	      I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear automatically only if needed.		      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I	 					 			      I  I            						   		      I  +===========================================================================+2.3.2  Valid inputs     The valid inputs for this screen are "1", "2", "3", "?" and STOP.     Entering a question mark displays this screen's help text on the screen. This     screen's help text is as follows:     Log In Help        Normal users can only run harmless tests that give qualitative	indications. No login is needed        Other users can run tests that may damage the system. They must login with        a valid password.          "1" identifies the user as a normal user. All menu generated will only     contain items selectable by this class of users. This selection exits the      Login Screen and presents the Subsystem Selection Screen to the user.     "2" identifies the user as a System Administrator. The user will be prompted     to enter a password. If the password entered is incorrect, the user must     reselect a menu item and start over.     "3" identifies the user as a Technical Representative, from Manufacturing or     a programmer. The user will be prompted to enter a password. The password     entered will identify the user's organization. Again, if the password entered     is incorrect, the user must reselect a menu item and start over.     STOP aborts the current action or redisplays the Login Menu.          After entering the correct password, the Subsystem Selection Screen is     presented to the user if the number of diagnsotic clients is greater than     one.2.4  Subsystem Selection Screen     This screen is displayed after a user has successfully logged in. This screen     presents to the user the diagnostic packages bound into this boot file. If     the boot file contains only on diagnostics package, this screen is bypassed     automatically; and the diagnostic screen containing the top-level      menu for the subsystem under test is presented to the user for selection.     If there are more than one diagnostic packages bound into the boot     file, the Subsystem Selection Menu containing all the available packages     is displayed for selection.2.4.1  Screen Lay-Out  +===========================================================================+  I   ID   Xerox (C) Xerox Corporation 1985, 1986. All rights reserved.	      I  I   Running:     		              		      I  I									      I  I   Available Selections						      I  I	 								      I  I   ( Sample runtime menu. It varies depending on boot file contents )      I  I	 								      I  I      1 - Ethernet Tests						      I  I	 								      I  I	 2 - Floppy Disk Tests						      I  I	 								      I  I	 3 - Keyboard/Display/Mouse Tests				      I  I	 								      I  I	 4 - Formatter, Scavenger and Bad Page Utility			      I  I      ...								      I  I	 								      I  I	 n - Hard Disk Tests						      I  I									      I  I   Please enter selection:					              I  I									      I  I===========================================================================I  I									      I  I   Message Area - Help and error messages are displayed here. This will    I  I                  appear only if needed.				      I  I	 	      						    	      I  I									      I  I									      I  I									      I  I   							        	      I  I	 					 			      I  I            						   		      I  +===========================================================================+ 2.4.2  Valid inputs     The valid inputs for this screen are "1" to "n", "?" and STOP.     "1" to "n" select the associated subsystem for testing. Once a vaild      subsystem has been selected, the top-level menu for the subsystem under     test is presented to the user for selection.          STOP exits this menu and returns to the Login Menu.          "?" displays some useful information concerning features to the user:          Useful information        The blinking cursor points to the applicable prompt. Do as prompted        SPACE and CR are input terminators. BACKSPACE erases the last input character	A question mark alone (?) gives help to the entire menu	<n> followed by ? gives help to the item identified by n	UNDO inverts the screen	STOP aborts the current test, if allowed; or exits the current menu     3.0  Data presentation facilities     Because diagnostics need to give user information of various forms,      OfflineDiagKernel provides many simple facilities to the programmers to     present test information and data to the users. These include positionally     fixed test paramters and data, menus and option tables, dynamic helps      messages and data, and interactive prompting. Additionally, the kernel     automatically displays relevant information such as subsystem under test and     test selected, test results and a simple message indicating what the last     selection, if any, was whenever a menu is entered.3.1  Positionally fixed test information     Clients of OfflineDiagKernel can present data to the user in all three     regions of the display. At the top window, positionally fixed info can be     displayed in place of the menu, the latter of which will be automatically     redisplayed after the test has completed. All the data fields can be updated     dynamically. This is meant to display test set up information. The display     has the following format:     <Display Title - optional>         Item1	Item2  Item3 ...  (Items per row is limited by screen width)         ...         Itemn	Itemm  Itemz ...  (Number of rows is up to programmer)     Each display item can have:         a) Name position  b) Name  c) String value  d) Numeric value and position     The facility to use is PutTestParameters:          PutTestParameters: PROCEDURE [  	parameters: LONG POINTER TO FixedPositionDisplayRecord ¬ NIL,	upDateOnly:  BOOLEAN ¬ TRUE];  -- TRUE => Print values only.          When this is used, the remainder     of the screen  retains all its properties. The only restriction is that     option tables can not be used, since it occupies the same physical space.     If it is desireable to use option tables and positionally fixed displays,      then the option table must be displayed at the top and the positionally     fixed data displayed at the top of the Data Window via the facility     DisplayFixedPositionData, which will be discribed later.	 3.2  Option tables     Clients of OfflineDiagKernel can present option tables, one at a time, in     place of the menu for client selection. An option table takes the      following form:     <Option Table Title - optional>         Option1   Option2   Option3  .... (Screen width is limiting factor)         ....	          OptionN  OptionM   OptionZ  .... (Number of rows is up to programmer)     The facility to use is GetAnOption:          GetAnOption: PROCEDURE [optionTable: LONG POINTER TO OptionsRecord ¬ NIL,  		  defaultOption: CARDINAL ¬ 0, -- When CR = the only input		  optionPrompt: LONG STRING ¬ NIL,  -- Prompt for input.		  optionHelp: LONG POINTER TO HelpText ¬ NIL,		  justDisplayTable: BOOLEAN ¬ FALSE]  		  RETURNS [selectedOption: CARDINAL];		       The option table, once passed to the kernel after initial use, remains valid     until another option table is passed to the kernel via GetAnOption. This      means that "optionTable" should be set to NIL after the first use of     GetAnOption if the client intends to loop on the contends of the option      table by using GetAnOption.           The option table is just a client-created menu. It behaves just like the     kernel-generated menu.3.3  Help texts     Help texts can be inserted into menus, every menu item, option tables,     every item in an option table and for any instance of interaction with the      user. They are all displayed in the Message Window. The global help text for     a menu or option table is displayed when a lone question mark (?) is entered;     the individual explanations are displayed when the selection number followed     by a question mark are entered; interactive help texts are displayed by     entering a lone question mark.          When users inputs an illegal entry, helpful prompts will be displayed to     the user to assist the user to carry on.3.4  Dynamic messages     The Message Window is a shared area which can be used to give progress      and/or helpful information to the user any time. Any data can be     output to it. The kernel also use this area for outputting error messages or     helpful information to the users.     The facility to use is PutMessage:          PutMessage: PROCEDURE [message: LONG STRING ¬ NIL,  		 beep: BOOLEAN ¬ FALSE,		 -- startWithNewLine TRUE invalidates spaceBeforePrinting		 startWithNewLine: BOOLEAN ¬ TRUE,  -- CRLF		 -- One can insert numOfBlankLine blank lines.		 numOfBlankLines: CARDINAL ¬ 0,		 blankSpaces: CARDINAL ¬ 1,   		 --clearMessageAreaFirst TRUE invalidates startWithNewLine		 -- and spaceBeforePrinting		 clearMessageAreaFirst: BOOLEAN ¬ FALSE];3.5  Positionally fixed test data     Clients of OfflineDiagKernel can present positionally fixed test data to      the user at the top of the Data Window. The data fields can be updated     dyamically. The display has the following format:     <Display Title - optional>         Item1	Item2  Item3 ...  (Items per row is limited by screen width)         ...	          Itemn	Itemm  Itemz ...  (Number of rows is up to programmer)     Each data item can have the following fields:         a) Name position  b) Name  c) String value  d) Numeric value and position     The facility to use is DisplayFixedPositionData:          DisplayFixedPositionData: PROCEDURE 	[displayData: LONG POINTER TO FixedPositionDisplayRecord ¬ NIL,	 clearDataArea: BOOLEAN ¬ FALSE, -- TRUE clears before printing.	 upDateOnly:  BOOLEAN ¬ TRUE];  -- TRUE => Print values only.     While this is being displayed, the rest of the data window retains its     properties, and PutData retains its full usage with one exception: PutData      can not access the area occupied by DisplayFixedPositionData.3.6  Random test data     Any data can be displayed in the Data Window by PutData, including a fixed     heading. If a heading is displayed, it is displayed at the top of the      Data Window or below the positionally fixed data if the latter exits.      Automatical clearing of the window area, a kernel function, does not affect     both the heading and positionally fixed data.          The Data Window is the private area of the client, who is guarrantteed of     its exclusive usage.          The facility to use is PutData:          PutData: PROCEDURE [data: LONG STRING ¬ NIL, -- String to be printed.  		      -- numberAfterData = LAST[LONG CARDINAL] => no number to		      -- be printed after the data STRING. Any other value will		      -- be printed after data.  		      numberAfterData: LONG CARDINAL ¬ LAST[LONG CARDINAL],  		      dataAreaHeading: LONG STRING ¬ NIL, -- This is not cleared  		      -- clearHeadingAndData TRUE clears the entire Data Area		      -- including dataAreaHeading. dataAreaHeading must be NIL.  		      clearHeadingAndData: BOOLEAN ¬ FALSE,		      -- clearDataAreaOnly does not clear the heading. Only the		      -- data below the heading is cleared.  		      clearDataAreaOnly: BOOLEAN ¬ FALSE, 		      		      -- Control variables for formatting dispaly data.  		      startWithNewLine: BOOLEAN ¬ FALSE, -- CRLF		      numOfBlankLines: CARDINAL ¬ 0, --  Blank lines inserted		      -- spaceBeforePrinting has effect only if startWithNewLine		      -- and clearDataAreaOnly are both FALSE.		      blankSpaces: CARDINAL ¬ 0,  -- Spaces before printing		      -- xPosition = 0 => Let Control module and blankSpaces		      -- specify the position on the line to print data.		      -- Non-Zero xPosition overrides automatic positioning.		      -- The Control Module will start printing at xPosition		      -- after calculating the current line.		      xPosition: CARDINAL ¬ 0, -- Position to start printing		      -- Pause at the bottom of the Data Area so that the user		      -- can review the data before they are cleared.		      pauseAtBottomOfDataArea: BOOLEAN ¬ FALSE];     3.7  Information displayed automatically by the kernel modules     Information such as menus, subsystem under test and current test being run     are automatically generated and displayed at the top of the screen.  Test     results - passed (P), failed (F), ambiguous (?) and none (blank) - are     displayed, if applicable, in front of each menu item whenever a menu is     printed or a test has returned. When at least one test has been run from a     menu, a message indicating the last menu selection is displayed when the     menu is entered.4.0  Interactive facilities     Various facilities are provided by the kernel package to interact with the     user. These allow the user to control the running of a diagnostic program     and allows the diagnostic program to get runtime input from the users.     All interactions take place on the Main Prompt Line or the Auxiliary Prompt     Line. The acive prompt is the one with the blinking cursor. All prompt line     management is performed by the kernel. 4.1  GetYesNo PROCEDURE [prompt: LONG STRING ¬ NIL,		         help: LONG POINTER TO HelpText ¬ NIL,			 defaultSpecified: BOOLEAN ¬ FALSE,			 default: BOOLEAN ¬ FALSE]  	        RETURNS [YesReturnsTrue: BOOLEAN];     This outputs "Please enter Y(es) or N(o):" or the customized prompt supplied     by the programmer on the Auxiliary Prompt Line. A "Y" or "y" returns TRUE;      an "N" or "n" returns FALSE; and CR returns the default value. Any other      input will cause "Please enter Y(es) or N(o)" to be issued by the kernel.     The procedure will not return until a valid input is received, or the STOP     key is entered to abort the operation in progress.4.2  GetANumber: PROCEDURE [		 prompt: LONG STRING ¬ NIL,  -- Personalized prompt.  		 help: LONG POINTER TO HelpText ¬ NIL,  -- Explanation  		 lowLimit: LONG CARDINAL ¬ 1,		 upperLimit: LONG CARDINAL ¬ LAST [LONG CARDINAL],		 numberIsHexadecimal: BOOLEAN ¬ FALSE,		 numberIsLong: BOOLEAN ¬ FALSE,		 defaultNumber: LONG CARDINAL ¬ LAST[LONG CARDINAL]]  	 RETURNS [longNumber: LONG CARDINAL,  -- 0 if number is not long		 -- number is 0 if numberIsLong is TRUE.		 number: CARDINAL,		 -- Directional default is FOREWARD.		 foreward: BOOLEAN ¬ TRUE, -- FALSE => reverse		 numberInStringFormat: LONG STRING ]; -- In specified base     The default prompts are "Please enter a hexadecimal number" or "Please enter     a decimal number", depending on the BOOLEAN numberIsHexadecimal. It is          printed on the Auxiliary Prompt Line.     This procedure returns a number as specified by the programmer. The     procedure returns only when the user enters a vaild number as specified in     the input parameters.          This procedure is also very useful for creating small option tables that     fits on a line. This can be done by creating a STRING enumerating the     options. Bounds can be set appropriately to ensure that the option returned     is allowed. For example, the following string... let's say, optionString...             "Please select bad page disposition[ 1-Ignore  2-Mark Bad  3-Repair ]"            can be passed as the "prompt" argument in GetANumber as follows:             userSelectedOption ¬ GetANumber[prompt: optionString,					upperLimit: 3,					defaultNumber: 3]					     The program can take the appropriate action depending on userSelectedOption.4.3  GetAnOption: PROCEDURE [		  optionTable: LONG POINTER TO OptionsRecord ¬ NIL,  		  defaultOption: CARDINAL ¬ 0, -- When CR = the only input		  optionPrompt: LONG STRING ¬ NIL,  -- Prompt for input.		  optionHelp: LONG POINTER TO HelpText ¬ NIL,		  justDisplayTable: BOOLEAN ¬ FALSE]  	  RETURNS [selectedOption: CARDINAL];       The optionPrompt is printed on the Main Prompt Line. This procedure returns     only if the option selection is a vaild option in the optionTable; ie. it     scans the optionTable for the existence of the option in the table before     returning. The message "No such option" is printed on the message area if     the user input is not in the table.4.4  GetAString:  PROCEDURE [prompt: LONG STRING ¬ NIL, -- Personalized prompt  			     defaultString: LONG STRING ¬ NIL,	      		     help: LONG POINTER TO HelpText ¬ NIL, -- Help			     echoWithStar: BOOLEAN ¬ FALSE]		    RETURNS [LONG STRING];		         GetAString is for getting a string input, such as a host name, from the user.     This procedure should not be used as a means to get a command from the user.     All commands should be hidden behind menu/option selections. The idea is:         What you see is what you get... And if you don't see it, an erroneous         input or entering a question mark should give you what you to go on.4.5  HitAnyKeyToContinue: PROCEDURE [   		  prompt: LONG STRING ¬ NIL, 		  beep: BOOLEAN ¬ TRUE];     HitAnyKeyToContinue issues "Enter any key to continue:" or prompt: on the      Auxiliary Prompt Line. It temporarily pauses the test until the user enters     a key. If the key is the STOP key, the test is terminated; all other keys     cause the test to continue at the point of pause.5.0  Transfer of control     An offline diagnostic package is a boot file made from a bcd created by     binding the client modules with OfflinfDiagKernel<Dove or DLion>.bcd. Once     booted, the user must go through System Configuration Verification, Login     and Subsystem Selection screens before getting to the client menus. Once     there, operation is straight forward. User selects a menu item for     execution. If the selection is a genuine test, it is executed; if the     selection selects another menu, a new menu is generated based on the user     security level and displayed on the screen for user selection.     Whenever a menu selection is a test, control is passed to the client program     until, normally, the test runs to a point and RETURNs with a test result.     In addition to this CALL/RETURN transfer mechanism, the kernel provides     several additional transfer facilities. These include the STOP key,     a signal and two procedures.5.1  The signal AbortCurrentTest     The basic non-CALL/RETURN transfer mechanism between the kernel     and client packages is implemented by a PUBLIC signal:	 AbortCurrentTest: SIGNAL     This signal can be intercepted by the client, and therefore, can be used as     an internal global control transfer mechanism within the client's modules.      If the client should REJECT this signal, then control is transfer back to      the kernel, which interprets it as a genuine request for aborting the test.     It then proceeds to clean up its internal states, clean up the screen as          needed and redisplay the menu if the client has used the menu area for     displaying option tables and/or positionally fixed test parameters. If the     signal causes a complete exit from the top level menu of the client package,     the user is given the following prompt:        "Test data will be deleted upon exit. Is this OK ?"         If the reponse is "Y" or "y" all the client heaps are delete, the client     package is exited and control is given to the Subsystem Selection Menu or     the Login Menu depending on whether there are more than one client packages      present or not.5.2  STOP key     Whenever the user is being prompted for a response, the STOP key can always     be entered. The consequence of hitting the Abort/Stop Key, as far as the     kernel is concerned, is one of the following: 	1) If the user is running a test, the test is aborted. The menu is	   redisplayed if the aborted test hogged the entire screen.	2) If the client is in the process of selecting a menu item, then the	   parent menu will be re-entered after exiting the current menu. In	   this environment, it is used as a means to backtrack up the menu tree.	        The internal mechanism used is the signal AbortCurrentTest. Therefore,      if the STOP key is depressed while still in the client context, the client      can intercept this signal and perform whatever local operation it desires.5.3  LookForAbort     LookForAbort is meant to be used in a client loop which permits the random     entry of the STOP key. Whenever the loop detects the depression of the STOP     key, the kernel raises AbortCurrentTest, which the client can again      intercept and/or reject. A note of caution: This does not always work if     something in the loop disables the STOP key or hogs all the CPU cycles.5.4  HitAnyKeyToContinue: PROCEDURE [        prompt: LONG STRING ¬ NIL, beep: BOOLEAN ¬ TRUE];     This permits a client to pause its tests. The user can then choose to abort     by entering the STOP key or continue by entering any other key. In the case     of the STOP key, the signal AbortCurrentTest is again raised. 6.0  References     For those who need further details, please refer to the following program     files:             Dove Offline Diagnostics - User Interfaces (Out of date. Original doc)	OfflineDiagInterface.mesa - Up to the minute details. Best reference.	OfflineDiagInterfaceExtra.mesa - For adding clients and misc stuffs	OfflineDiagnosticControlModule.mesa - Control Module (UtilityPilotClient)	OFLFloppyExecImpl.mesa - Floppy Disk Executive	OfflineDiagnosticVersionImpl.mesa - Contains the client version definition	OfflineDiagTTYDove.mesa - Bitmap screen interface	OfflineDiagTTYImplDove.mesa 	CMDiagMsgKeysDove.mesa - Message files used by the kernel modules	CMDiagMsgKeysImplDove.mesa	     LOGCreated on 19-Jun-85 by KL 8-Jan-86: Added all the updates for 12.2 (1.2)