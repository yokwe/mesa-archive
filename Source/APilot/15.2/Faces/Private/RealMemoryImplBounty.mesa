-- RealMemoryImplBounty.mesa - last edit:--  JPM		27-Jun-89 11:00:50-- Copyright (C) 1989 by Xerox Corporation.  All rights reserved.<< The following program was created in 1989 but has not been published within the meaning   of the copyright law, is furnished under license, and may not be used, copied and/or   disclosed except in accordance with the terms of said license.>>DIRECTORY  BountyInputOutput USING [firstRealPage, lastRealPage, mapPagesCount, numberRealPages],  Environment USING [bitsPerWord, PageCount, PageNumber],  PageMap USING [RealPageNumber],  RealMemory USING [],  RealMemoryExtras USING [];RealMemoryImplBounty: PROGRAM  IMPORTS BountyInputOutput  EXPORTS RealMemory, RealMemoryExtras =  BEGIN  maxBountyRealPages: CARDINAL = 2048*4; -- Bounty can have up to 2M words  --RealMemory.--  allocMap: PUBLIC DESCRIPTOR FOR ARRAY OF WORD ¬ DESCRIPTOR[allocMapArray];  allocMapArray: ARRAY    [0..(maxBountyRealPages + Environment.bitsPerWord - 1)/Environment.bitsPerWord)    OF WORD;  -- (initial state not important)<<Since only the memory actually used for display in Bounty is reserved, the RealMemory procedures Initialize, FreeReservedMemory, and MoveIntervalToDisplayMemory are no-ops.  SpecialResidentCodeHandle is a no-op by design; PCBank returns an empty page interval to indicate that PC Emulation is not supported.>>  Initialize: PUBLIC --RealMemory.-- PROC = {};  FreeReservedMemory: PUBLIC --RealMemory.-- PROC [    keep: Environment.PageCount, bufferPage: Environment.PageNumber] = {};  MoveIntervalToDisplayMemory: PUBLIC --RealMemory.-- PROC [    page: Environment.PageNumber, count: Environment.PageCount,    bufferPage: Environment.PageNumber] = {};  SpecialResidentCodeHandle: PUBLIC --RealMemory.-- PROC = {};  PCBank: PUBLIC --RealMemoryExtras.-- PROC RETURNS [    firstPCBankPage, lastPCBankPagePlusOne: PageMap.RealPageNumber] = {    RETURN[0, 0]};<<The remaining RealMemory procedure, Count, returns a count of real pages that might ever be present in virtual memory and the minimum and maximum real page numbers. This implementation uses BountyInputOutput variables.>>   Count: PUBLIC --RealMemory.-- PROC RETURNS [    count: Environment.PageCount, realPageMin, realPageMax: PageMap.RealPageNumber] =    BEGIN    count ¬ BountyInputOutput.numberRealPages - BountyInputOutput.mapPagesCount;    realPageMin ¬ BountyInputOutput.firstRealPage;    realPageMax ¬ BountyInputOutput.lastRealPage    END;  END.LOG27-Jun-89 -- JPM -- Created from RealMemoryImplDove.