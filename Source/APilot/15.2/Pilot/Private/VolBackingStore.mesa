-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. -- VolBackingStore.mesa  Last edited by JXP    on  24-Nov-82 11:09:21-- This Private interface defines the data structures and functions-- implemented by the volume backing store implementation. The operations-- defined here should be used only by the VolTable Implementation itself-- to map LV Root Pages, PV Root Pages, and Marker Pages.DIRECTORY  BackingStore USING [Data, Result, TransferData, TransferProc],  DiskBackingStore USING [ChannelHandle],  File USING [PageNumber, Type],  PhysicalVolume USING [PageNumber],  System USING [UniversalID];VolBackingStore: DEFINITIONS =  BEGIN  -- TYPES  -- Data structure passed to VM which defines a run of backing storage.  -- This record must be the same length as a BackingStore.Data, since it is   -- in effect an implementation of the "opaque type" BackingStore.Data.  Data: TYPE = MACHINE DEPENDENT RECORD [    id(0): IDHandle,    type(1): File.Type,    pvPage(2): PhysicalVolume.PageNumber,    filePage(4): File.PageNumber,    channelHandle(6:0..6): DiskBackingStore.ChannelHandle,    fill(6:7..15): BOOLEAN ¬ FALSE];  IDHandle: TYPE[1];  -- PROCEDURES  BSDataFromVolData: PROCEDURE [volData: Data] RETURNS [BackingStore.Data] =    INLINE {RETURN[LOOPHOLE[volData]]};  GetID: PROCEDURE [idHandle: IDHandle, type: File.Type]    RETURNS[id: System.UniversalID];    -- Given the IDHandle and File.Type stored in a Data, this procedure returns    -- the unique ID of the structure (LV, PV, or MarkerPage).  PBSDataFromPVolData: PROCEDURE [    pVolData: LONG POINTER TO Data] RETURNS [LONG POINTER TO BackingStore.Data] =    INLINE {RETURN[LOOPHOLE[pVolData]]};    -- Note: Not usable on POINTER TO READONLY.  PVolDataFromPBSData: PROCEDURE [pData: LONG POINTER TO BackingStore.Data]    RETURNS [LONG POINTER TO Data] = INLINE {RETURN[LOOPHOLE[pData]]};    -- Note: Not usable on POINTER TO READONLY.  Transfer: BackingStore.TransferProc;    -- Procedure to be given to VM for data transfer with a disk drive.  VolDataFromBSData: PROCEDURE [data: BackingStore.Data] RETURNS[Data] =    INLINE {RETURN[LOOPHOLE[data, Data]]};  dataSizeCheck: PRIVATE BOOLEAN [TRUE..TRUE] =     (SIZE[Data] = SIZE[BackingStore.Data]);  END.LOGTime:	 9-Nov-82 15:47:58	By: JXP   Action:	Created file from DiskBackingStore.mesa.Time:	24-Nov-82 11:10:13	By: JXP   Action:	Added PVolDataFromPBSData, PBSDataFromPVolData, and BSDataFromVolData,	and moved GetID from VolTable. Update Comments.