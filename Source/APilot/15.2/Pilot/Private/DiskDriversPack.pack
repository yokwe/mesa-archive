-- Copyright (C) 1981, 1982, 1985  by Xerox Corporation. All rights reserved. -- 28-Aug-85 17:30:55  Moved GetDrive and GetDriveAttributes from SwappableDiskDrivers in DiskChannelSwappable to SpecialResident in DiskChannelResident.  Since on disk error path.-- 20-Jun-85 10:32:42   Added IsReady to SwappableDiskDrivers.-- 15-Apr-85 12:04:31  Added CreateInternal to SwappableDiskDrivers. -- 28-Sep-82 16:38:58--	SA4000Impl and DiskDriverShared replaced by all new DiskChannelResident, DiskChannelSwappable. Added frame packs. Deleted AltoFileInterlock.-- 20-Nov-81 12:34:02   Improved documentation.-- 18-Nov-81  9:30:04   Fixes to crossed edit merges.-- 17-Nov-81 15:18:30  merged crossed edits.-- 6-Nov-81 13:40:18   Added catch and entry vector items. Renamed ResidentCool to SpecialResident, Resident to ResidentRunFast.  Explicitly named procedures in SpecialResident.-- 9-Nov-81 15:31:06   removed PilotDiskImpl.NoteError.-- 30-Oct-81 18:45:02   Deleted SA800Impl.  Moved more of DiskChannelImpl and PilotDiskImpl to ResidentCool.   Made SwappableDiskDrivers contain swappable portions of DiskChannelImpl.  Created Floppy for FloppyChannelImpl.-- 22-Jul-81 15:12:48   Added InspectDiskShape to ResidentCool.--  3-Jun-81 13:14:07   Added AwaitPilotDiskError and NoteError to ResidentCool.-- 8-May-81  9:52:49   SA4000 => PilotDisk, add RegisterControllers to Initialization.-- Mar 20-81   10:20   MakeLP & MakeRP are moved from Resident to ResidentCool.-- Jan 31-81   11:33   Moved frame packs into PilotKernelFrames.pack.-- Jan 19-81   15:41   Discard AltoFileInterlock, move SA4000Impl.Start to initializationDiskDrivers: SEGMENT =BEGIN  -- The only resident driver code is that callable from the page fault path.  -- Note: This packaging assumes that the system volume is a PilotDisk.SpecialResident: CODE PACK = {  -- Resident code not involved in booting may go in special memory.  Should be first.  DiskChannelResident [    ENTRY VECTOR, AwaitPilotDiskError, Bug, ChangeDriveChangeCount,    ChangeDriveState, ChangeDriveType, ChangeScheduler, DefaultDrive,    DefaultSchedule, DefaultTransition, DoDirectIO, GetDrive, GetDriveAttributes,    Schedule] };ResidentRunFast: CODE PACK = {  -- This code is put in normal memory so it will run faster. Should be second.  DiskChannelResident [    CalculatePageAddress, ControllerProcess, DefaultGetNextRequest,    DoIO, FeedDisk, FillInOperationAndSubmit] };SwappableDiskDrivers: CODE PACK = {  DiskChannelSwappable [    ENTRY VECTOR, AwaitStateChange, Bug, Change, Create, CreateInternal,    GetDriveTag, GetNextDrive, GetPageAddress, GetPageNumber, InspectDiskShape,    IsReady, SetDriveState, SetDriveTag] };Floppy: CODE PACK = {  -- This code pack contains the ENTRY VECTOR for FloppyChannelImpl.  -- As such, it is marked as IN in Pilot.bootmesa so  -- that FloppyChannelImpl's MAIN will be able to get to it.  FloppyChannelImpl EXCEPT Initialization};Initialization: CODE PACK = {  DiskChannelResident [    MAIN, RegisterControllers, RegisterDrives, Start];  --(no CATCH CODE)  FloppyChannelImpl [MAIN, RegisterDrives, Start];  DiskChannelSwappable [MAIN, InitGlobals];  --(no CATCH CODE)  DiskDrivers.StartChainPlug[    -- Explicit qualification is necessary to avoid ambiguous references    -- when all of PilotKernel is packaged via a merged segment.    MAIN, Start, ENTRY VECTOR] };END; --SEGMENT--DiskDriversResidentFrames: FRAME PACK = {DiskChannelResident};DiskDriversSwappableFrames: FRAME PACK = {  DiskChannelSwappable;  FloppyChannelImpl };DiskDriversInitializationFrames: FRAME PACK = {  -- Explicit qualification is necessary to avoid ambiguous references  -- when all of PilotKernel is packaged via a merged segment.  DiskDrivers.StartChainPlug };  -- End of DiskDriversPack.pack--