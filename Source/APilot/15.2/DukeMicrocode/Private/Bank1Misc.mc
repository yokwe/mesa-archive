{File name:  Bank1Misc.mcDescription: Miscellaneous Bank1 opcodes,Author: JPM,Created: July 16, 1986Last Revised:JPM,  5-Dec-90 14:41:45 Change BandBlt/TrapZ code to use bankBandBLTJPM, 15-Sep-89 16:14:47 Add dispatch points for emulator codes implemented in bank 1JPM, 13-Nov-87 13:41:23	Comment out floating-point, image processing, & RES support ranges, and special BandBLT/TrapZ entry points (for unsegmented code)JPM,  8-Oct-87 11:53:51	Add special entry and exit points for BandBLT/TrapZJPM, 18-Aug-87 12:54:05	Fix addresses of return routines, remove specific opcodesJPM, 17-Dec-86 15:52:30	In commented codes, renamed @ROTATEGRAY (obsolete) to @LINEBREAKJPM, 16-Oct-86 17:00:55	Commented all image processing opcodes (phase 2)JPM,  9-Oct-86 12:39:49	Added @a250 as unimplemented opcode (formerly @BLTLINE)JPM, 29-Jul-86 14:25:06	Removed Reserve clause (now in Extensions.dfn)JPM, 18-Jul-86  9:17:04	Added STK ¬ TOS in Bank1Fault codeJPM, 17-Jul-86 14:49:09	Reactivated image processing codes}{ 	Copyright (C) 1986, 1987, 1989, 1990 by Xerox Corporation.  All rights reserved.}{Macro for causing an ESC code trap}MacroDef[UnimplBank1ESCRange,(ESCStd, CANCELBR[Bank1ESCOpcodeTrap,0F], c3, at[1#1])];Bank1ESCx:	Xbus ¬ TT LRot0, XDisp, push, DISP4[Bank1ESCHi],	c2, at[addrBankESCx];{emulator codes -- always in bank 0}Bank1ESCHi:	UnimplBank1ESCRange[0];	UnimplBank1ESCRange[1];	UnimplBank1ESCRange[7];	UnimplBank1ESCRange[9];{emulator codes -- usually in bank 0, but some are in bank 1}	Bank1ESCDisp[2];	Bank1ESCDisp[3];	Bank1ESCDisp[8];{floating point}	UnimplBank1ESCRange[5];{	Bank1ESCRange[4], Bank1ESCRange[E] handled in VFptLinks.mc}{Cedar}	UnimplBank1ESCRange[6];{image processing}{	Bank1ESCRange[A] handled in ImageProcessingLinks.mc}{RES support}{	Bank1ESCRange[B] handled in RESSupportLinks.mc}{unassigned}	UnimplBank1ESCRange[C];	UnimplBank1ESCRange[D];	UnimplBank1ESCRange[F];Bank1ESCOpcodeTrap:	PC ¬ PC - 1, Bank ¬ r0100, {= bank0 in low 4 bits}	c1, at[Bank1ESCOpcodeTrap];Bank1ESCb:	T ¬ TT + 0FF + 1, GOTOBANK0[ESCc],			c2, at[Bank1ESCb];{paths back to bank 0}{Bank1Fault: go to fault handler}{Parameters:	T contains fault type (qPageFault or qWriteProtect)	faulted address already stored in [uFaultParm1, uFaultParm0]}Bank1Fault:	PC ¬ PC - 1, Bank ¬ r0100 {= bank0 in low 4 bits}, push, c3, at[Bank1Fault];Bank1Faultc1:	Rx ¬ pFault, STK ¬ TOS, pop, GOTOBANK0[SaveRegs],	c1, at[Bank1Faultc1];{Bank1Interrupt: go to interrupt handler}Bank1Interrupt:	Bank ¬ bank0,						c1, at[Bank1Interrupt];Bank1Intc2:	PC ¬ PC - 1, GOTOBANK0[RefillInt],			c2, at[Bank1Intc2];{Bank1NxtInstc1: dispatch on next opcode}Bank1NxtInstc1:	Bank ¬ bank0,						c1, at[Bank1NxtInstc1];Bank1NxtInstc2:	IBDisp, GOTOBANK0[DISPNIonly],				c2, at[Bank1NxtInstc2];{special entry & exit points for BandBLT/TrapZ}{BandBLTNormalEntry:	Bank ¬ bankBandBLT, GOTO[TrapzReturn],			c1, at[addrBandBLTNormalEntry];BandBLTIntEntry:	Bank ¬ bankBandBLT, GOTO[TrapzReturn],			c1, at[addrBandBLTIntEntry];}TrapzReturn:	GOTOBANK[TrapzReturn],					c2, at[TrapzReturn];