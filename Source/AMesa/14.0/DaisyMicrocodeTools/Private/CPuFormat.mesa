-- Copyright (C) 1984  by Xerox Corporation. All rights reserved. ---- CPuFormat.mesa, AYC   , 10-Jun-84  0:29:08--DIRECTORY    CPDef USING [wordsPerBank];    CPuFormat: DEFINITIONS =BEGIN    	Bits1: TYPE = [0..2);	Bits2: TYPE = [0..4);	Bits3: TYPE = [0..8);	Bits4: TYPE = [0..16);	Bits5: TYPE = [0..32);	Bits6: TYPE = [0..64);	BitsC: TYPE = [0..4096);		mi: TYPE = RECORD [    	  word1: CARDINAL,	  word2: CARDINAL,	  word3: CARDINAL ];    	ZeroA: CARDINAL = 16;			-- For  rA  field --	CVN: CARDINAL = 17;		csBank: CARDINAL = 18;			-- For  rA,rD  field --	StkPtr: CARDINAL = 19;	Stk0: CARDINAL = 20;	Stk1: CARDINAL = Stk0 + 1;	Stk2: CARDINAL = Stk0 + 2;	Stk3: CARDINAL = Stk0 + 3;		CIP: CARDINAL = 48;	IbCtr: CARDINAL = 49;	TimerLo: CARDINAL = 50;	TimerHi: CARDINAL = 51;	PreScal: CARDINAL = 54;		ZeroB: CARDINAL = 0;			-- For  rB  field --	QregB: CARDINAL = 1;	Ib: CARDINAL = 2;	IbSign: CARDINAL = 3;	rOffset: CARDINAL = 4;	AfWord: CARDINAL = 24;			-- For  rD  field --	AfHigh: CARDINAL = 32;	AfLow: CARDINAL = 40;	rBsame: CARDINAL = 52;	QregD: CARDINAL = 53;	noopD: CARDINAL = 63;		noopSp2: CARDINAL = 0;			-- For  Sp2  field --	SetEOP: CARDINAL = 1;	ClrEOP: CARDINAL = 2;	PopIbSp2: CARDINAL = 3;	Ureg: CARDINAL = 4;	Vreg: CARDINAL = 5;		noopSp1: CARDINAL = 0;			-- For  Sp1  field --	CIPplusOne: CARDINAL = 2;	CIPplusTwo: CARDINAL = CIPplusOne + 1;	linkOffsetSp1: CARDINAL = 4;		AplusBplusCin: CARDINAL = 0;		-- For  Alu  field --	AminusBminusCinInvert: CARDINAL = 1;	BminusAminusCinInvert: CARDINAL = 2;	AandB: CARDINAL = 3;	AorB: CARDINAL = 4;	AxorB: CARDINAL = 5;	AplusCin: CARDINAL = 6;	AandBInvert: CARDINAL = 7;	MPYStep: CARDINAL = 8;	AnandB: CARDINAL = 11;	AnorB: CARDINAL = 12;	AnxorB: CARDINAL = 13;	BplusCin: CARDINAL = 14;	AInvertandB: CARDINAL = 15;	BtoR: CARDINAL = 0;			-- For  shift  field --	shifts: CARDINAL = 1;		DelALow: CARDINAL = 4;			-- For  DspB  field --	OCSZ: CARDINAL = 5;	CCB: CARDINAL = 6;	zeroDsp: CARDINAL = 7;	noopDsp: CARDINAL = 8;	DelB: CARDINAL = 9;	Rbus: CARDINAL = 10;	EOPEXT: CARDINAL = 11;	DelAHigh: CARDINAL = 12;	U7: CARDINAL = 13;	U7andU6: CARDINAL = 14;	IbDisp: CARDINAL = 15;		noopIb: CARDINAL = 0;			-- For  IB  field --	UregIb: CARDINAL = 1;	VregIb: CARDINAL = 2;	clrIb: CARDINAL = 3;	PopIb: CARDINAL = 4;		aiu: CARDINAL = 0;			-- For  OM  field --	IbByte: CARDINAL = 1;	IbHi: CARDINAL = 2;	IbLow: CARDINAL = 3;		ItRead: CARDINAL = 0;			-- For  IT  field --	ItWrite: CARDINAL = 1;		noopMo: CARDINAL = 0;			-- For  MO  field --	SingleAphyscial: CARDINAL = 1;	map: CARDINAL = 2;	SingleUphysical: CARDINAL = 3;	DoubleAphysical: CARDINAL = 5;	DoubleUphysical: CARDINAL = 6;	    ByteImmediate: TYPE = RECORD [pad: [0..256), imu: Bits5,iml: Bits3];        MI: TYPE = MACHINE DEPENDENT RECORD [context: uFormat];          uFormat: TYPE = RECORD [      SELECT OVERLAID * FROM        Common => [common:FormatCommon],	Two    => [two:FormatTwo],	Three  => [three:FormatThree],	ENDCASE];	    FormatCommon: TYPE = MACHINE DEPENDENT RECORD [    	opcode: Bits2 ¬ 0,	rA: Bits6 ¬ ZeroA,	rB: Bits6 ¬ ZeroB,	rDBits54: Bits2 ¬ 3,	rDBits30: Bits4 ¬ 0FH,	AluOrShift: Bits4,	cin: BOOLEAN ¬ FALSE,	sp2: Bits3 ¬ noopSp2,	sp1: Bits3 ¬ noopSp1,	dspBBits33: Bits1 ¬ 1,	dspBBits20: Bits3 ¬ 0,	inia: [0..CPDef.wordsPerBank),	parity: BOOLEAN ¬ FALSE];	    FormatTwo: TYPE = MACHINE DEPENDENT RECORD [    	opcode: Bits2 ¬ 2,	mo: Bits3 ¬ 0,	aadr: Bits3,	it: BOOLEAN ¬ FALSE,	om: Bits2,	ib: Bits3 ¬ 0,	rDBits54: Bits2 ¬ 3,	rDBits30: Bits4 ¬ 0FH,	aiu: Bits4,	ac: BOOLEAN ¬ FALSE,	ail: Bits3,	sp1: Bits3 ¬ noopSp1,	dspBBits33: Bits1 ¬ 1,	dspBBits20: Bits3 ¬ 0,	inia: [0..CPDef.wordsPerBank),	parity: BOOLEAN ¬ FALSE];	    FormatThree: TYPE = MACHINE DEPENDENT RECORD [    	opcode: Bits2 ¬ 3,	rA: Bits6 ¬ ZeroA,	h: BOOLEAN ¬ FALSE,	lmu: Bits5,	rDBits54: Bits2 ¬ 3,	rDBits30: Bits4 ¬ 0FH,	alu: Bits4,	cin: BOOLEAN ¬ FALSE,	iml: Bits3,	sp1: Bits3 ¬ noopSp1,	dspBBits33: Bits1 ¬ 1,	dspBBits20: Bits3 ¬ 0,	inia: [0..CPDef.wordsPerBank),	parity: BOOLEAN ¬ FALSE];	    uAlign: PROCEDURE [      f0, f1, f2, f3, f4, f5, f6, f7, f8, f9, fa, fb, fc, fd: UNSPECIFIED ¬ 0]    RETURNS [CPuFormat.MI];    uField: PROCEDURE [data: mi] RETURNS [CPuFormat.MI];END...