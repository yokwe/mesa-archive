-- Copyright (C) 1985  by Xerox Corporation. All rights reserved. -- HBAccess.mesa, RdH       , 21-Feb-85 15:12:40-- Last edited by --  Rick RDH      	21-Feb-85 15:12:47 Create.-- Control access to the history buffer.  Procedures for getting permission to access the history buffer.  There are 3 categories of access.  One can happen any time and is used for reading the status of the history buffer.  One can happen when sampling is taking place.  This is used to manually halt or to manually trigger the history buffer.  The last is used for everything else and can only happen when nothing else is going on except for reading status.HBAccess: DEFINITIONS = BEGIN  AskForSampleAccess: PROC RETURNS[accessGranted: BOOLEAN];  -- If a sample is happening then return false.  If no sample is already happening wait until the buffer is free, then set things up so any other client knows that a sample is happening and that the buffer is busy.  Return true.  This is used by sample to set up the sample initially.  Once the sample is started the sampling flag is left on but the buffer is made available for manual trigger and manual stop.       AskForGeneralAccess: PROC RETURNS[accessGranted: BOOLEAN];  --If a sample is happening then return false. Otherwise wait until the buffer is free, then set things up to show any other client that the buffer is busy.  Return true.  This is used by Display to check that a display is appropriate.    GetLimitedAccess: PROC;  --Wait until the buffer is not busy but sampling may be going on.  Set the buffer to busy.  This is used to do manual trigger and manual stop.  TriggerDetected: PROC;  --Wait until the buffer is not busy.  Sampling is presumed to be happening.  Turn off the sampling flag.  Turn on the busy flag.  This is used to secure the history buffer for reading the data after a trigger and timeout have been detected.  ReleaseHB: PROC;  --Turn off the busy flag to allow others access to the history buffer.    END.