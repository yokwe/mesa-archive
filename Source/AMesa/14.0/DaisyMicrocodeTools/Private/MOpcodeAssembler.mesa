-- Copyright (C) 1984  by Xerox Corporation. All rights reserved.-- File: MOpcodeAssembler.mesa-- Author: JAC   		Created: 29-Nov-84 10:12:42-- Last edit by JAC   	11-Dec-84 14:49:09DIRECTORY  Exec USING [Handle];MOpcodeAssembler: DEFINITIONS =  BEGIN      --ERRORS AND SIGNALS  FatalError: ERROR;      --PROCEDURE DELCARATIONS  CloseFiles: PROCEDURE [error: BOOLEAN];  GetNextChar: PROCEDURE RETURNS [char: CHARACTER, errorsEncountered: CommentError];  InitFiles: PROCEDURE [h: Exec.Handle];  InitOpcodeTable: PROCEDURE;  LogErrLine: PROCEDURE [message: LONG STRING];  LogSourceLine: PROCEDURE;  OpenFiles: PROCEDURE;  OpenNextSource: PROCEDURE RETURNS[done: BOOLEAN];  PrintSpaces: PROCEDURE [spaces: CARDINAL];  PutDirectToOpFile: PROCEDURE [address: LONG STRING];  PutToListing: PROCEDURE [word: CARDINAL, columns: CARDINAL, spaces: CARDINAL];  PutToOpFile: PROCEDURE [word: CARDINAL];  TtyLine: PROCEDURE [message: LONG STRING];  TtyLine2: PROCEDURE [message1, message2: LONG STRING];        --TYPE DECLARATIONS    CommentError: TYPE = {none, eof, unmatched};     Opcode: TYPE = RECORD [    escUsed: BOOLEAN ¬ FALSE,  --is this an escape opcode?    opcode: LONG STRING,    arg1: INTEGER ¬ -1,    arg2: INTEGER ¬ -1];    OpcodeEntry: TYPE = RECORD [opcode: LONG STRING, info: OpcodeInfo];    OpcodeInfo: TYPE = RECORD [    opValue: CARDINAL ¬ 0,    esc: RECORD [      escNeeded: BOOLEAN ¬ FALSE,  --is this an escape opcode?      escValue: CARDINAL ¬ 0],     arg1: BOOLEAN ¬ FALSE,  --should this opcode have an argument?    arg2: BOOLEAN ¬ FALSE,    bytes: CARDINAL ¬ 0];            --VARIABLE AND CONSTANT DECLARATIONS  eofChar: CHARACTER = 004C;  maxNumFiles: CARDINAL = 20;  outputFile: LONG STRING;  opcodeTable: ARRAY [0..opcodeTableLength) OF OpcodeEntry;  opcodeTableLength: CARDINAL = 300;  sourceFile: ARRAY [0..maxNumFiles] OF LONG STRING;  sourceFilesCount: CARDINAL;    END...    --Last edit by:--JAC   	 	 4-Dec-84 18:51:27 	added PutMemoryAddress--JAC   	 	 5-Dec-84 10:24:17 	added mulitple source files--JAC   	 	 5-Dec-84 10:24:17 	renamed PutDirectToOpFile; used to be PutMemoryAddress    