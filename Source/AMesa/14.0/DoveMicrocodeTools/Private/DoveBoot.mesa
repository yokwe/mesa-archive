-- Copyright (C) 1984  by Xerox Corporation. All rights reserved. ---- DoveBoot.mesa,	 AYC   , 23-Oct-84 12:34:27--			JoM    , 30-Aug-84 13:47:25-- from DaisyBoot.mesa,	 AYC   , 31-May-84 16:04:09--DoveBoot: DEFINITIONS =  BEGIN  ProcessorType: TYPE = MACHINE DEPENDENT {IOP(0), CP(1)};  RunType: TYPE = MACHINE DEPENDENT {Initialize(0), Start(1), WriteData(2), Special(3)};  MachineType: TYPE = MACHINE DEPENDENT {Daisy(0), Daybreak(1)};  DataType: TYPE = {none, crc, iopAddr, cpAddr, iopWrite, cpWrite, multipleDBs};    MemorySegment: TYPE = MACHINE DEPENDENT {LocalRam(0), MainMemory(1)};    BankConfig: TYPE = [0..maxBanks];  --  0 => Any config is ok  --  1 => 4K only  --  2 => 8K only  --  3 => 12K only  --  4 => 16K only        BlockType: TYPE = MACHINE DEPENDENT RECORD [       processorType: ProcessorType ¬ IOP,       runType: RunType ¬ Initialize,       machineType: MachineType ¬ Daisy,       variant: SELECT OVERLAID * FROM          IOPFile => [	     memorySegment: MemorySegment,	     unusedIOP: [0..07FF]],	  CPFile => [	     bankConfiguration: BankConfig,             unusedCP: [0..01FF]],	     ENDCASE ¬ IOPFile[memorySegment: LocalRam, unusedIOP: 0]];	       IOPInitializeLocal: BlockType = [];  IOPInitializeMain: BlockType = [     variant: IOPFile[memorySegment: MainMemory, unusedIOP: 0]];  IOPStartLocal: BlockType = [runType: Start];  IOPStartMain: BlockType = [runType: Start,     variant: IOPFile[memorySegment: MainMemory, unusedIOP: 0]];  IOPWriteLocal: BlockType = [runType: WriteData];  IOPWriteMain: BlockType = [runType: WriteData,      variant: IOPFile[memorySegment: MainMemory, unusedIOP: 0]];  DaisyCPInitialize: BlockType = [processorType: CP];  DaybreakCPInitialize: BlockType = [processorType: CP, machineType: Daybreak];  DaisyCPStart: BlockType = [processorType: CP, runType: Start];  DaybreakCPStart: BlockType = [processorType: CP, runType: Start, machineType: Daybreak];  DaisyCPWrite: BlockType = [processorType: CP, runType: WriteData];  DaybreakCPWrite: BlockType = [processorType: CP, runType: WriteData, machineType: Daybreak];  CRC: BlockType = LOOPHOLE [0E000H];  MultipleDBs: BlockType = LOOPHOLE [0FF00]; -- plus number of DBs in [1..254]  EOF: BlockType = LOOPHOLE [0FFFF];  Block: TYPE = MACHINE DEPENDENT RECORD [    blktype: BlockType ¬ [],    data: SELECT COMPUTED DataType FROM      none => NULL,      crc => [        crcValue: UNSPECIFIED ¬ 0],      iopAddr => [        address: Address ¬ 0],      cpAddr => [	bank: Bank ¬ 0,	address: uAddress ¬ 0,	bankPlusOne: Bank ¬ 0,	addressPlusOne: uAddress ¬ 0],      iopWrite => [        address: Address ¬ 0,	length: CARDINAL ¬ 0,	bytes: PACKED SEQUENCE COMPUTED CARDINAL OF Byte ¬ NULL],      cpWrite => [        DaisyBank: Byte ¬ 0,        DayBreakBank: Byte ¬ 0,	filler: [0..0F] ¬ 0,	address: uAddress ¬ 0,	length: CARDINAL ¬ 0,	instructions: SEQUENCE COMPUTED CARDINAL OF uPhysical ¬ NULL],      multipleDBs => [        offsets: SEQUENCE COMPUTED CARDINAL OF CARDINAL ¬ NULL], -- in number of words from start of file      ENDCASE];  Address: TYPE = [0..0FFFF];  Bank: TYPE = [0..0F];  uAddress: TYPE = [0..0FFF];  Byte: TYPE = [0..0FF];  uPhysical: TYPE [3];    maxBanks: CARDINAL = 4;  BankType: TYPE = [0..maxBanks);  DayBreakBankMap: ARRAY BankType OF Byte = [0, 0CH, 0AH, 09H];  DaisyBankMap: ARRAY BankType OF Byte = [10H, 20H, 40H, 80H];  DayBreakStartAddress: CARDINAL = 1;  DaisyStartAddresses: CARDINAL = 2;        END.    LOG    RDH	 2-Dec-85 17:01:19	Add field memorySegment to BlockType, add type MemorySegment, add BlockType's IOPInitializeLocal, IOPInitializeMain, IOPStartLocal, IOPStartMain, IOPWriteLocal, IOPWriteMain.  This is for ram overflow into main memory.     RDH	12-Dec-85 12:05:49	Correct DayBreakBankMap.     RDH	14-Jan-86 10:50:09	Add bankConfiguration field to BlockType for 8K.   RDH	21-Jan-86 17:52:43	Reduce maxBanks to 2.  Add comments to def of BankConfig.  JWF     8-May-87 13:48:38	changed "maxBanks" from 2 to 4 JWF	14-May-87 23:17:46	Make BlockType" an overlay record