-- File: IOPBKernel.mesa - last edit:-- FXB   .PA           15-Apr-85 13:23:04-- Copyright (C) 1984, 1985 by Xerox Corporation. All rights reserved.-- after IOPKernel.mesa, HGM,  8-Jul-82 17:00:50DIRECTORY  Environment USING [Byte],  I186 USING [Address, Register, IOPort],  IOPB USING [AddressType, Processor],  OMF USING [DataSequence];IOPBKernel: DEFINITIONS =  BEGIN  State: TYPE = {dead, booted, halted, running, iopBreak, singleStep};  -- addresses in IOP 80186 local RAM  savedRegistersAddress: ARRAY IOPB.Processor OF I186.Address = [0400H, 0F0000H];  i186StateAddress: I186.Address = 041EH;  i186StatusAddress: I186.Address = 041CH;  pcStatusAddress: I186.Address = 0F001CH;  i186BitMask: WORD = 0EFFFH;  Boot: PROC;  Continue: PROC;  GetBootSeq: PROC RETURNS [CARDINAL];  GetState: PROC RETURNS [State];  GetStateSeq: PROC RETURNS [CARDINAL];  InKernel: PROC RETURNS [BOOLEAN];  ReadIOByte: PROC [port: I186.IOPort] RETURNS [data: Environment.Byte];  ReadIOWord: PROC [port: I186.IOPort] RETURNS [data: WORD];  ReadMemoryByte: PROC [address: I186.Address, addressType: IOPB.AddressType]    RETURNS [data: Environment.Byte];  ReadMemoryDataSequence: PROC [    address: I186.Address, addressType: IOPB.AddressType,    data: LONG POINTER TO OMF.DataSequence];  ReadMemoryWord: PROC [address: I186.Address, addressType: IOPB.AddressType]    RETURNS [data: WORD];  ReadPC: PROC [processor: IOPB.Processor] RETURNS [pc: I186.Address];  ReadRegister: PROC [reg: I186.Register, processor: IOPB.Processor]    RETURNS [data: WORD];  ReadSavedRegisters: PROC [processor: IOPB.Processor];  SetState: PROC [newState: State];  Stop: PROC [processor: IOPB.Processor];  WriteIOByte: PROC [port: I186.IOPort, data: Environment.Byte];  WriteIOWord: PROC [port: I186.IOPort, data: WORD];  WriteMemoryDataSequence: PROC [    address: I186.Address, addressType: IOPB.AddressType,    data: LONG POINTER TO OMF.DataSequence];  WriteMemoryByte: PROC [    address: I186.Address, addressType: IOPB.AddressType, data: Environment.Byte];  WriteMemoryWord: PROC [    address: I186.Address, addressType: IOPB.AddressType, data: WORD];  WriteRegister: PROC [reg: I186.Register, data: WORD, processor: IOPB.Processor];  WriteSavedRegisters: PROC [processor: IOPB.Processor];  END.