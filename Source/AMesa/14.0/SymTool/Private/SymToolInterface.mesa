-- SymToolInterface.mesa, Edited by:--  Sweet,	 1-Jun-84 10:55:22DIRECTORY  SymToolCommandDefs USING [FormItems],  SymToolDefs,  FormSW,  RESOut USING [WindowsObject],  Runtime USING [GetBcdTime],  STDebugDefs USING [depthString, showLinks, STDebugTrees],  String USING [AppendString],  Time USING [Append, Unpack],  Tool USING [    Create, MakeFileSW, MakeFormSW, MakeMsgSW, MakeSWsProc, UnusedLogName],  ToolWindow USING [TransitionProcType];  SymToolInterface: PROGRAM   IMPORTS    SymToolDefs, FormSW, Runtime, STDebugDefs, String, Time,     Tool =  BEGIN OPEN FormSW, SymToolDefs;    windows: RESOut.WindowsObject _ [NIL, NIL, NIL, NIL];  FormItems: TYPE = SymToolCommandDefs.FormItems;    StateChanged: ToolWindow.TransitionProcType =    BEGIN    IF new = inactive THEN {      windows.msgSW _ windows.formSW _ windows.fileSW _ NIL;      SymToolDefs.ClearFileSource[]};    END;      MakeMySWs: Tool.MakeSWsProc =    BEGIN    logName: LONG STRING _ [20];    Tool.UnusedLogName[unused: logName, root: "SymTool.log"L];    windows.msgSW _ Tool.MakeMsgSW[window: window];    windows.formSW _ Tool.MakeFormSW[      window: window, formProc: MakeForm];    windows.fileSW _ Tool.MakeFileSW[window: window, name: logName];    END;      MakeForm: FormSW.ClientItemsProcType = {    OPEN FormSW;    nItems: CARDINAL = FormItems.LAST.ORD + 1;    items _ AllocateItemDescriptor[nItems];    items[FormItems.load.ORD] _ CommandItem[      tag: "load"L, place: [6, line0], proc: ParamNotify];    items[FormItems.file.ORD] _ StringItem[      tag: "file"L, place: [72, line0], inHeap: TRUE, string: @stFile];    items[FormItems.header.ORD] _ CommandItem[      tag: "header"L, place: [6, line1], proc: ParamNotify];    items[FormItems.ctx.ORD] _ CommandItem[      tag: "ctx"L, place: [72, line1], proc: ParamNotify];    items[FormItems.hti.ORD] _ CommandItem[      tag: "hti"L, place: [138, line1], proc: ParamNotify];    items[FormItems.bti.ORD] _ CommandItem[      tag: "bti"L, place: [192, line1], proc: ParamNotify];    items[FormItems.opi.ORD] _ CommandItem[      tag: "opi"L, place: [252, line1], proc: ParamNotify];    items[FormItems.mwconst.ORD] _ CommandItem[      tag: "mwconst"L, place: [318, line1], proc: ParamNotify];    items[FormItems.lnks.ORD] _ BooleanItem[      tag: "lnks"L, place: [378, line1], switch: @STDebugDefs.showLinks];    items[FormItems.offsets.ORD] _ CommandItem[      tag: "offsets"L, place: [6, line2], proc: ParamNotify];    items[FormItems.firstse.ORD] _ CommandItem[      tag: "firstse"L, place: [72, line2], proc: ParamNotify];    items[FormItems.mdi.ORD] _ CommandItem[      tag: "mdi"L, place: [138, line2], proc: ParamNotify];    items[FormItems.sonBti.ORD] _ CommandItem[      tag: "sonBti"L, place: [192, line2], proc: ParamNotify];    items[FormItems.nxOpi.ORD] _ CommandItem[      tag: "nxOpi"L, place: [252, line2], proc: ParamNotify];    items[FormItems.lco.ORD] _ CommandItem[      tag: "lco"L, place: [318, line2], proc: ParamNotify];    items[FormItems.outerCtx.ORD] _ CommandItem[      tag: "outerCtx"L, place: [6, line3], proc: ParamNotify];    items[FormItems.nextse.ORD] _ CommandItem[      tag: "nextse"L, place: [72, line3], proc: ParamNotify];    items[FormItems.lti.ORD] _ CommandItem[      tag: "lti"L, place: [138, line3], proc: ParamNotify];    items[FormItems.btLink.ORD] _ CommandItem[      tag: "btLink"L, place: [192, line3], proc: ParamNotify];    items[FormItems.ipi.ORD] _ CommandItem[      tag: "ipi"L, place: [252, line3], proc: ParamNotify];    items[FormItems.lio.ORD] _ CommandItem[      tag: "lio"L, place: [318, line3], proc: ParamNotify];    items[FormItems.tree.ORD] _ CommandItem[      tag: "tree"L, place: [6, line4], proc: ParamNotify];    items[FormItems.sei.ORD] _ CommandItem[      tag: "sei"L, place: [72, line4], proc: ParamNotify];    items[FormItems.type.ORD] _ CommandItem[      tag: "type"L, place: [138, line4], proc: ParamNotify];    items[FormItems.fgi.ORD] _ CommandItem[      tag: "fgi"L, place: [192, line4], proc: ParamNotify];    items[FormItems.nxIpi.ORD] _ CommandItem[      tag: "nxIpi"L, place: [252, line4], proc: ParamNotify];    items[FormItems.jibw.ORD] _ CommandItem[      tag: "jib/w"L, place: [318, line4], proc: ParamNotify];    items[FormItems.d.ORD] _ StringItem[      tag: "d"L, place: [6, line5], inHeap: TRUE, string: @STDebugDefs.depthString];    items[FormItems.idInCtx.ORD] _ CommandItem[      tag: "idInCtx"L, place: [72, line5], proc: ParamNotify];    items[FormItems.sLti.ORD] _ CommandItem[      tag: "sLti"L, place: [138, line5], proc: ParamNotify];    items[FormItems.nxFgi.ORD] _ CommandItem[      tag: "nxFgi"L, place: [192, line5], proc: ParamNotify];    items[FormItems.fgtHdr.ORD] _ CommandItem[      tag: "fgtHdr"L, place: [252, line5], proc: ParamNotify];    items[FormItems.rep.ORD] _ CommandItem[      tag: "rep"L, place: [318, line5], proc: ParamNotify];    items[FormItems.idToHash.ORD] _ CommandItem[      tag: "idToHash"L, place: [378, line5], proc: ParamNotify];    RETURN[items: items, freeDesc: TRUE];    };  Init: PRIVATE PROCEDURE =    BEGIN    title: STRING = "Symbol Table browser of "L;    herald: STRING _ [60];    START STDebugDefs.STDebugTrees;    String.AppendString[to: herald, from: title];    Time.Append[herald, Time.Unpack[Runtime.GetBcdTime[]]];    herald.length _ herald.length - 3;    windows.main _ Tool.Create[      makeSWsProc: MakeMySWs, clientTransition: StateChanged,      name: herald, cmSection: "SymTool"L, tinyName1: "Symbol"L,      tinyName2: "Browser"L];    SymToolDefs.handle _ @windows;    END;    -- Mainline code  Init[];  END...