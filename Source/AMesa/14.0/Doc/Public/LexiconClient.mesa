-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. --LexiconClient.mesa  DIRECTORY  LexiconDefs USING [AddString, FindString, PrintLexicon],  String USING [AppendChar, AppendString],  TTY USING [Create, Destroy, GetChar, GetLine, Handle, PutChar, PutCR, PutLine];LexiconClient: PROGRAM IMPORTS LexiconDefs, String, TTY =  BEGIN  LineConvert: PROCEDURE [s: STRING] =    BEGIN    char: STRING ¬ [80];    c, d: CARDINAL;    FOR c DECREASING IN [0..s.length) DO      IF (s[c] = ' ) THEN        BEGIN        FOR d IN [c+1..s.length) DO          String.AppendChar[char, s[d]]        ENDLOOP;        s.length ¬ 0;        String.AppendString[s, char];        RETURN;        END;      ENDLOOP;    END;  CommandProc: PROCEDURE =   BEGIN   tty: TTY.Handle = TTY.Create["Lexicon"];   s: STRING ¬ [80];   ch: CHARACTER;   DO	-- loop until stopped by user typing q or Q (last case below).    tty.PutLine["\nLexicon Command: "];    ch ¬ tty.GetChar[];    tty.PutChar[ch];-- Echo the character (GetChar doesn't).    SELECT ch FROM      'f, 'F =>           BEGIN          tty.PutLine["ind:  "];				-- terminal will read: "find:   "          tty.GetLine[s];		-- s will contain the string read from the terminal          LineConvert[s];          IF LexiconDefs.FindString[s] THEN tty.PutLine[" -- found"]          ELSE tty.PutLine[" -- not found"];          END;      'a, 'A =>          BEGIN          tty.PutLine["dd:  "];				-- terminal will read: "add:   "          tty.GetLine[s];          LineConvert[s];          LexiconDefs.AddString[s];          END;      'p, 'P =>          BEGIN          tty.PutLine["rint lexicon"];		-- terminal will read: "print lexicon"          tty.PutCR[]; LexiconDefs.PrintLexicon[tty];          END;      'q, 'Q =>           BEGIN          tty.PutLine["uit"]; tty.PutCR[];	-- terminal will read: "quit"          EXIT;          END;      ENDCASE =>tty.PutLine[" Commands are Find, Add, Print lexicon, and Quit"];      ENDLOOP;    tty.Destroy[];    RETURN    END;  CommandProc[];  END.