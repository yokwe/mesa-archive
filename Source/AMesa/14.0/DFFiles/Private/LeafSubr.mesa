-- File: LeafSubr.mesa - last edit:-- Riggle.PA            8-Jan-87 17:36:36-- Copyright (C) 1982 , 1987 by Xerox Corporation. All rights reserved. -- LeafSubr.mesa-- Last edited by Schmidt on 2-Jan-82 12:19:12-- Last edited by BTL   on  25-Oct-82 14:28:25DIRECTORY  MSegment USING [Handle],  Stream USING [Handle],  Time USING [Packed];LeafSubr: DEFINITIONS =   BEGIN  -- ** Currently, LeafSubr assumes Transfer.Initialize and Finalize are called  -- Only a single connection is supported  -- Only readOnly "mappings" are supported  FileHandle: TYPE = LONG POINTER TO FHObject;  FHObject: TYPE = RECORD [    allocated: BOOLEAN,    host, sfn: LONG STRING,    stream: Stream.Handle,    nextPageToRead: CARDINAL];  -- initially 0;    StartLeaf, StopLeaf: PROC;    -- host is like "Ivy";  sfn is like "<Schmidt>Model>Model.mesa"  Open: PROC [host, sfn: LONG STRING] RETURNS [fh: FileHandle];      Close: PROC [fh: FileHandle];    GetStreamCreation: PROC [fh: FileHandle] RETURNS [Time.Packed];  GetStreamLength: PROC [fh: FileHandle] RETURNS [LONG CARDINAL];	  -- base is # of page to start "mapping" on; base = 0 is the first page  RemoteMap: PROC [seg: MSegment.Handle, fh: FileHandle, base: CARDINAL];    END.