-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- DFToolOps.mesa - last edited by--   BTL  	29-Aug-83 11:35:27--   DSC  	16-Apr-85 17:40:56DIRECTORY  DFLibrarian USING[Handle],  Event USING [Handle],  FormSW USING [EnumeratedNotifyProcType, ProcType],  Menu USING [Handle],  Window USING [Handle];DFToolOps: DEFINITIONS =  BEGIN  CmdProc: TYPE = PROC;  toolData: Data;  Data: TYPE = LONG POINTER TO DataObject;  -- Dump that machine dependent nonesense and use fillers. I'm sick of counting.  DataObject: TYPE = RECORD [    dfZone: UNCOUNTED ZONE ¬ NIL,    fillera: WORD ¬ 0,    toolWindow: Window.Handle ¬ NIL,    fillerb: WORD ¬ 0,    msgSW: Window.Handle ¬ NIL,    fillerc: WORD ¬ 0,    ttySW: Window.Handle ¬ NIL,    fillerd: WORD ¬ 0,    paramSW: Window.Handle ¬ NIL,    fillere: WORD ¬ 0,    cmdSW: Window.Handle ¬ NIL,    fillerf: WORD ¬ 0,    toolBusy: BOOLEAN ¬ FALSE,    fillerg: WORD ¬ 0,    untilDone: CONDITION,    fillerh: WORD ¬ 0,    optWindow: Window.Handle ¬ NIL,    filleri: WORD ¬ 0,    optFormSW: Window.Handle ¬ NIL,    fillerj: WORD ¬ 0,    optMenu: Menu.Handle ¬ NIL,    fillerk: WORD ¬ 0,    optionBusy: BOOLEAN ¬ FALSE,    fillerl: WORD ¬ 0,    --    inputDfFiles: LONG STRING ¬ NIL,    filler1: WORD ¬ 0,    inputFiles: LONG STRING ¬ NIL,    filler2: WORD ¬ 0,    reason: LONG STRING ¬ NIL,    filler3: WORD ¬ 0,    localDir: LONG STRING ¬ NIL,    filler4: WORD ¬ 0,    localDFDir: LONG STRING ¬ NIL,    filler5: WORD ¬ 0,    workingDFLoc: LONG STRING ¬ NIL,    filler6: WORD ¬ 0,    integrationLoc: LONG STRING ¬ NIL,    filler7: WORD ¬ 0,    --     inputDfFilesCopy: LONG STRING ¬ NIL,    filler8: WORD ¬ 0,    inputFilesCopy: LONG STRING ¬ NIL,    filler9: WORD ¬ 0,    reasonCopy: LONG STRING ¬ NIL,    filler10: WORD ¬ 0,    localDirCopy: LONG STRING ¬ NIL,    filler11: WORD ¬ 0,    --    myEventHandle: Event.Handle ¬ NIL,    filler12: WORD ¬ 0,    operation: UNSPECIFIED ¬ 0,    filler13: WORD ¬ 0,    switch: Switches ¬ SwitchDefaults,    filler14: WORD ¬ 0,    libHandle: DFLibrarian.Handle ¬ NIL,    filler15: WORD ¬ 0,    optSWs: OptWindows ¬ ALL[NIL]];  OptWindows: TYPE = ARRAY ToolOperations OF Window.Handle;  ToolOperations: TYPE = {    BringOver, StoreBack, VerifyDF, CheckOut, Query, DFDelete};  Switches: TYPE = ARRAY SwitchNames OF BOOLEAN;  SwitchNames: TYPE = {    -- in main parameter window    confirm, getOnlyExports, dontStoreRemotely, preRelease, checkLibrarian,    verifyFilesExist, verifyRemoteOnStore,    -- in options window    --    (BringOver)    justObjects, justReadOnlys, justSources, justNonReadOnlys, updateExisting,    archiveBcdRename, getOlderOK, bringOverPreRelease,    --    (SModel)    topLevelOnly, flipCameFrom, smodelPreRelease,    --    (VerifyDF)    retrieveDFsToTemp,    --    (DFDelete)    alsoDeleteReadOnly,    --	  (Smodel - new option)    dfLibjectsOnly};  SwitchDefaults: Switches = [    confirm: TRUE, getOnlyExports: FALSE, dontStoreRemotely: FALSE,    preRelease: FALSE, checkLibrarian: TRUE, verifyFilesExist: FALSE,    verifyRemoteOnStore: FALSE, justObjects: FALSE, justReadOnlys: FALSE,    justSources: FALSE, justNonReadOnlys: FALSE, updateExisting: FALSE,    archiveBcdRename: FALSE, getOlderOK: FALSE, bringOverPreRelease: FALSE,    topLevelOnly: FALSE, flipCameFrom: TRUE, smodelPreRelease: FALSE,    retrieveDFsToTemp: TRUE, alsoDeleteReadOnly: FALSE, dfLibjectsOnly: FALSE];  IsAborted: PROC RETURNS [BOOLEAN];  PostMsg: PROC [msg: LONG STRING];  -- Procedure called for each action from the tool.  CheckOut: CmdProc;  Query: CmdProc;  BringOver: CmdProc;  SModel: CmdProc;  VerifyDF: CmdProc;  DFSubstitute: CmdProc;  DFDisk: CmdProc;  DFDelete: CmdProc;  -- Main proc to dispatch action  Doit: FormSW.ProcType;  -- When the option sheet is wanted.  BringUpOptionSheet: FormSW.ProcType;  -- When I want to stop the tool.  Stop: FormSW.ProcType;  -- When I wants some help.  Help: FormSW.ProcType;  -- When the user selects a new operation  NewOperation: FormSW.EnumeratedNotifyProcType;  END.    16-Nov-84 15:34:50	DSC  	Added new switch: DFLibjectsOnly for cases where you checkout/in libjects for .dfs only. Speeds up Smodels considerably.19-Nov-84 14:50:15	DSC  	Changed the machine dependent record so that switches are at the end. This allows new switches to be added with less pain.19-Nov-84 15:24:24	DSC  	Added extra fields to support new interface plus multi-protocol librarians.20-Nov-84 17:03:40	DSC  	Added FormSW procs.27-Nov-84 11:11:59	DSC  	Made the preRelease mode separate for BringOver and Smodel. This is becuase people frequently do a Smodel-preRelease, and do a bringover after that,FORGETTING TO TURN OFF THE SWITCH. The new DFtool interface allows different switches for that. I'll kludge around for old DFtool compatibility since it relies on a single switch..sigh!21-Jan-85  9:56:48	DSC  	Removed librarian choice field since I am yanking out the Pup librarian stuff.22-Jan-85 17:21:27	DSC  	Added librarian handle to tool data to make things more parameterized. 				Got so sick of counting machine dep records, I added fillers.16-Apr-85 17:41:39	DSC  	Added help.