-- Copyright (C) 1982, 1983  by Xerox Corporation. All rights reserved. -- DFUser.mesa - Last edited by--   Schmidt	June 14, 1982 5:18 pm--   BTL  	16-Jan-83 14:00:39-- interface to users of procedures that enumerate DF files-- exported by DFSubrImplDIRECTORY  DFSubr USING [DFSeq],  Exec USING [Handle],  Time USING [Packed],  Window USING [Handle];DFUser: DEFINITIONS =  BEGIN  -- raised by EnumerateEntries when nEntriesInDFFiles is too small  TooManyEntries: ERROR;  -- The user supplies a procedure with this type to be called once  --   per file in the tree of DF files.  -- These strings are not reused, so they may be safely assigned without  --   copying their contents.  -- Their memory is freed when DFUser.Cleanup[] is called.  --  -- parameters:  --	host		e.g. "Indigo"  --	directory	e.g. "Cedar>Top"  --	shortName	e.g. "Editor.Bcd"  --	version		e.g.  2  --	createTime	e.g.  23-Mar-82 15:33:21  --	includedDFFile	is true if this is a DF file being Included  --	importedDFFile	is true if this is a DF file being Imported  --	readOnly is true if the file is "ReadOnly" or is an Import to this DF  --	immediateParentDF  is the shortName of the DF file that contains this entry  --	internalDFSeq	is the pointer to internal data    EnumerateProcType: TYPE = PROC [    host, directory, shortName: LONG STRING,    version: CARDINAL, createTime: Time.Packed,    includedDFFile, importedDFFile, readOnly: BOOLEAN,    immediateParentDF: LONG STRING, internalDFSeq: DFSubr.DFSeq];  SortOption: TYPE = {notSorted, byShortName, byLongName};    -- the user calls this procedure to have his procedure be called  -- the parameters are:  -- 	dfFileName:  the DF file that is the root,  --		e.g. "[Indigo]<Cedar>Top>PilotKernel.DF!33"  --		names without a host and directory are ok, => get from local disk  --	nEntriesInDFFiles:  the total number of entries in the tree of Df's   --		descendent from dfFileName  --	confirmBeforeOverwriting:  ask user to confirm before retrieving  --		a different version of a DF file  --	printProgressMessages:  print "Reading ..." messages  --	window:  the Window.Handle to print on and ask questions in,   --		NIL => Executive window  --	procToCall:  the proc to call with each file  --  	sortOption:  notSorted means don't sort the entries  --		byShortName means sort on short name  --			e.g. BcdDefs.Mesa comes before Convert  --		byLongName means sort on long name including host and directory  --			e.g. Indigo comes before Ivy, etc.  -- 	tryDollars:  retrieve DF files by renaming (adding '$$')  --		if there is a local DF file with a different create date  -- note: the current implementation reads the entire DF tree, and then calls the  -- client's procToCall for each file.  EnumerateEntries: PROC [    dfFileName: LONG STRING, procToCall: EnumerateProcType,    nEntriesInDFFiles: CARDINAL ¬ 1000, confirmBeforeOverwriting: BOOLEAN ¬ TRUE,    printProgressMessages: BOOLEAN ¬ FALSE,    window: Window.Handle ¬ NIL, exec: Exec.Handle ¬ NIL,    sortOption: SortOption ¬ notSorted, tryDollars: BOOLEAN ¬ FALSE,    retrieveDFsToTemp: BOOLEAN ¬ FALSE, localDFDir: LONG STRING ¬ NIL];  CleanupEnumerate: PROC;  END.