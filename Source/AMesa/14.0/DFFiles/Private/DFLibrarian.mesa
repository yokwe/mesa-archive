-- Copyright (C) 1983, 1984  by Xerox Corporation. All rights reserved. -- DFLibrarian.mesa - Last edited by: --   BTL  	17-Nov-83 10:13:32--   DSC  	 6-Mar-85 15:33:59DIRECTORY  Librarian USING [Atom, Handle, nullAtom, nullHandle],  Time USING [Packed],  Window USING [Handle, Object];DFLibrarian: DEFINITIONS = {    -- The properties we want in DF related libjects  Property: TYPE = {  -- Reserved by the Librarian Interface.  changeTime, checkOutUser,   -- User defined.  host, directory, name, version, create,   reason};    -- The property list of the properties above. These are passed to query functions.  AtomArray: TYPE = ARRAY Property OF Librarian.Atom ¬ ALL[Librarian.nullAtom];    -- To avoid a large global frame in the impl and allows reentrancy.  Handle: TYPE = LONG POINTER TO Object;  Object: TYPE = RECORD [    servername: LONG STRING ¬ NIL,    server: Librarian.Handle ¬ Librarian.nullHandle,    atoms: AtomArray ¬ ALL[Librarian.nullAtom],    zone: UNCOUNTED ZONE ¬ NIL  ];    -- Opens a connection to "servername",  -- Makes connection related objects from "zone"  -- Feedback info relayed through "Write".  -- Takes connection info and stores it in "h".  Initialize: PROC [h: Handle, servername: LONG STRING, zone: UNCOUNTED ZONE] RETURNS [ok: BOOLEAN ¬  TRUE];    -- Close the connection listed above.  Finalize: PROC [h: Handle];    -- Does the shortName exist?  LookupLibject: PROC [h: Handle, shortName: LONG STRING] RETURNS [libjectExists, librarianProblem: BOOLEAN];    -- If so, get all relevant information.  QueryLibject: PROC [h: Handle, libject: LONG STRING, localName, remoteName, checkOutUser, checkOutReason, checkInReason: LONG STRING] RETURNS  [checkedOut: BOOLEAN, checkOutTOD: Time.Packed, checkInTOD: Time.Packed];       -- Obvious.  IsLibjectCheckedOut: PROC  [h: Handle, shortName: LONG STRING] RETURNS [yes: BOOLEAN];  CheckOutLibject: PROC [h: Handle, libject, reason: LONG STRING] RETURNS [success: BOOLEAN];  Retrieve: PROC [h: Handle,    shortName: LONG STRING, window: Window.Handle] RETURNS [retrieved: BOOLEAN];  CanLibjectBeCheckedIn: PROC [h: Handle, shortName: LONG STRING] RETURNS [yes: BOOLEAN];    -- Check in libject with given remoteName.  CheckinLibject: PROC [h: Handle, remoteName, libject: LONG STRING] RETURNS [success: BOOLEAN];    -- Librarian implemenation bound in.  Usable: PROCEDURE RETURNS [yes: BOOLEAN];  }...Change log:12-Sep-84  9:35:51	DSC  	Added Usable PROCEDURE to detect presence.30-Nov-84 11:40:15	DSC  	Made Usable take protocol parameter.21-Jan-85  9:58:40	DSC  	Removed pup (and hence multi) lib protocols. Added object view. 8-Feb-85 13:49:08	DSC  	Removed checkinuser from Query. 6-Mar-85 15:34:07	DSC  	Query now has var parameters for LONG STRING. 