-- Copyright (C) 1983, 1984  by Xerox Corporation. All rights reserved. -- ReleaseInterface.mesa - Last edited by--   BTL  	11-Nov-83 11:52:12--   DSC  	29-Mar-84 18:12:48 increased maxAllFiles to 10000DIRECTORY  BTree USING [Tree],  DFSubr USING [DFSeq],  Exec USING [Handle],  MFile USING [Handle],  MStream USING [Handle],  Window USING [Handle];		ReleaseInterface: DEFINITIONS =   BEGIN  toolData: Data;  wh: Window.Handle;  exec: Exec.Handle;  Data: TYPE = LONG POINTER TO DataObject;  DataObject: TYPE = MACHINE DEPENDENT RECORD [    formsw(0):		Window.Handle ¬ NIL,    ttysw(2):		Window.Handle ¬ NIL,    dffilename(4):	LONG STRING ¬ NIL,    phase(6):		EPhase ¬ One,    checkOverwrite(7):	BOOLEAN ¬ FALSE,    checkSpanTree(8):	BOOLEAN ¬ TRUE,    checkFilesExist(9): BOOLEAN ¬ TRUE,    debugging(10):	BOOLEAN ¬ FALSE,    verbose(11):	BOOLEAN ¬ TRUE,    skipCameFrom(12):	BOOLEAN ¬ TRUE,    nProbablePages(13):	LONG CARDINAL ¬ 0,    nProbableFiles(15):	CARDINAL ¬ 0,    dfseqall(16):	DFSubr.DFSeq ¬ NIL,    logStream(18):	MStream.Handle ¬ NIL,    -- phase 1 file existence cache     useOldPhase1Cache(20):	BOOLEAN ¬ TRUE,    oldPhase1CacheExists(21):	BOOLEAN ¬ FALSE,    phase1BTree(22):		BTree.Tree ¬ NIL,    phase1BTreeFile(24):	MFile.Handle ¬ NIL,    -- phase 3 file existence cache     useOldPhase3Cache(26):	BOOLEAN ¬ TRUE,    oldPhase3CacheExists(27):	BOOLEAN ¬ FALSE,    phase3BTree(28):		BTree.Tree ¬ NIL,    phase3BTreeFile(30):	MFile.Handle ¬ NIL,    -- ReleaseTool "constants"    maxAllFiles(32):		CARDINAL ¬ 10000,  -- # entries in all DF files    pagesInHugeZone(33):	CARDINAL ¬ 3500,  -- # pages in write-once zone    initialBTreePages(34):	CARDINAL ¬ 1000,    -- simplifies command line parsing    command(35): 		BOOLEAN ¬ FALSE];      EPhase: TYPE = {One, Two, Three, OneThree, Reset, UseOldPhase1Data};        -- ReleaseTool serialization: can't continue if already running  AlreadyRunning: PROC RETURNS [yes: BOOLEAN];  DoneRunning: PROC;    ProcessOnePhase: PROC [phase: EPhase];  FlushLog: PROC;  END.