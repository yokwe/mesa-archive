-- File: EtherTesterDefs.mesa - last edit:-- AOF                 10-Apr-87 11:36:02-- Copyright (C) 1983, 1984, 1987 by Xerox Corporation. All rights reserved. DIRECTORY  Window USING [Handle],  System USING [HostNumber],  NSTypes USING [BufferBody];EtherTesterDefs: DEFINITIONS =  BEGIN  -- For EtherTesterTajo  FlipperType: TYPE = {    sent, coll, errOut, recv, noIn, noOut, errIn, echoed, late, lost, dally,    idle};  -- Used by FlipBox  Pattern: TYPE = {    ignore, zeros, ones, alternating, pairs, oneTwentyFive, countBytes,    countWords, lenOne, lenSix};  log: Window.Handle;  cursor: ARRAY [0..8) OF LONG CARDINAL;  -- Global Flags and Variables Set Through Tool Window  pattern: Pattern;  numberOfRecvBuffers: CARDINAL;  numberOfSendBuffers: CARDINAL;  recvSize, sendSize: CARDINAL;  ticksBeforeSend: CARDINAL;  promiscuous, broadcasting: BOOLEAN;  check, doChecksum, doStats: BOOLEAN;  flipem, smashTheCursor, blankDisplay: BOOLEAN;  bumpPacketNumber, dallyIfBehind, dallyBeforeOutput: BOOLEAN;  showRunts, showGarbage: BOOLEAN;  showStrangeStatus, showWrongLength: BOOLEAN;  showWrongData, showOnlyBadAlign: BOOLEAN;  me, source, dest: System.HostNumber;  -- Procedures  FlipBox: PROCEDURE [which: FlipperType];  SetupBoxes: PROCEDURE;  SetDownBoxes: PROCEDURE;  UpdateNumbers: PROCEDURE;  ShowPacket: PROCEDURE [why: LONG STRING, this: Buffer];  SmashTheCursor: PROCEDURE;  -- EtherTesterMain  StartTest: PUBLIC PROCEDURE [test: TestMode, board: CARDINAL]    RETURNS [status: BOOLEAN];  StopTheWorld: PROCEDURE;  DontBeAHog: PROCEDURE RETURNS [stop: BOOLEAN];  InitializeCSBs: PROCEDURE;  CleanThingsUp: PROCEDURE;  activeProcesses: CARDINAL;  Buffer: TYPE = LONG POINTER TO BufferBody;  BufferBody: TYPE = MACHINE DEPENDENT RECORD [    iocb(0): LONG POINTER,    next(2): Buffer,    length(4): CARDINAL,    idle(5): BOOLEAN,    endPlusOne(6): LONG POINTER TO CARDINAL,    alignment(8): ARRAY [0..3) OF WORD,    header(11): Header,    -- Watch the alignment!!!    -- header must be one word before a quadword boundary (i.e. -1 mod 4)    body(18): echo NSTypes.BufferBody];  -- body.echoWords[0] is used as a sequence number  Header: TYPE = RECORD [    dest: System.HostNumber, source: System.HostNumber, packetType: WORD];  TestMode: TYPE = {SendOnly, ReceiveOnly, SendAndReceive, EchoServer, EchoUser};  -- EtherTesterStats  Stats: TYPE = RECORD [    pktsOut, wdsOut: LONG CARDINAL,    collisions, coll1, coll2, coll3, coll4, coll5, coll6, coll7, coll8, coll9,      coll10, coll11, coll12, coll13, coll14, coll15, collx, loadOverflow: LONG      CARDINAL,    lateCollisions, errsOut, funnyOut: LONG CARDINAL,    overrunOut: LONG CARDINAL,    pktsIn, wdsIn: LONG CARDINAL,    wrongLength, wrongPackets, wrongWords: LONG CARDINAL,    missed: LONG CARDINAL,    errsIn, funnyIn, shortIn, longIn: LONG CARDINAL,    shortBuffer, itIn, crcIn, crcItIn, overrunIn: LONG CARDINAL,    bc, bcWords, toMe, toOther, fromMe: LONG CARDINAL,    packetsEchoed, packetsNotEchoed, lateEchos, packetsTooLongToEcho, echosMissed,      dallyForEcho: LONG CARDINAL,    runts, runtsMarkedOk, multicastRunts: LONG CARDINAL];  stats: Stats;  realBackground: LONG CARDINAL;  StatsInit: PROCEDURE;  StatsPrint: PROCEDURE [partial: BOOLEAN];  StatsPeek: PROCEDURE;  -- In EtherTesterPilot  AllocateOneBuffer: PROCEDURE [size: CARDINAL] RETURNS [b: LONG POINTER];  FreeOneBuffer: PROCEDURE [b: LONG POINTER];  AllocateOneIOCB: PROCEDURE RETURNS [iocb: LONG POINTER];  FreeOneIOCB: PROCEDURE [iocb: LONG POINTER];  END.