-- Copyright (C) 1985  by Xerox Corporation. All rights reserved. -- File:  AdobeQOps.mesa-- Last modified by:-- PAD       	11-Jan-85 15:51:54-- RSF       	17-Sep-85 14:18:56-- RLC		11-Jun-87 12:35:59 DIRECTORY   AdobeOps USING [ARSystemHandle],   ARFileAccess USING [Session],   NSFile USING [Handle],   NSString USING [String],   System USING [GreenwichMeanTime],   Time USING [defaultTime];   AdobeQOps: DEFINITIONS  =    BEGIN       nBytesPerEntry: CARDINAL = 16;   nEntriesPerBlock: CARDINAL = 32;          Q: TYPE = LONG POINTER TO QObject;   QObject: TYPE = MONITORED RECORD [       processID: PROCESS,       fHToBackingFile: NSFile.Handle,       nBlocks: CARDINAL ¬ 0,       numOfQElements: CARDINAL ¬ 0,       periodicUpdateARNum: LONG CARDINAL ¬ 0,       systemName: LONG STRING ¬ NIL,       buffer: BufferType ¬ NIL,       index: IndexType ¬ NIL];           BufferType: TYPE = LONG POINTER TO Buffer ¬ NIL;       Buffer: TYPE = RECORD[SEQUENCE COMPUTED CARDINAL OF QEntryObject];       << use Buffer to read elements of file in scan operation. >>       IndexType: TYPE = LONG POINTER TO IndexObject ¬ NIL;	      IndexObject: TYPE = RECORD[              block: CARDINAL ¬ 0,	      offset: CARDINAL ¬ 0];  << index into buffer/queue >>      PriorityType: TYPE = MACHINE DEPENDENT { null(0), updateExplicit(1),      updateImmeadiate(2 ), unNamed(255)};   StatusType: TYPE = MACHINE DEPENDENT { empty(0), waiting(1),       needsToBeUpdated(3), isBeingUpdated(4), unNamed(255)};    SequenceType: TYPE = MACHINE DEPENDENT RECORD [      startingARNumber(0): LONG CARDINAL ¬ 0,  <<32-bits>>      sequenceLength(2): LONG CARDINAL ¬ 0];   QEntry: TYPE = LONG POINTER TO QEntryObject;       << 32 entries/page >>     QEntryObject: TYPE = MACHINE DEPENDENT RECORD [      priority(0): PriorityType ¬ null,      status(1): StatusType ¬ empty,      arSequence(2): SequenceType,      timeStamp(6): System.GreenwichMeanTime ¬ Time.defaultTime];   --- UPDATER PROCEDURES<< controlled by the queue >>         CompareTimes: PROCEDURE[startTime, stopTime: NSString.String]        RETURNS [equal: BOOLEAN];	         FindElementToBeUpdated: PROCEDURE [systemIndex: CARDINAL]        RETURNS [found: BOOLEAN, arNumber: LONG CARDINAL];         << GetTimes: PROCEDURE [systemIndex: CARDINAL]       RETURNS [startTime, stopTime: NSString.String]; >>          PutUpdaterToSleep: PROCEDURE [systemIndex: CARDINAL];          StoppingService: PROCEDURE RETURNS [BOOLEAN];      Updater: PROCEDURE [systemIndex: CARDINAL, accessSession: ARFileAccess.Session, arSH: AdobeOps.ARSystemHandle];      WakeUpdater: PROCEDURE [systemIndex: CARDINAL];      END.   11-Jun-87 12:35:59 - rlc - AR 10303. shoot QObject.updaterCV and SetCV PROC. use data.updaterSleep instead