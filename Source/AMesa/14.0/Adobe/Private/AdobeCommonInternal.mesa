-- Copyright (C) 1982, 1985  by Xerox Corporation. All rights reserved. --AdobeCommonInternal.mesa--Freedman, 	27-Dec-82 15:59:00--RSF, 		10-Apr-86 12:27:50--JCS, 		10-Oct-85 16:22:28DIRECTORY  AdobeCommon USING [    DataHandle, FormatType, InitialSetStatus, OrderInfo, ReportFields,    RowBuffer, SetStatus, StringArray],  AdobeOps USING [    ARNumber, ARSystemHandle, nilARNumber, QueryList, ToolType],  ARAccess USING [ARHandle, Session],  FormSW USING [ClientItemsProcType, ProcType],  Menu USING [Handle],  Stream USING [Handle],  Window USING [Handle];AdobeCommonInternal: DEFINITIONS =BEGIN  SystemNotFound: SIGNAL[system: LONG STRING];  NoServer: SIGNAL;  NoService: SIGNAL;  --Types    InstanceDataHandle: TYPE = LONG POINTER TO InstanceData;  InstanceData: TYPE = MACHINE DEPENDENT RECORD [     formSW(0): Window.Handle _ NIL,      cmdSW(2): Window.Handle _ NIL,     background(4): BOOLEAN _ TRUE,     formDirty(5): BOOLEAN _ FALSE,     toolData(6): SELECT type(6):AdobeOps.ToolType FROM      edit => [         checkedOut(7): BOOLEAN _ FALSE,          arIdNumber(8): AdobeOps.ARNumber _ AdobeOps.nilARNumber,          sH(10): Stream.Handle _ NIL,          arH(12): ARAccess.ARHandle _ NIL,          useQL(14): BOOLEAN _ FALSE,         fileName(15): LONG STRING _ NIL,	 editMenu(17): Menu.Handle _ NIL,	 qlName(19): LONG STRING _ NIL,	 qlSetStatus(21): AdobeCommon.SetStatus _ AdobeCommon.InitialSetStatus,	 qlHandle(23): AdobeOps.QueryList _ NIL],      submit => [	 sH(7): Stream.Handle _ NIL,         fileName(9): LONG STRING _ NIL],      report => [         format(7): AdobeCommon.FormatType _ plain,	 overwrite(8): BOOLEAN _ FALSE,	 outputFile(9): LONG STRING _ NIL,	 outSH(11): Stream.Handle ¬ NIL,	 templateFile(13): LONG STRING _ NIL,	 qlName(15): LONG STRING _ NIL,	 fieldsInReport(17): AdobeCommon.ReportFields ¬ NIL,	 orderInfo(19): AdobeCommon.OrderInfo ¬ NIL,	 rowBuffer(21): AdobeCommon.RowBuffer ¬ [NIL, NIL],	 rowLength(25): CARDINAL ¬ 0,	 entryBytes(26): CARDINAL ¬ 0,	 sortKeysSH(27): Stream.Handle ¬ NIL],      query  => [         queryStrings(7): LONG POINTER TO AdobeCommon.StringArray _ NIL,	 qlName(9): LONG STRING _ NIL],      sort   => [         maxLen(7): LONG STRING _ NIL,	 sortInputFile(9): LONG STRING _ NIL,	 sortOutputFile(11): LONG STRING _ NIL,	 keySpecs(13): LONG STRING _ NIL,	 fileNumber(15): CARDINAL ¬ 1,	 inputSH(16): Stream.Handle ¬ NIL,	 outputSH(18): Stream.Handle ¬ NIL,	 sortKeysSH(20): Stream.Handle ¬ NIL],      queryList  => [         operand1(7): LONG STRING _ NIL,	 operand2(9): LONG STRING _ NIL,	 result(11): LONG STRING _ NIL,	 list(13): LONG STRING ¬ NIL],      ENDCASE];  --herald Names  editHeraldName: LONG STRING;  editCkdOutHeraldName: LONG STRING;  submitHeraldName: LONG STRING;  reportHeraldName: LONG STRING;  queryHeraldName: LONG STRING;  sortHeraldName: LONG STRING;  queryListHeraldName: LONG STRING;    --Tool Creation Routines     CreateEditSW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  CreateSubmitSW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  CreateReportSW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  CreateQuerySW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  CreateSortSW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  CreateQuerylistSW: PROCEDURE[w: Window.Handle, makeCmdSW: BOOLEAN]    RETURNS [initialMsg: LONG STRING];  MakeARFormSW: FormSW.ClientItemsProcType;  FixOrdering: PROCEDURE[data: AdobeCommon.DataHandle,    formProc: FormSW.ClientItemsProcType, w: Window.Handle, index: CARDINAL]    RETURNS [msg: LONG STRING];   AllocateInstanceData: PROCEDURE[data: AdobeCommon.DataHandle]    RETURNS[instanceData: InstanceDataHandle];      --Routines for changing between systems  StartSystem: PROCEDURE[toolData: AdobeCommon.DataHandle, arSH: AdobeOps.ARSystemHandle];  FlushCurrentSystem: PROCEDURE[toolData: AdobeCommon.DataHandle];    --Other routines    GetSystemDescriptionFromParent: PROCEDURE[toolData, parent:    AdobeCommon.DataHandle] RETURNS[arSH: AdobeOps.ARSystemHandle];  OpenAccessSession: PROCEDURE[toolData: AdobeCommon.DataHandle];  ProcessUserDotCM: PROCEDURE[toolData: AdobeCommon.DataHandle];  SetDefaultsAndUserContext: PROCEDURE[    toolData: AdobeCommon.DataHandle, arSH: AdobeOps.ARSystemHandle];  SetFieldDirty: FormSW.ProcType;  SetLogin: PROCEDURE[session: ARAccess.Session];  SetReadOnlys: PROCEDURE [data: AdobeCommon.DataHandle];  SetTheDefaults: PROCEDURE[    data: AdobeCommon.DataHandle, sysMustOnly: BOOLEAN];  SetTinyName: PROCEDURE [toolData: AdobeCommon.DataHandle];  SetWindowName: PROCEDURE[    w: Window.Handle, system, toolName: LONG STRING];    --Routine for confirmation      ClickToConfirm: PROCEDURE [    data: AdobeCommon.DataHandle, couldBeForked: BOOLEAN ¬ TRUE]    RETURNS [confirmed: BOOLEAN];END...