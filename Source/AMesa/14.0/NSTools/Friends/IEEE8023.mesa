-- File: IEEE8023.mesa - last edit:-- BKI                  8-Jul-87 16:54:58-- AOF                 30-Jun-87 17:18:28-- SMA                 21-May-86 11:28:30-- Copyright (C) 1986, 1987 by Xerox Corporation. All rights reserved. DIRECTORY  Environment USING [Byte, bytesPerWord],  SpecialSystem USING [broadcastHostNumber, HostNumber, ProcessorID];IEEE8023: DEFINITIONS =  BEGIN  bpw: CARDINAL = Environment.bytesPerWord;    maxBytesPerEthernetPacket: CARDINAL = 1518;  maxDataBytesPerEthernetPacket: CARDINAL = 1500;  minBytesPerEthernetPacket: CARDINAL = 60;  --not including CRC-32  minWordsPerEthernetPacket: CARDINAL = minBytesPerEthernetPacket / bpw;  uiControl: LLCControl = 003h;    ProcessorID: TYPE = SpecialSystem.ProcessorID;  MACDestAddress: TYPE = SpecialSystem.HostNumber;  MACSourceAddress: TYPE = ProcessorID;    ethernetBroadcastHost: SpecialSystem.HostNumber =    SpecialSystem.broadcastHostNumber;  EthernetCRC: TYPE = RECORD[a, b: WORD];  --32 bit CRC used by ethernet only     Encapsulation: TYPE = LONG POINTER TO EncapObject;  EncapObject: TYPE = MACHINE DEPENDENT RECORD [    ethernetDest(0): MACDestAddress,    ethernetSource(3): MACSourceAddress,    var(6): SELECT OVERLAID * FROM      ethernet => [        ethernetType(6): EthernetPacketType],      hybrid => [        osiType(6): EthernetPacketType,	ethernetLLC(7): LLCHeader],      osi8022 => [        llc(6): LLCHeader,	pif(8:0..47): SELECT OVERLAID * FROM	  standard => [],	  snap => [	    control(8:0..7): LLCControl,	  <<zero(8:8..31): PACKED ARRAY [0..3) OF [0..0],>>	    zero1(8:8..15): [0..0],	    zero2(9): [0..0],	    snapType(10): EthernetPacketType],	  ENDCASE	],      ENDCASE    ];     EthernetPacketType: TYPE = MACHINE DEPENDENT{    -- backwards compatible    echoMe(1C0h), echoed(1C1h), pup(0200h), translation(0201h),    -- current values    ns(0600h), arpa(0800h), arp(0806h), newpup(0A00h), newtranslation(0A01h),    osi(80A1h), osiSpare(80A2h), (LAST[WORD])};    LLCControl: TYPE = Environment.Byte;    LLCHeader: TYPE = MACHINE DEPENDENT RECORD [    length(0): CARDINAL,    dsapAddress(1:0..7): LSAPAddress,    ssapAddress(1:8..15): LSAPAddress];  LSAPAddress: TYPE = MACHINE DEPENDENT {    null(000h), indMgmtFn(002h), grpMgmtFn(003h), escape(0AAh),    iso8473(0FEh), global(0FFh)};  MACHeader: TYPE = MACHINE DEPENDENT RECORD [    destAddress(0): MACDestAddress,    sourceAddress(3): MACSourceAddress];     <<  Many places will fall apart if SIZE[Encapsulation]#7.  Look carefully at  the buffer allocation routines to be sure that the allignment works out  correctly.  >>  encapsulationTrap: [7..7] = SIZE[ethernet EncapObject];    --To start at the beginning of the world.  CreateDefaultEthernetDrivers: PROC RETURNS [BOOLEAN];    END.LOG 9-May-86 13:15:22  SMA  Created file.16-Apr-87 16:17:39  CLS  Added IEEE 802.2 support28-Jun-87 13:19:29  AOF  Changed name to IEEE802330-Jun-87 17:17:39  AOF  Exclude CRC from min packet lengths 8-Jul-87 16:54:58  BKI  Add EncapObject.hybrid variant.