-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- HBCommander.mesa, HGM,  4-Feb-83 17:07:35DIRECTORY  Format USING [Line, Number, StringProc, Text],    CP USING [RealCS],  CPSymbols USING [Error, GetPc],  HBCommand USING [],  HistoryBuffer USING [Arm, Error, Index];HBCommander: PROGRAM  IMPORTS Format, CPSymbols, HistoryBuffer  EXPORTS HBCommand =  BEGIN    Error: PUBLIC ERROR [reason: LONG STRING] = CODE;    Arm: PUBLIC PROCEDURE [log: Format.StringProc, arg: LONG POINTER, where: LONG STRING, offset: HistoryBuffer.Index] =    BEGIN    pc: CP.RealCS;    Format.Text[log, "Arming History Buffer to trigger at "L, arg];    Format.Text[log, where, arg];    pc ¬ CPSymbols.GetPc[where ! CPSymbols.Error => ERROR Error[reason] ];    Format.Text[log, " = .CR "L, arg];    Format.Number[log, pc, [16, FALSE, TRUE, 0], arg];    HistoryBuffer.Arm[pc, offset ! HistoryBuffer.Error => ERROR Error[reason] ];    Format.Line[log, ", ok"L, arg];    END;      END.