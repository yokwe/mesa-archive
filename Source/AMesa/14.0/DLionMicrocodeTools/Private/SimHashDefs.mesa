-- Copyright (C) 1982  by Xerox Corporation. All rights reserved. --SimHashDefs.mesa  -- Last edit by DEG     , 26-Sep-84 23:18:47DIRECTORY  Stream USING [Handle],  SymbolTableDefs USING [STData];SimHashDefs: DEFINITIONS =  BEGIN  -- In order to be able to dump the hash table for Burdock and maintain   -- Alto-Burdock compatibility the field labeled ptrIndex must be a one  -- word field. So the LONG POINTERS to STData are kept in an array  -- indexed by ptrIndex. Before the hash table is dumped some values   -- are LOOPHOLED into ptrIndex using JamValue.       Base: TYPE = LONG BASE POINTER TO HashRegion;  Hash: TYPE = Base RELATIVE ORDERED POINTER [0..7777B] TO HashBlock;  HNull: Hash = LOOPHOLE[0];  HVSize: CARDINAL = 71;  HashBlock: TYPE = RECORD [    reloc:    BOOLEAN,    next:     Hash,    ptrIndex:  PtrIndex,    string:   StringBody];   HashRegion: TYPE = RECORD [    hVec: ARRAY [0..HVSize) OF Hash,    nPages: CARDINAL,    caseHeed: BOOLEAN,    nextAvail: Hash,    altoCompatability: CARDINAL ¬ 0,    firstAvail: ARRAY [0..0) OF HashBlock    ];  FirstAvailSlot: Hash = LOOPHOLE[SIZE[HashRegion]];  --@firstAvail  PtrTableSize: CARDINAL = 2048;  PtrIndex: TYPE = [0..PtrTableSize);  PtrTable: TYPE = ARRAY PtrIndex OF LONG POINTER TO SymbolTableDefs.STData;    -- interface items  Lookup: PROCEDURE [s: LONG STRING, insert: BOOLEAN]    RETURNS [h: Hash, old: BOOLEAN];  StringForHash: PROCEDURE [h: Hash, s: STRING];  TempStringForHash: PROCEDURE [h: Hash] RETURNS [LONG STRING];  PutInfo: PROCEDURE [    h: Hash, b: BOOLEAN, d: LONG POINTER TO SymbolTableDefs.STData];  GetInfo: PROCEDURE [h: Hash] RETURNS [    BOOLEAN, LONG POINTER TO SymbolTableDefs.STData];  JamValue: PROCEDURE [h: SimHashDefs.Hash, b: BOOLEAN, v: CARDINAL];  Create: PROCEDURE [nPages: CARDINAL];  DestroyST: PROCEDURE;  CaseHeed: PROCEDURE [f: BOOLEAN];  DumpToStream: PROCEDURE [stream: Stream.Handle];  EnumerateEntries: PROCEDURE [action: PROCEDURE [Hash] RETURNS [BOOLEAN]]    RETURNS [h: Hash];  ReInit: PROC;  END....-- LOG-- ETN        -  1-Apr-82 14:05:12 - Convert to Trinity.-- ETN        - 20-Apr-82 10:28:10 - Fixed Alto Burdock kludge.-- ETN        -  4-Oct-82 16:23:19 - Alto-Burdock compatability, cleanup.-- Time: 26-Sep-84 23:18:43	By: DEG     	Action: Added copyright notice and rebuild for 11.1 release.