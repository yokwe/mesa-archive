-- Copyright (C) 1981, 1982, 1984  by Xerox Corporation. All rights reserved. -- File: FileTransferUtils.mesa  -  Last edit by:  -- SXS   	20-May-81 14:20:34  -- BXM  	 9-Feb-82 14:27:28  -- LXR    	17-Sep-82 15:01:19  -- BJD    	26-Jun-84 19:10:16DIRECTORY  FileName USING [VFN],  FileTransfer USING [Confirmation, FileType, Severity, ServerType],  FileTransferOps USING [    Command, CopyCommand, Connection, CredentialLevel, DeleteCommand,    ListCommand, FTHandle, Operation, PrimitivesHandle, RetrieveStreamCommand,    Which],  MFile USING [Access, Handle, Type],  Stream USING [Handle];FileTransferUtils: DEFINITIONS =  BEGIN OPEN FileTransfer, FileTransferOps;      -- FileTransfersA  ActOn: PROC [conn: Connection, command: Command, vfn: FileName.VFN];  AppendVFN: PROC [    s: LONG STRING, vfn: FileName.VFN, remote: BOOLEAN, rename: BOOLEAN ¬ FALSE];  SetPrimitive: PROC [    type: ServerType, objectAddress: FileTransferOps.PrimitivesHandle];  SetCatchErrorsPrimitive: PROC [c: Connection, forStreamOps: BOOLEAN];    -- Internal Connection operations  CheckAbort: PROC [c: Connection];  Post: PROC [    c: Connection, level: Severity, s1, s2, s3, s4: LONG STRING ¬ NIL];  ShowProgress: PROC [c: Connection];  Unknown: PROC [    c: Connection, err, proc: LONG STRING, s1, s2: LONG STRING ¬ NIL];  Validate: PROC [c: Connection];  -- feedback  WriteDate: PROC [c: Connection, which: Which];  WriteRate: PROC [c: Connection, bytes, pulses: LONG CARDINAL];  FileTransferToMFileType: PROC [tFT: FileTransfer.FileType] RETURNS [MFile.Type];    -- stream stuff  CreateFT: PROC [Connection, RetrieveStreamCommand, LONG STRING]     RETURNS [FTHandle];   ValidStream: PROC [sh: Stream.Handle, newOp: Operation ¬ null]     RETURNS [ft: FTHandle, stream: Stream.Handle];    ReduceCredentials: PROC [    c: Connection, op: Operation, fileName: LONG STRING,    origLevel: FileTransferOps.CredentialLevel];  HasWildCard: PROC [name: LONG STRING] RETURNS [BOOLEAN];  SetupInfo: PROC [    c: Connection, name: LONG STRING, vfn: FileName.VFN,    v: BOOLEAN, w: Which ¬ source];  ShowDestination: PROC [    c: Connection, vfn: FileName.VFN, name: LONG STRING];  AppendDefaultRetrieveName: PROC [      file: LONG STRING, real: FileName.VFN, default: LONG STRING];  AppendDefaultStoreName: PROC [      file: LONG STRING, real: FileName.VFN, default: LONG STRING];  -- FileTransfersF (local file system)  DoDisk: PROC [c: Connection, from, to: Stream.Handle] RETURNS [LONG CARDINAL];  DoRemote: PROC [c: Connection, from, to: Stream.Handle]       RETURNS [bytes: LONG CARDINAL];  GetLocalInfo: PROC [Connection, MFile.Handle, Which];  ChangeAccess: PROC [    c: Connection, file: MFile.Handle, name: LONG STRING, access: MFile.Access];  OpenLocalFile: PROC [    c: Connection, name: LONG STRING, w: Which, setReadProtect: BOOLEAN,    access: MFile.Access ¬ readOnly]     RETURNS [MFile.Handle];  ShowBytes: PROC [c: Connection, bytes, time: LONG CARDINAL, verb: LONG STRING];    -- local operations  LocalCopy: PROC [c: Connection, p: CopyCommand];  LocalDelete: PROC [c: Connection, p: DeleteCommand];  LocalList: PROC [c: Connection, p: ListCommand];  LocalGetStreamInfo: PROC [FTHandle];  LocalNextStreamInternal: PROC [c: Connection, ft: FTHandle]     RETURNS [Confirmation];  LocalRetrieveStream: PROC [c: Connection, p: RetrieveStreamCommand];  LocalClose: PROC [c: Connection, printErrs, freeObject: BOOLEAN ¬ FALSE];  END.