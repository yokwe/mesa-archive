-- Copyright (C) 1981, 1982, 1983  by Xerox Corporation. All rights reserved. -- File: ScratchSWsA.mesa - last edited: -- JGS		30-Jul-81 10:44:39-- AXD    	27-Oct-82 11:52:18-- BGY     	 3-Jan-83 10:08:33DIRECTORY  Environment USING [Block, nullBlock],  Context USING [Type, Create, Destroy, Find, UniqueType],  ScratchSource USING [Create, Info],  ScratchSW,  TextSW USING [Create, Destroy, GetOptions, Options],  TextSource USING [Handle],  Window USING [Handle];ScratchSWsA: PROGRAM  IMPORTS Context, TextSW, ScratchSource EXPORTS ScratchSW SHARES Window =  BEGIN OPEN ScratchSW, TextSource;  -- GLOBAL Data and Stuff  scratchSWContext: Context.Type ¬ Context.UniqueType[];  -- Create/Destroy/Load Procedures   Create: PUBLIC PROCEDURE [    sw: Window.Handle, block: Environment.Block ¬ Environment.nullBlock,    extraRoom: CARDINAL ¬ 0, expandable: BOOLEAN ¬ TRUE,    options: Options ¬ defaultOptions] =    BEGIN    source: Handle;    source ¬ ScratchSource.Create[      block: block, extraRoom: extraRoom, access: options.access,      expandable: expandable];    Context.Create[scratchSWContext, source, DestroyContext, sw];    TextSW.Create[sw, source, NIL, options];    END;  Destroy: PUBLIC PROCEDURE [sw: Window.Handle] = {    Context.Destroy[type: scratchSWContext, window: sw]};  DestroyContext: PROCEDURE [source: Handle, sw: Window.Handle] = {    TextSW.Destroy[sw]; -- Make sure TextSW goes away before source    IF source # NIL THEN [] ¬ source.actOn[source, destroy]};  Info: PUBLIC PROCEDURE [sw: Window.Handle]    RETURNS [      block: Environment.Block, extraRoom: CARDINAL, expandable: BOOLEAN,      options: Options] = {    source: TextSource.Handle = Context.Find[scratchSWContext, sw];    IF source = NIL THEN RETURN[Environment.nullBlock, 0, FALSE, defaultOptions];    [block: block, extraRoom: extraRoom, expandable: expandable] ¬      ScratchSource.Info[source];    options ¬ TextSW.GetOptions[sw]};  IsIt: PUBLIC PROCEDURE [sw: Window.Handle] RETURNS [yes: BOOLEAN] =    BEGIN RETURN[Context.Find[scratchSWContext, sw] # NIL]; END;  END. -- of ScratchSWsA