-- Copyright (C) 1981  by Xerox Corporation. All rights reserved. -- FormatterNub.mesa -- edited by Loretta, 28-May-81 15:40:37-- edited by SHayes, 23-Apr-81 10:54:27DIRECTORY  Exec USING [Abort, AddCommand, Compile, Handle, Outcome, OutputProc],  Style USING [PressFinish],  Xdefaults USING [ClearWindows, EditableWindows, RestoreWindows];FormatterNub: MONITOR  IMPORTS    Exec, Style, Xdefaults =  BEGIN  Abort: ERROR = Exec.Abort[];  RunFormatter: PROCEDURE [h: Exec.Handle] RETURNS [o: Exec.Outcome ¬ normal] =    BEGIN     message: STRING;    Xdefaults.ClearWindows[      compiler, Exec.OutputProc[h] !         Abort => {Xdefaults.RestoreWindows[compiler]; GOTO abort};      	Xdefaults.EditableWindows => RESUME];    o ¬ Exec.Compile[h ! UNWIND => Xdefaults.RestoreWindows[compiler]];    message ¬      SELECT o FROM        normal => "Formatting succeeded."L,        warning => "Warnings logged."L,        error => "Errors logged."L,	abort => "Aborted."L,        ENDCASE => "Unknown outcome."L;    Style.PressFinish[];    Xdefaults.RestoreWindows[compiler];    Exec.OutputProc[h][message];    EXITS abort => NULL;    END;  Init: PROCEDURE = BEGIN Exec.AddCommand["Formatter.~"L, RunFormatter]; END;  Init[];  END...