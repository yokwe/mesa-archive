-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- Script3.mesa        3-Mar-83 14:19:18 by CAJ -- Virtual memory test program, Klamath Pilot.-- Script3 is a script which tests the Make* operations on a variety of swap unit-- boundary conditions.DIRECTORY  Environment USING [PageCount],  ScriptOps USING [RegisterScript],  VM USING [Interval],  VMTestOperations --USING [all the operations]--,  VMTestScript USING [GetHeap, GiveBackHeap, MakeBackingData,    MakeIrregularSwapData, Ticker];Script3: PROGRAM  IMPORTS ScriptOps,  VMTestOperations, VMTestScript =  BEGIN  ------------  -- PUBLIC procedures:  -- RunTests is a script of tests using VMTestOperations procedures  RunTests: PROCEDURE =    BEGIN OPEN VMTestOperations, VMTestScript;        -- Make as many arrayPointers as needed    arrayPointer1: LONG POINTER;    heap: UNCOUNTED ZONE ¬ GetHeap[];    MakeReadOnly[[7, 15]];    Ticker[];    MakeWritable[[5, 2]];    Ticker[];    MakeResident[[0, 15], wait];    Ticker[];    MakeSwappable[[1, 4]];    Ticker[];    arrayPointer1 ¬ heap.NEW[ARRAY[0..3) OF WORD ¬ [5, 1, 4]];    Map[id: "irregular swap units, matching backing runs"L,      interval: [0, 10],      backed: TRUE,      runs:  MakeBackingData[DESCRIPTOR[arrayPointer1, 3]],      access: readWrite,      swapUnits: MakeIrregularSwapData[DESCRIPTOR[arrayPointer1, 3]],      life: alive,      swappability: swappable];    Ticker[];    MakeReadOnly[[7, 15]];    Ticker[];    MakeWritable[[5, 2]];    Ticker[];    MakeResident[[0, 15], wait];    Ticker[];    MakeSwappable[[1, 4]];    Ticker[];    --Touch[[0, 10], read];    --Ticker[];    Unmap[page: 2];    Ticker[];    heap.FREE[@arrayPointer1];    heap ¬ GiveBackHeap[heap];    END;  ------------  -- PUBLIC SIGNALs and ERRORs: none  ------------  -- Initialization:  ScriptOps.RegisterScript[RunTests, "Make*"L];  END.LOG22-Nov-82 15:06:15   CAJ    Created file.