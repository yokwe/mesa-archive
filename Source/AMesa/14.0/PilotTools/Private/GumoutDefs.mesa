-- GumoutDefs.mesa   24-Jan-85 15:22:47 by CAJ -- Floppy Disk Tool DefinitionsDIRECTORY  FloppyChannel USING [Context, Density, Format, Handle],  FormSW        USING [ClientItemsProcType],  Window        USING [Handle];GumoutDefs: DEFINITIONS =  BEGIN  -- Types  DataHandle: TYPE = LONG POINTER TO Data;  Data: TYPE = RECORD [  -- The items herein which are passed to a FromSW must be word-aligned.    msgSW:        Window.Handle ¬ NIL,    fileSW:       Window.Handle ¬ NIL,    actionFormSW: Window.Handle ¬ NIL,    paramFormSW:  Window.Handle ¬ NIL,  -- Note: enumerateds and booleans must be word boundary  -- aligned as addresses for them must be generated    function:     FuncType ¬ NULL,    wordAlignA:   WORD ¬ 0,    print:        BOOLEAN ¬ NULL,    wordAlignB:   WORD ¬ 0,    fill:         FillType ¬ NULL,    wordAlignC:   WORD ¬ 0,    printHow:     PrintFormatType ¬ NULL,    wordAlignD:   WORD ¬ 0,    drivePresent: BOOLEAN ¬ NULL,    floppyDrive:  FloppyChannel.Handle ¬ NULL,    context:      ContextType ¬ NULL,    startAddr:    AddrType ¬ NULL,    endAddr:      AddrType ¬ NULL];  AddrType: TYPE = RECORD [sector, head, cylinder: CARDINAL];    ContextType: TYPE = MACHINE DEPENDENT RECORD [    protect(0):      BOOLEAN,    format(1):       FloppyChannel.Format,    density(2):      FloppyChannel.Density,    sectorLength(3): CARDINAL];      FillType: TYPE = {zeroes, ones, random, leaveAlone};  FuncType: TYPE = {    format, read, write, readID, writeDeleted, writeCheck, nop};  FormatType: TYPE = {IBM, Troy};  PrintFormatType: TYPE = {    octal, octalByte, hex, octalSwapped, ascii, asciiSwapped};  StateType: TYPE = {null, start, reset, quit, diskChange};  -- Variable declarations  state:      StateType;  toolData:   DataHandle;  nCylinders: CARDINAL;  nHeads:     CARDINAL;  nSectors:   CARDINAL;  -- Action Form SW Routines  MakeActionForm: FormSW.ClientItemsProcType;  -- Parameter Form SW Routines  MakeParamForm: FormSW.ClientItemsProcType;  -- Process Routines  CommandProcessor: PROCEDURE;  NotifyCommandProcessor: PROCEDURE;  -- Utility Routines  CurrentContext: PROCEDURE RETURNS [FloppyChannel.Context];  GetHandle: PROCEDURE RETURNS [FloppyChannel.Handle];  ResetContext: PROCEDURE [new: FloppyChannel.Context] RETURNS [BOOLEAN];  END.....  LOGFebruary 5, 1981  1:54 PM	CAJ    Add log; add CurrentContext, pilotContextDD, pilotContextSD, and VerifyPilotContext.February 9, 1981  5:28 PM	CAJ    Add nop and writeCheck functions, ResetContext.March 2, 1981  3:07 PM		CAJ    PrintFormatType changes: add octalByte, delete ascii.11-Sep-81  8:44:01		WDK       LONGified; made Data non-machineDependent.27-Oct-81 13:54:02		AWL         Deleted Pilot{S D}DContext and ValidPilotContext.29-Jun-82  9:56:30		FXH       add ascii and swapped print options.24-Jan-85 15:22:42		CAJ    Convert to 12.0 FloppyChannel.