-- Copyright (C) 1983  by Xerox Corporation. All rights reserved. -- ScriptGenericCopyTest.mesa        5-May-83 15:36:06 by CAJ -- Virtual memory test program, Klamath Pilot.-- This is a special stripped down version of ScriptGenericCopy for trapping-- a problem with MakeReadOnly + CopyIn.-- ScriptGenericCopy contains generic Copy procedures which may be called by-- scripts.  They do combinations of CopyIn/Out with other operations.-- This is not a registered script.DIRECTORY  Environment USING [PageCount, PageNumber],  ScriptGeneric USING [CopyProc, RestoreProc],  VMTestOperations USING [CannotTouch, Deactivate, MakeReadOnly, Touch],  VMTestScript USING [Ticker];ScriptGenericCopyTest: PROGRAM  IMPORTS VMTestOperations, VMTestScript  EXPORTS ScriptGeneric =  BEGIN  ------------  -- Public procedures:  -- Optional, replaceable test for zeroing in on Copy bugs.  -- Specific semantics for this one:  -- Test two specified Copy operations in a standard set of tests in various  -- combinations with other operations and each other.  Copy operations may be  -- the same or different.  Expects interval [0, regionSize] to be mapped.  CopyBugTest: PUBLIC PROCEDURE [    copyProc1, copyProc2: ScriptGeneric.CopyProc,    restoreProc: ScriptGeneric.RestoreProc, regionSize: CARDINAL] =    BEGIN OPEN ScriptGeneric, VMTestOperations, VMTestScript;    count: Environment.PageCount;    page: Environment.PageNumber;    BEGIN ENABLE VMTestOperations.CannotTouch => CONTINUE;    -- Just skip Touch if the page isn't mapped.    -- MakeReadOnly, Copy, Copy, Deactivate, Touch-read    FOR count IN [1..regionSize] DO      FOR page ¬ 0, page + count UNTIL page > regionSize - count DO	MakeReadOnly[interval: [page, count]];	copyProc1[interval: [page, count], runLength: count, returnWait: return];	copyProc2[interval: [page, count], runLength: count, returnWait: wait];	Deactivate[interval: [page, count], returnWait: wait];	Touch[interval: [page, count], operation: read];	ENDLOOP;      Ticker[];      restoreProc[];      ENDLOOP;    END;  -- end scope of ENABLE    END;  ------------  -- PRIVATE procedures:  ------------  -- PUBLIC SIGNALs and ERRORs: none  ------------  -- Initialization: none  END.LOG17-Mar-83 14:03:43   CAJ    Created file.