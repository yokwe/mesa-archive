-- File: MailPost.mesa - last edit by-- AlHall,	14-Aug-84 18:43:05DIRECTORY  Event USING [Handle],  FormSW USING [MenuProcType],  MailAttributes USING [AttributeList],  MailSend USING [ReplyToFlag],  MailTransport USING [NameList],  TextSource USING [Handle, Procedures],  Window USING [Handle];MailPost: DEFINITIONS =  BEGIN      Handle: TYPE = LONG POINTER TO Object;  Object: TYPE = RECORD [    -- NOTE: The first field must be "procs" in order for the code    --   "handle: Handle = LOOPHOLE[source]" to work.    procs: TextSource.Procedures ¬ NIL,    condition: CONDITION,    file: LONG STRING ¬ NIL,    link: Handle ¬ NIL,  -- used for inactiveList    ifInvalidRecipients: BOOLEAN ¬ FALSE,    toolWindow,    msgSW,    commandSW,    textSW: Window.Handle ¬ NIL,    replyToFlag: MailSend.ReplyToFlag ¬ stop,    sendAs: SendAs ¬ text,    expandPvtDLs: BOOLEAN ¬ FALSE,    scratch: TextSource.Handle ¬ NIL,    dirty: BOOLEAN ¬ FALSE,		-- refers to alteration of window    busy: BOOLEAN ¬ FALSE,		-- true while delivering a message    justActivating: BOOLEAN ¬ FALSE,	-- used for inactiveList    showing: Showing ¬ nothing,		-- state of window (deliver command)    grabInput: BOOLEAN ¬ FALSE,		--? figure out what for    initializing: BOOLEAN ¬ TRUE,    attachmentFile,    attachmentType: LONG STRING ¬ NIL,    -- Post-time fields:    attributes: MailAttributes.AttributeList ¬ NIL,    hasReplyTo: BOOLEAN ¬ FALSE,    ccList,    fakeccList,    toList,    faketoList,    recipients: MailTransport.NameList ¬ NIL,    userDefinedHeaderFields: LONG STRING ¬ NIL    ];  SendAs: TYPE = MACHINE DEPENDENT {text(0), mailNote(1), attachment(2), last(LAST[CARDINAL]) };  Showing: TYPE = {nothing, command, indicator};  zone: UNCOUNTED ZONE;      -- PROCs implemented by NSMailSendToolImpl:    AppendReplyTo: PROCEDURE [h: Handle, string: LONG STRING];    MakeTextSWEditable: PROCEDURE [sW: Window.Handle];    MakeTextSWReadOnly: PROCEDURE [sW: Window.Handle];    PutError: PROCEDURE [msgSW: Window.Handle, string: LONG STRING];    IndicateDelivered: PROCEDURE [h: Handle];      -- PROCs implemented by MailPostImpl:    AttachmentTypeMenuProc: FormSW.MenuProcType;      GetUserLocalName: PROCEDURE [    proc: PROCEDURE [name: LONG STRING]];    PostMessage: PROCEDURE [h: Handle, event: Event.Handle];    SetUserNameAndPassword: PROCEDURE;      END.