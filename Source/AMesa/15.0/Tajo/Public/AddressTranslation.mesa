--AddressTranslation.mesa, HGM, 26-Feb-84  1:18:21-- (last edited by: AOF on: 11-Apr-83  8:23:20)--Copyright (C) Xerox Corporation 1982. All rights reserved.DIRECTORY  Auth USING [IdentityHandle],  CH USING [ReturnCode],  Format USING [StringProc],  NSName USING [Name],  System USING [HostNumber, NetworkNumber, NetworkAddress];AddressTranslation: DEFINITIONS =  BEGIN  --TYPES    NetworkAddress: TYPE = System.NetworkAddress;    --PROCEDURES    StringToNetworkAddress: PROCEDURE [    s: LONG STRING,     id: Auth.IdentityHandle ¬ NIL,    distingName: NSName.Name ¬ NIL]    RETURNS [addr: NetworkAddress, chUsed: BOOLEAN];    --The following two procedures only translate numeric strings.  --(No Clearinghouse lookup is attempted)  StringToHostNumber: PROCEDURE [LONG STRING] RETURNS [System.HostNumber];  StringToNetworkNumber: PROCEDURE [LONG STRING]    RETURNS [System.NetworkNumber];  PrintError: PROCEDURE [    error: ErrorRecord, proc: Format.StringProc, clientData: LONG POINTER ¬ NIL];    <<Will output the error using the string proc.  The CH.ReturnCode    is formatted within a pair of square brackets.    Eg.: "[done, first]".    The string proc will be called more than once.>>      -- ERRORS  Error: ERROR [errorRecord: ErrorRecord];    ErrorType: TYPE = {scanError, badSyntax, chLookupProblem, otherCHProblem};    ErrorRecord: TYPE = RECORD [   SELECT errorType: ErrorType FROM     scanError => [position: CARDINAL],     badSyntax => [field: Field],     chLookupProblem => [rc: CH.ReturnCode],     otherCHProblem => [reason: Reason],     ENDCASE];     Field: TYPE = {net, host, socket, ambiguous};  Reason: TYPE = {    noUsefulProperties,  --the distinguished name existed,    --but it didn't have any properties in the allowed set associated with it.    ambiguousSeparators, --string has both @ and : in it    tooManySeparators, --more than two separators were found    authentication,    invalidName,    invalidPassword,    couldntDetermineAddress,    spare1, spare2, spare3};      END. --AddressTranslationLOGTime: 11-Apr-83  8:22:56 By: AOF Action: Trimmed for Klamath Time:  7-Sep-84 15:44:27 By: BGY Action: Added Auth.IdentityHandle Time: 10-Sep-84 11:45:18 By: BJD Action: Combined errors into ErrorRecord 