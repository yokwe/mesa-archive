-- Copyright (C) 1981, 1982, 1983  by Xerox Corporation. All rights reserved. -- File: TajoControl.mesa - last edited by:-- SXW   , 	27-Jan-81 18:10:59-- SXE  ,	October 8, 1980  6:21 PM-- BXM  ,	28-Oct-81  8:18:47-- PXK    ,	 2-Dec-83 14:13:35-- Mark,	22-Jun-81 17:38:04-- SXS   ,	 9-Jul-82 17:40:40-- LXR    	15-Dec-82 12:18:45-- RXR   	10-Feb-83 15:09:23DIRECTORY  Ascii USING [SP],  Cursor USING [Set],  ExecInternal USING [SetBuiltInCommands],  PilotClient USING [],  Process USING [Detach],  String USING [AppendChar, AppendString],  TajoOps USING [Notifier, SetPlace, StartPhase1, StartPhase2, StartHerald],  Version USING [Append];TajoControl: PROGRAM  IMPORTS    Cursor, ExecInternal, Process, String, TajoOps, Version  EXPORTS PilotClient =  BEGIN  Run: PUBLIC PROCEDURE = {};  -- all we need is the start trap  StartNotifier: PROCEDURE =    BEGIN DO TajoOps.Notifier[ ! ABORTED => CONTINUE]; ENDLOOP; END;  StartTrap: PROCEDURE =    BEGIN    tajoName: STRING ¬ [12];    name: STRING = "Tajo"L;    TajoOps.SetPlace[tajo];    TajoOps.StartPhase1[long: 20]; -- this will START trap the built-in Tools if there is an InitialCommand entry in [System]    -- START trap all of the built-in Tools, but inactive!    String.AppendString[tajoName, name]; String.AppendChar[tajoName, Ascii.SP];    Version.Append[tajoName];    TajoOps.StartHerald[tajoName, name];    ExecInternal.SetBuiltInCommands[];    TajoOps.StartPhase2[];    Process.Detach[FORK StartNotifier[]];  -- free up Pilot frames above us    Cursor.Set[groundedText]    END;  -- Mainline code  StartTrap[];  END.